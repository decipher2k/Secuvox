if (checkVideo == 1) {
    // video is playing var
    var creativeVideo_isPlaying = 0;
    var creativeVideo;
    var VideoHeight;
    var VideoWidth;
}

// date
var releaseDate = new Date(releaseYear, (releaseMonth-1), releaseDay);
var now = new Date();

// other vars
var checkPageEnd = 0;
if (checkLocal == 0 && wbd_dfp_site == "gamestar.de") {
    var gs_newHeader = parent.document.getElementById('header-navi');
}
if (checkLocal == 0 && wbd_dfp_site == "gamepro.de") {
    var gp_newHeader = parent.document.getElementById('header-navi');
}

// get height of GS/GP top-banner and header START
var top_bar_height = getAbsoluteHeight(parent.document.querySelector('.topbar'));
var header_height = getAbsoluteHeight(parent.document.querySelector('header'));
var summed_height = header_height + top_bar_height;

function getAbsoluteHeight(el) {
if (!el) {
    return 0;
}
// Get the DOM Node if you pass in a string
el = (typeof el === 'string') ? document.querySelector(el) : el; 

var styles = window.getComputedStyle(el);
var margin = parseFloat(styles['marginTop']) +
             parseFloat(styles['marginBottom']);

// return Math.ceil(el.offsetHeight + margin);
return Math.ceil(el.offsetHeight);
}
// get height of GS/GP top-banner and header END


// get height of XBOXDYNASTY header START

var xboxdyn_header_height = $(".custom-fixed-top", window.parent.document).height();
// console.log("Höhe des Headers: "+ xboxdyn_header_height);

// get height of XBOXDYNASTY header END

// global adjust
function globalAdjust() {
    // set bg-color
    if(checkLocal == 0) {
        if (wbd_dfp_site == "mein-mmo.de") {
            $('#gp-page-wrapper', window.parent.document).css({"background-color": creativeBgColor});
        } else if (wbd_dfp_site == "ninotaku.de") {
            $('body', window.parent.document).css({"background-color": creativeBgColor});
            $('.site-inner', window.parent.document).css({"background-color": creativeBgColor});
        }
        else {
            $('body', window.parent.document).css({"background-color": creativeBgColor});
        }
    } else if(checkLocal == 1) {
        $('body').css("background-color", creativeBgColor);
    }

    // set new fireplace-width
    if(checkLocal == 0) {
        var fp1920_adjust = {
            'type': 'wbd_dfp',
            'id': window.frameElement.id,
            'actions': {
                'css': {
                    '#dfp-masthead': {'width': '1920px', 'margin-left': '-960px'},
                    '#dfp-masthead iframe': {'width': '1920px', 'height': '1080px'}

                }
            }
        };
        window.parent.postMessage(JSON.stringify(fp1920_adjust), '*');

        if ( wbd_dfp_site == "mein-mmo.de" ) {
            var set_mmo = {
                'type': 'wbd_dfp',
                'id': window.frameElement.id,
                'actions': {
                    'css': {
                        '#dfp-masthead': {'margin-top': '0px'}
                    }
                }
            };
            window.parent.postMessage(JSON.stringify(set_mmo), '*');
        }
    }

    // set position fixed/sticky
    if(checkLocal == 0 && checkSticky == 1) {
        if ( wbd_dfp_site == "filmstarts.de" || wbd_dfp_site == "moviepilot.de" || wbd_dfp_site == "sung.at" ) {
            var do_sticky = {
                'type': 'wbd_dfp',
                'id': window.frameElement.id,
                'actions': {
                    'css': {
                        '#dfp-masthead': {'position': 'fixed'}
                    }
                }
            };
            window.parent.postMessage(JSON.stringify(do_sticky), '*');

        }
    }

    // assign sources depending on content-width 		// 08.04.2019_jw mmmo zu gs gp etc hinzugefügt wegen breiterem content 07.10.2019_jw xboxdynasty auch hinzugefügt
    if (checkLocal == 0) {
        // 980, 1000, 1024
        if (wbd_dfp_site == "filmstarts.de" || wbd_dfp_site == "moviepilot.de" || wbd_dfp_site == "gtainside.com") {

            creativeSkinPre_src = creativeSkinPre_src_lt;
            creativeSkinPost_src = creativeSkinPost_src_lt;
            creativeSkinStickyPre_src = creativeSkinStickyPre_src_lt;
            creativeSkinStickyPost_src = creativeSkinStickyPost_src_lt;

        }

        // 1140
        if (wbd_dfp_site == "gamestar.de" || wbd_dfp_site == "wgm.ipx" || wbd_dfp_site == "gamepro.de" || wbd_dfp_site == "ninotaku.de" || wbd_dfp_site == "mein-mmo.de" || wbd_dfp_site == "pietsmiet.de" || wbd_dfp_site == "xboxdynasty.de" || wbd_dfp_site == "sung.at" || wbd_dfp_site == "nintendo-online.de") {

            creativeSkinPre_src = creativeSkinPre_src_gt;
            creativeSkinPost_src = creativeSkinPost_src_gt;
            creativeSkinStickyPre_src = creativeSkinStickyPre_src_gt;
            creativeSkinStickyPost_src = creativeSkinStickyPost_src_gt;

        }
    }

    if (checkLocal == 1) {
        // 980, 1000, 1024
        if (skinTest == 1) {
            creativeSkinPre_src = creativeSkinPre_src_lt;
            creativeSkinPost_src = creativeSkinPost_src_lt;
            creativeSkinStickyPre_src = creativeSkinStickyPre_src_lt;
            creativeSkinStickyPost_src = creativeSkinStickyPost_src_lt;
        }

        // 1140
        if (skinTest == 2) {
            creativeSkinPre_src = creativeSkinPre_src_gt;
            creativeSkinPost_src = creativeSkinPost_src_gt;
            creativeSkinStickyPre_src = creativeSkinStickyPre_src_gt;
            creativeSkinStickyPost_src = creativeSkinStickyPost_src_gt;
        }
    }
}

// attach sources
function attachSources() {
    // expandable with video
    if (checkExpandable == 1 && checkVideo == 1) {
        // skinchange on release: yes
        if (skinChangeOnOff == 1) {
            if (now >= releaseDate) {
                // post
                $("#creativeSkin").attr("src", creativeSkinPost_src);
                $("#creativeVideo > source[type='video/mp4']").attr("src", creativeVideoPost_src_mp4);
            } else {
                // pre
                $("#creativeSkin").attr("src", creativeSkinPre_src);
                $("#creativeVideo > source[type='video/mp4']").attr("src", creativeVideoPre_src_mp4);
            }
        }
        // skinchange on release: no
        if (skinChangeOnOff == 0) {
            $("#creativeSkin").attr("src", creativeSkinPre_src);
            $("#creativeVideo > source[type='video/mp4']").attr("src", creativeVideoPre_src_mp4);
        }

        $("#creativeBtnExpand").attr("src", creativeExpand_src);
        $("#creativeBtnCollapse").attr("src", creativeCollapse_src);
    }

    // not expandable with video
    if (checkExpandable == 0 && checkVideo == 1) {
        // skinchange on release: yes
        if (skinChangeOnOff == 1) {
            if (now >= releaseDate) {
                // post
                $("#creativeSkin").attr("src", creativeSkinPost_src);
                $("#creativeVideoScreen").attr("src", creativeVideoScreenPost_src);
                $("#creativeVideo > source[type='video/mp4']").attr("src", creativeVideoPost_src_mp4);
            } else {
                // pre
                $("#creativeSkin").attr("src", creativeSkinPre_src);
                $("#creativeVideoScreen").attr("src", creativeVideoScreenPre_src);
                $("#creativeVideo > source[type='video/mp4']").attr("src", creativeVideoPre_src_mp4);
            }
        }
        // skinchange on release: no
        if (skinChangeOnOff == 0) {
            $("#creativeSkin").attr("src", creativeSkinPre_src);
            $("#creativeVideoScreen").attr("src", creativeVideoScreenPre_src);
            $("#creativeVideo > source[type='video/mp4']").attr("src", creativeVideoPre_src_mp4);
        }
    }

    // not expandable and no video
    if (checkExpandable == 0 && checkVideo == 0) {
        // skinchange on release: yes
        if (skinChangeOnOff == 1) {
            if (now >= releaseDate) {
                // post
                $("#creativeSkin").attr("src", creativeSkinPost_src);
            } else {
                // pre
                $("#creativeSkin").attr("src", creativeSkinPre_src);
            }
        }
        // skinchange on release: no
        if (skinChangeOnOff == 0) {
            $("#creativeSkin").attr("src", creativeSkinPre_src);
        }
    }
}

// check if user has scrolled
function hasScrolled() {
    // attach sticky-skins
    if (skinChangeOnOff == 1) {
        if (now >= releaseDate) {
            // post
            $("#creativeSkinSticky").attr("src", creativeSkinStickyPost_src);
        } else {
            // pre
            $("#creativeSkinSticky").attr("src", creativeSkinStickyPre_src);
        }
    }
    if (skinChangeOnOff == 0) {
        $("#creativeSkinSticky").attr("src", creativeSkinStickyPre_src);
    }

    getSticky();
    changeSkinScrolled();

    if (checkExpandable == 0 && checkVideo == 1) {
        fadeOutVideo();
    }
}

// sticky
function getSticky() {
    // do always

    // collapse expandable video when scrolling
    if (creativeVideo_isPlaying == 1 && checkExpandable == 1 && checkVideo == 1) {
        if($(parent.window).scrollTop() >= 400) {
            creativeCollapse();
        }
    }

    // stop normal video when scrolling
    if (checkExpandable == 0 && checkVideo == 1) {
        creativeVideoPause();
        if (creativeVideo_isPlaying == 1) {
            creativeVideoPause();
        }
    }

    // do only if sticky activated
    if (checkSticky == 1) {
        // hide Ad when reaching end of page
        if ( wbd_dfp_site == "filmstarts.de") {
            if ($(parent.window).scrollTop() >= $(parent.document).height() - $(parent.window).height() - 1200) {
                var FPhide = {
                    'type': 'wbd_dfp',
                    'id': window.frameElement.id,
                    'actions': {
                        'css': {
                            '#dfp-masthead': {'display': 'none'}
                        }
                    }
                };

                // send data object
                window.parent.postMessage(JSON.stringify(FPhide), '*');

                checkPageEnd = 1;
            }
        } else {
            if ($(parent.window).scrollTop() >= $(parent.document).height() - $(parent.window).height() - 550) {
                var FPhide = {
                    'type': 'wbd_dfp',
                    'id': window.frameElement.id,
                    'actions': {
                        'css': {
                            '#dfp-masthead': {'display': 'none'}
                        }
                    }
                };

                // send data object
                window.parent.postMessage(JSON.stringify(FPhide), '*');

                checkPageEnd = 1;
            }
        }

        // show Ad when leaving end of page
        if ( wbd_dfp_site == "filmstarts.de") {
            if (checkPageEnd == 1 && ($(parent.window).scrollTop() < $(parent.document).height() - $(parent.window).height() - 1200) ) {
                var FPhide = {
                    'type': 'wbd_dfp',
                    'id': window.frameElement.id,
                    'actions': {
                        'css': {
                            '#dfp-masthead': {'display': 'block'}
                        }
                    }
                };

                // send data object
                window.parent.postMessage(JSON.stringify(FPhide), '*');

                checkPageEnd = 0;
            }
        } else {
            if (checkPageEnd == 1 && ($(parent.window).scrollTop() < $(parent.document).height() - $(parent.window).height() - 550) ) {
                var FPhide = {
                    'type': 'wbd_dfp',
                    'id': window.frameElement.id,
                    'actions': {
                        'css': {
                            '#dfp-masthead': {'display': 'block'}
                        }
                    }
                };

                // send data object
                window.parent.postMessage(JSON.stringify(FPhide), '*');

                checkPageEnd = 0;
            }
        }

        // sticky

        // console.log("Pixel gescrollt: " + $(parent.window).scrollTop());
        if (wbd_dfp_site == "filmstarts.de") {

            // old Header
            if (newheader_fs == "false") {
                if($(parent.window).scrollTop() >= 390) {
                    var fs_sticky = {
                        'type': 'wbd_dfp',
                        'id': window.frameElement.id,
                        'actions': {
                            'css': {
                                '#dfp-masthead': {'margin-top': '-369px'}
                            }
                        }
                    };
                    window.parent.postMessage(JSON.stringify(fs_sticky), '*');
                }
            }

            // new Header
            if (newheader_fs == "true") {
                if($(parent.window).scrollTop() >= 103) {
                    var fs_sticky = {
                        'type': 'wbd_dfp',
                        'id': window.frameElement.id,
                        'actions': {
                            'css': {
                                '#dfp-masthead iframe': {'margin-top': '-4px'}
                            }
                        }
                    };
                    window.parent.postMessage(JSON.stringify(fs_sticky), '*');
                }
            }
        }

        if (wbd_dfp_site == "gamestar.de" || wbd_dfp_site == "gamepro.de" || wbd_dfp_site == "wgm.ipx") {
            // Forum
            if (wbd_dfp_siteID == '21719874131' ) {
                if($(parent.window).scrollTop() >= 128) {
                    var fs_sticky = {
                        'type': 'wbd_dfp',
                        'id': window.frameElement.id,
                        'actions': {
                            'css': {
                                '#dfp-masthead': {'position': 'fixed', 'margin-top': '0px', 'top': '0px'}
                            }
                        }
                    };
                    window.parent.postMessage(JSON.stringify(fs_sticky), '*');
                }
            } else {
                if($(parent.window).scrollTop() >= top_bar_height) {
                    var fs_sticky = {
                        'type': 'wbd_dfp',
                        'id': window.frameElement.id,
                        'actions': {
                            'css': {
                                '#dfp-masthead': {'position': 'fixed', 'margin-top': '0px', 'top': header_height + 'px'}
                            }
                        }
                    };
                    window.parent.postMessage(JSON.stringify(fs_sticky), '*');

                    if(parent.document.getElementById("header").classList.contains("header-slim")) {
                        var fs_sticky = {
                            'type': 'wbd_dfp',
                            'id': window.frameElement.id,
                            'actions': {
                                'css': {
                                    '#dfp-masthead': {'top': '48px'}
                                }
                            }
                        };
                        window.parent.postMessage(JSON.stringify(fs_sticky), '*');
                    } else if(parent.document.getElementById("header").classList.contains("header-bold")) {
                        var fs_sticky = {
                            'type': 'wbd_dfp',
                            'id': window.frameElement.id,
                            'actions': {
                                'css': {
                                    '#dfp-masthead': {'top': header_height + 'px'}
                                }
                            }
                        };
                        window.parent.postMessage(JSON.stringify(fs_sticky), '*');
                    }
                    
                }
            }

        }

        if (wbd_dfp_site == "mein-mmo.de") {
            if($(parent.window).scrollTop() >= 32) {
                var fs_sticky = {
                    'type': 'wbd_dfp',
                    'id': window.frameElement.id,
                    'actions': {
                        'css': {
                            '#dfp-masthead': {'position': 'fixed', 'margin-top': '-61px'}
                        }
                    }
                };
                window.parent.postMessage(JSON.stringify(fs_sticky), '*');
            }
        }

        if (wbd_dfp_site == "pietsmiet.de") {
            if($(parent.window).scrollTop() >= 120) {
                var fs_sticky = {
                    'type': 'wbd_dfp',
                    'id': window.frameElement.id,
                    'actions': {
                        'css': {
                            '#dfp-masthead': {'position': 'fixed', 'margin-top': '-30px'}
                        }
                    }
                };
                window.parent.postMessage(JSON.stringify(fs_sticky), '*');
            }
        }

        if (wbd_dfp_site == "nintendo-online.de") {
            if($(parent.window).scrollTop() >= 43) {
                var fs_sticky = {
                    'type': 'wbd_dfp',
                    'id': window.frameElement.id,
                    'actions': {
                        'css': {
                            '#dfp-masthead': {'position': 'fixed', 'margin-top': '-70px'}
                        }
                    }
                };
                window.parent.postMessage(JSON.stringify(fs_sticky), '*');
            }
        }

        if (wbd_dfp_site == "ps4-magazin.de") {
            if($(parent.window).scrollTop() >= 166) {
                var fs_sticky = {
                    'type': 'wbd_dfp',
                    'id': window.frameElement.id,
                    'actions': {
                        'css': {
                            '#dfp-masthead': {'position': 'fixed', 'margin-top': '-166px'}
                        }
                    }
                };
                window.parent.postMessage(JSON.stringify(fs_sticky), '*');
            }
        }

        if (wbd_dfp_site == "ninotaku.de") {
            if($(parent.window).scrollTop() >= 112) {
                var fs_sticky = {
                    'type': 'wbd_dfp',
                    'id': window.frameElement.id,
                    'actions': {
                        'css': {
                            '#dfp-masthead': {'position': 'fixed', 'margin-top': '-112px'}
                        }
                    }
                };
                window.parent.postMessage(JSON.stringify(fs_sticky), '*');
            }
        }

        if (wbd_dfp_site == "xboxdynasty.de") {
            if($(parent.window).scrollTop() >= xboxdyn_header_height) {
                var fs_sticky = {
                    'type': 'wbd_dfp',
                    'id': window.frameElement.id,
                    'actions': {
                        'css': {
                            '#dfp-masthead': {'position': 'fixed', 'margin-top': -xboxdyn_header_height + 'px'}
                        }
                    }
                };
                window.parent.postMessage(JSON.stringify(fs_sticky), '*');
            }
        }

        // unsticky
        if (wbd_dfp_site == "filmstarts.de") {

            // old Header
            if (newheader_fs == "false") {
                if($(parent.window).scrollTop() < 390) {
                    var fs_sticky = {
                        'type': 'wbd_dfp',
                        'id': window.frameElement.id,
                        'actions': {
                            'css': {
                                '#dfp-masthead': {'margin-top': '-447px'}
                            }
                        }
                    };
                    window.parent.postMessage(JSON.stringify(fs_sticky), '*');
                }
            }

            // new Header
            if (newheader_fs == "true") {
                if($(parent.window).scrollTop() < 103) {
                    var fs_sticky = {
                        'type': 'wbd_dfp',
                        'id': window.frameElement.id,
                        'actions': {
                            'css': {
                                '#dfp-masthead iframe': {'margin-top': '0px'}
                            }
                        }
                    };
                    window.parent.postMessage(JSON.stringify(fs_sticky), '*');
                }
            }
        }

        if (wbd_dfp_site == "gamestar.de" || wbd_dfp_site == "gamepro.de" || wbd_dfp_site == "wgm.ipx") {
            // Forum
            if (wbd_dfp_siteID == '21719874131' ) {
                if($(parent.window).scrollTop() < 128) {
                    var fs_sticky = {
                        'type': 'wbd_dfp',
                        'id': window.frameElement.id,
                        'actions': {
                            'css': {
                                '#dfp-masthead': {'position': 'fixed', 'margin-top': '0px', 'top': '126px'}
                            }
                        }
                    };
                    window.parent.postMessage(JSON.stringify(fs_sticky), '*');
                }
            } else {
                if($(parent.window).scrollTop() < summed_height) {
                    if (window.parent.document.getElementsByClassName("topbar").length > 0) {
                        var fs_sticky = {
                            'type': 'wbd_dfp',
                            'id': window.frameElement.id,
                            'actions': {
                                'css': {
                                    '#dfp-masthead': {'position': 'absolute', 'top': '0px', 'margin-top': '-10px'}
                                }
                            }
                        };
                        window.parent.postMessage(JSON.stringify(fs_sticky), '*');

                    } else {
                        var fs_sticky = {
                            'type': 'wbd_dfp',
                            'id': window.frameElement.id,
                            'actions': {
                                'css': {
                                    '#dfp-masthead': {'position': 'absolute', 'top': '0px', 'margin-top': '6px'}
                                }
                            }
                        };
                        window.parent.postMessage(JSON.stringify(fs_sticky), '*');
                        
                    }
                }
            }



        }

        if (wbd_dfp_site == "mein-mmo.de") {
            if($(parent.window).scrollTop() < 32) {
                var fs_sticky = {
                    'type': 'wbd_dfp',
                    'id': window.frameElement.id,
                    'actions': {
                        'css': {
                            '#dfp-masthead': {'position': 'absolute', 'margin-top': '0px'}
                        }
                    }
                };
                window.parent.postMessage(JSON.stringify(fs_sticky), '*');
            }
        }

        if (wbd_dfp_site == "pietsmiet.de") {
            if($(parent.window).scrollTop() < 120) {
                var fs_sticky = {
                    'type': 'wbd_dfp',
                    'id': window.frameElement.id,
                    'actions': {
                        'css': {
                            '#dfp-masthead': {'position': 'absolute', 'margin-top': '-30px !important'}
                        }
                    }
                };
                window.parent.postMessage(JSON.stringify(fs_sticky), '*');

                // console.log(wbd_dfp_site + ": unsticky");
            }
        }

        if (wbd_dfp_site == "nintendo-online.de") {
            if($(parent.window).scrollTop() < 43) {
                var fs_sticky = {
                    'type': 'wbd_dfp',
                    'id': window.frameElement.id,
                    'actions': {
                        'css': {
                            '#dfp-masthead': {'position': 'absolute', 'margin-top': '-18px'}
                        }
                    }
                };
                window.parent.postMessage(JSON.stringify(fs_sticky), '*');
            }
        }


        if (wbd_dfp_site == "ps4-magazin.de") {
            if($(parent.window).scrollTop() < 166) {
                var fs_sticky = {
                    'type': 'wbd_dfp',
                    'id': window.frameElement.id,
                    'actions': {
                        'css': {
                            '#dfp-masthead': {'position': 'absolute', 'margin-top': '0px'}
                        }
                    }
                };
                window.parent.postMessage(JSON.stringify(fs_sticky), '*');
            }
        }

        if (wbd_dfp_site == "ninotaku.de") {
            if($(parent.window).scrollTop() < 112) {
                var fs_sticky = {
                    'type': 'wbd_dfp',
                    'id': window.frameElement.id,
                    'actions': {
                        'css': {
                            '#dfp-masthead': {'position': 'absolute', 'margin-top': '0px'}
                        }
                    }
                };
                window.parent.postMessage(JSON.stringify(fs_sticky), '*');
            }
        }

        if (wbd_dfp_site == "xboxdynasty.de") {
            if($(parent.window).scrollTop() < xboxdyn_header_height) {
                var fs_sticky = {
                    'type': 'wbd_dfp',
                    'id': window.frameElement.id,
                    'actions': {
                        'css': {
                            '#dfp-masthead': {'position': 'absolute', 'margin-top': '0px'}
                        }
                    }
                };
                window.parent.postMessage(JSON.stringify(fs_sticky), '*');
            }
        }
        
    }
}

// change skin when scrolled down
function changeSkinScrolled() {
    //sticky
    if($(parent.window).scrollTop() >= 250) {
        $("#creativeSkinSticky").fadeIn();
    }

    // unsticky
    if($(parent.window).scrollTop() < 250) {
        $("#creativeSkinSticky").fadeOut();
    }
}

function fadeOutVideo() {
    //sticky
    if($(parent.window).scrollTop() >= 250) {
        $("#creativeVideoWrapper").fadeOut();
    }

    // unsticky
    if($(parent.window).scrollTop() < 250) {
        $("#creativeVideoWrapper").fadeIn();
    }
}

// video dimensions
function setVideoDimensions() {
    // for local testing: set video dimensions expandable
    if (checkLocal == 1 && checkExpandable == 1 && checkVideo == 1) {
        $("#creativeVideo").css({"width": "960px", "height": "540px", "margin-left": "-480px"});
        $("#creativeVideo").get(0).load();
    }

    // set video dimensions normal
    if (checkExpandable == 0 && checkVideo == 1) {
        $("#creativeVideo").get(0).load();
        $("#creativeVideo, #creativeVideoScreen, #creativeVideoWrapper").css({"width": creativeVideoWidth, "height": creativeVideoHeight});
        $("#creativeVideoWrapper").css({"left": creativeVideoX, "top": creativeVideoY});
    }

    // for dfp: set video dimensions expandable
    if (checkLocal == 0 && checkVideo == 1) {
        if (checkExpandable == 1) {
            $("#creativeVideo").css({"width": "960px", "height": "540px", "margin-left": "-480px"});
            $("#creativeVideo").get(0).load();
        }
    }
}

// expand/video play
function creativeExpand() {
    if (checkLocal == 0) {
        if(wbd_dfp_site == "filmstarts.de") {

            // old Header
            if (newheader_fs == "false") {
                var FPexpand = {
                    'type': 'wbd_dfp',
                    'id': window.frameElement.id,
                    'actions': {
                        'animate': [
                        {
                            'target': '#ads-outer',
                            'properties': { 'margin-bottom': '539px' },  // old: 576
                            'duration': 400
                        },
                        {
                            'target': '#dfp-masthead',
                            'properties': { 'margin-top': '-986px' },  // old: -1023
                            'duration': 400
                        }
                        ],
                    }
                };

                // send data object
                window.parent.postMessage(JSON.stringify(FPexpand), '*');
            }
            // New Header
            else if (newheader_fs == "true") {
                var FPexpand = {
                    'type': 'wbd_dfp',
                    'id': window.frameElement.id,
                    'actions': {
                        'animate': [
                        {
                            'target': '#ads-outer',
                            'properties': { 'margin-bottom': '539px' },  // old: 576
                            'duration': 400
                        },
                        {
                            'target': '#dfp-masthead',
                            'properties': { 'margin-top': '-849px' },  // old: -886
                            'duration': 400
                        }
                        ],
                    }
                };

                // send data object
                window.parent.postMessage(JSON.stringify(FPexpand), '*');
            }

        } else {
            var FPexpand = {
                'type': 'wbd_dfp',
                'id': window.frameElement.id,
                'actions': {
                    'animate': [
                        {
                            'target': '#dfp-header',
                            'properties': { 'margin-bottom': '539px' },
                            'duration': 400
                        }
                    ],
                }
            };

            // send data object
            window.parent.postMessage(JSON.stringify(FPexpand), '*');
        }

    }

    $("#creativeBtnExpand").hide();
    $("#creativeBtnCollapse").show();
    $("#creativeVideo").show();
    creativeVideo.play();
    creativeVideo_isPlaying = 1;
}

// collapse/video stop
function creativeCollapse() {
    if (checkLocal == 0) {
        if(wbd_dfp_site == "filmstarts.de") {

            // old Header
            if (newheader_fs == "false") {
                var FPcollapse = {
                    'type': 'wbd_dfp',
                    'id': window.frameElement.id,
                    'actions': {
                        'animate': [
                            {
                                'target': '#ads-outer',
                                'properties': { 'margin-bottom': '0px' },
                                'duration': 400
                            },
                            {
                                'target': '#dfp-masthead',
                                'properties': { 'margin-top': '-447px' }, // old: -447
                                'duration': 400
                            }
                        ],
                    }
                };

                // send data object
                window.parent.postMessage(JSON.stringify(FPcollapse), '*');
            }

            // New Header
            else if (newheader_fs == "true") {
                var FPcollapse = {
                    'type': 'wbd_dfp',
                    'id': window.frameElement.id,
                    'actions': {
                        'animate': [
                            {
                                'target': '#ads-outer',
                                'properties': { 'margin-bottom': '0px' },
                                'duration': 400
                            },
                            {
                                'target': '#dfp-masthead',
                                'properties': { 'margin-top': '-310px' }, // old: -310
                                'duration': 400
                            }
                        ],
                    }
                };

                // send data object
                window.parent.postMessage(JSON.stringify(FPcollapse), '*');
            }

        } else {
            var FPcollapse = {
                'type': 'wbd_dfp',
                'id': window.frameElement.id,
                'actions': {
                    'animate': [
                        {
                            'target': '#dfp-header',
                            'properties': { 'margin-bottom': '0px' },
                            'duration': 400
                        }
                    ],
                }
            };

            // send data object
            window.parent.postMessage(JSON.stringify(FPcollapse), '*');
        }

    }

    $("#creativeBtnCollapse").hide();
    $("#creativeBtnExpand").show();
    $("#creativeVideo").delay(250).fadeOut();
    creativeVideo.currentTime = 0;
    creativeVideo.pause();
    creativeVideo_isPlaying = 0;
}

// video play
function creativeVideoPlay() {
    creativeVideo.play();
    $("#creativeVideoScreen").fadeOut();
    $("#creativeVideoPlayBtn").fadeOut();
    $("#creativeVideoPauseBtn").fadeIn();
    creativeVideo_isPlaying = 1;
}

// video pause
function creativeVideoPause() {
    creativeVideo.pause();
    $("#creativeVideoPauseBtn").fadeOut();
    $("#creativeVideoPlayBtn").fadeIn();
    creativeVideo_isPlaying = 0;
}

// video end
function creativeVideoEnd() {
    creativeVideo.currentTime = 0;
    creativeVideo.pause();
    $("#creativeVideoScreen").fadeIn();
    $("#creativeVideoPlayBtn").fadeIn();
    $("#creativeVideoPauseBtn").fadeOut();
}
