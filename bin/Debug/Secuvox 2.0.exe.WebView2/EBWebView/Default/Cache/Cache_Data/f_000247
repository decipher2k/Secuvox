{"version":3,"sources":["webpack://@cleverpush/cleverpush-js-sdk/./node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","webpack://@cleverpush/cleverpush-js-sdk/./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack://@cleverpush/cleverpush-js-sdk/./node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","webpack://@cleverpush/cleverpush-js-sdk/./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack://@cleverpush/cleverpush-js-sdk/./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack://@cleverpush/cleverpush-js-sdk/./node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack://@cleverpush/cleverpush-js-sdk/./node_modules/@babel/runtime/helpers/esm/construct.js","webpack://@cleverpush/cleverpush-js-sdk/./node_modules/@babel/runtime/helpers/esm/createClass.js","webpack://@cleverpush/cleverpush-js-sdk/./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://@cleverpush/cleverpush-js-sdk/./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack://@cleverpush/cleverpush-js-sdk/./node_modules/@babel/runtime/helpers/esm/inherits.js","webpack://@cleverpush/cleverpush-js-sdk/./node_modules/@babel/runtime/helpers/esm/isNativeFunction.js","webpack://@cleverpush/cleverpush-js-sdk/./node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","webpack://@cleverpush/cleverpush-js-sdk/./node_modules/@babel/runtime/helpers/esm/iterableToArray.js","webpack://@cleverpush/cleverpush-js-sdk/./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack://@cleverpush/cleverpush-js-sdk/./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack://@cleverpush/cleverpush-js-sdk/./node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","webpack://@cleverpush/cleverpush-js-sdk/./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","webpack://@cleverpush/cleverpush-js-sdk/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@cleverpush/cleverpush-js-sdk/./node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack://@cleverpush/cleverpush-js-sdk/./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","webpack://@cleverpush/cleverpush-js-sdk/./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://@cleverpush/cleverpush-js-sdk/./node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","webpack://@cleverpush/cleverpush-js-sdk/./node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js","webpack://@cleverpush/cleverpush-js-sdk/./node_modules/@babel/runtime/regenerator/index.js","webpack://@cleverpush/cleverpush-js-sdk/./src/api.js","webpack://@cleverpush/cleverpush-js-sdk/./src/cleverpush.js","webpack://@cleverpush/cleverpush-js-sdk/./src/const/common.js","webpack://@cleverpush/cleverpush-js-sdk/./src/const/customCssOverrides.js","webpack://@cleverpush/cleverpush-js-sdk/./src/const/event.js","webpack://@cleverpush/cleverpush-js-sdk/./src/const/translation.js","webpack://@cleverpush/cleverpush-js-sdk/./src/error/CleverPushError.js","webpack://@cleverpush/cleverpush-js-sdk/./src/messenger/command.js","webpack://@cleverpush/cleverpush-js-sdk/./src/utils/adblock.js","webpack://@cleverpush/cleverpush-js-sdk/./src/utils/debug.js","webpack://@cleverpush/cleverpush-js-sdk/./src/utils/detect.js","webpack://@cleverpush/cleverpush-js-sdk/./src/utils/dom.js","webpack://@cleverpush/cleverpush-js-sdk/./src/utils/env.js","webpack://@cleverpush/cleverpush-js-sdk/./src/utils/followUp.js","webpack://@cleverpush/cleverpush-js-sdk/./src/utils/getApiEndpoint.js","webpack://@cleverpush/cleverpush-js-sdk/./src/utils/matchElementPathAndDomain.js","webpack://@cleverpush/cleverpush-js-sdk/./src/utils/piano.js","webpack://@cleverpush/cleverpush-js-sdk/./src/utils/polyfills.js","webpack://@cleverpush/cleverpush-js-sdk/./src/utils/randomTestVariant.js","webpack://@cleverpush/cleverpush-js-sdk/./src/utils/request.js","webpack://@cleverpush/cleverpush-js-sdk/./src/utils/tags.js","webpack://@cleverpush/cleverpush-js-sdk/./src/utils/translate.js","webpack://@cleverpush/cleverpush-js-sdk/./src/utils/triggerJourneysAndFollowUps.js","webpack://@cleverpush/cleverpush-js-sdk/./node_modules/loglevel/lib/loglevel.js","webpack://@cleverpush/cleverpush-js-sdk/./node_modules/promise-polyfill/src/finally.js","webpack://@cleverpush/cleverpush-js-sdk/./node_modules/promise-polyfill/src/index.js","webpack://@cleverpush/cleverpush-js-sdk/./node_modules/regenerator-runtime/runtime.js","webpack://@cleverpush/cleverpush-js-sdk/./node_modules/ua-parser-js/src/ua-parser.js","webpack://@cleverpush/cleverpush-js-sdk/./node_modules/wolfy87-eventemitter/EventEmitter.js","webpack://@cleverpush/cleverpush-js-sdk/./src/subscription|lazy|/^\\.\\/.*$/|groupOptions: {}|namespace object","webpack://@cleverpush/cleverpush-js-sdk/webpack/bootstrap","webpack://@cleverpush/cleverpush-js-sdk/webpack/runtime/create fake namespace object","webpack://@cleverpush/cleverpush-js-sdk/webpack/runtime/load script","webpack://@cleverpush/cleverpush-js-sdk/webpack/runtime/amd options","webpack://@cleverpush/cleverpush-js-sdk/webpack/runtime/compat get default export","webpack://@cleverpush/cleverpush-js-sdk/webpack/runtime/define property getters","webpack://@cleverpush/cleverpush-js-sdk/webpack/runtime/ensure chunk","webpack://@cleverpush/cleverpush-js-sdk/webpack/runtime/get javascript chunk filename","webpack://@cleverpush/cleverpush-js-sdk/webpack/runtime/get mini-css chunk filename","webpack://@cleverpush/cleverpush-js-sdk/webpack/runtime/hasOwnProperty shorthand","webpack://@cleverpush/cleverpush-js-sdk/webpack/runtime/make namespace object","webpack://@cleverpush/cleverpush-js-sdk/webpack/runtime/publicPath","webpack://@cleverpush/cleverpush-js-sdk/webpack/runtime/jsonp chunk loading","webpack://@cleverpush/cleverpush-js-sdk/./src/index.js"],"names":["_arrayLikeToArray","arr","len","length","i","arr2","Array","_arrayWithHoles","isArray","_arrayWithoutHoles","_assertThisInitialized","self","ReferenceError","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","this","args","arguments","apply","err","undefined","_classCallCheck","instance","Constructor","TypeError","_construct","Parent","Class","Reflect","construct","a","push","Function","bind","prototype","_defineProperties","target","props","descriptor","enumerable","configurable","writable","Object","defineProperty","_createClass","protoProps","staticProps","_defineProperty","obj","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","_inherits","subClass","superClass","create","constructor","_isNativeFunction","toString","call","indexOf","_isNativeReflectConstruct","sham","Proxy","Boolean","valueOf","e","_iterableToArray","iter","Symbol","iterator","from","_iterableToArrayLimit","_i","_s","_e","_arr","_n","_d","next","_nonIterableRest","_nonIterableSpread","_possibleConstructorReturn","_setPrototypeOf","p","_slicedToArray","_toConsumableArray","_typeof","_unsupportedIterableToArray","minLen","n","slice","name","test","_wrapNativeSuper","_cache","Map","has","get","set","Wrapper","module","exports","HTTP_METHODS","TRACK_EVENTS","CleverPushApi","channelId","originalChannelId","confirmAlertTestId","endpoint","getApiEndpoint","regionEnabled","id","method","path","data","options","logMethodCall","finalOptions","headers","Accept","authorizerToken","subscriptionToken","body","JSON","stringify","sdkVersion","VERSION","request","confirmAlertTestsEnabled","bypassCache","url","parser","UAParser","navigator","userAgent","platform","getOS","subscriptionId","tagId","payload","attributeId","campaignId","notificationId","parameters","fromNotification","bypassInactive","sendBeacon","blob","Blob","type","journeyId","eventId","properties","minutes","requestBody","widgetId","widgetTestId","widgetChannelId","params","browser","getBrowser","platformName","browserType","log","noPromise","browserVersionMain","version","split","platformVersionMain","browserVersion","platformVersion","pathname","location","sessionStorage","referrer","getItem","document","referralSubscriptionId","localStorage","visits","isNaN","wasDenied","ignored","language","detectLanguage","CleverPush","config","testSubscription","promises","geoipApiEndpoint","geoipPromise","mode","timeout","json","assign","catch","pianoEnabled","pianoPublicPersistedId","pianoPromise","getPianoUserData","segments","pianoSegments","subscription","topics","tags","optionalParams","getSyncParameters","paramsParam","parseInt","region","topicsVersion","topicsVersionStr","existingPermission","fromBellWidget","facebookUserRef","multiChannels","facebookChannel","_id","deviceToken","apnsToken","getKey","auth","publicKey","btoa","String","fromCharCode","Uint8Array","authSecret","reason","status","text","report","localStorageKey","reportMuteHours","confirmAlertLastReported","confirmAlertLastReportedInt","Date","now","setItem","window","trackOptInPathnames","trackOptInReferrers","walletPassId","event","bannerId","elementId","testId","shownWebBanners","parse","getBrowserName","MOBILE_SCROLL_POSITION_DELAY_VALUE","MOBILE_DELTA_VALUE","MOBILE_EXIT_INTENT_LOCATION_HASH","WEB_BANNER","WIDGET","OPT_INS","TIME_UNITS","MINUTES","HOUR","DAYS","SECONDS","BANNER_BEHAVIOUR_PER_SESSION","MILLISECOND_UNIT","ADDITIONAL_CONVERSION_EXPIRATIONS","unit","CLEVERPUSH_EXIT_INTENT_SHOWN","SESSION_BANNER_DISPLAY_KEY","convertMSToMinutes","ms","convertMinutesToMS","ADDITIONAL_CONVERSION_EXPIRATIONS_MINUTES","map","timeDuration","CONVERSIONS","filter","configParam","autoRegister","minimumVisits","alertMinimumVisits","scrollPercentage","alertScrollPercentage","alertTimeout","localizationTitle","alertLocalization","title","localizationInfo","radioButtonTopics","confirmAlertRadioButtonTopics","requireTopics","confirmAlertRequireChannelTopics","nativeTheme","confirmAlertNativeTheme","customCss","keys","forEach","keySub","substr","toLowerCase","serviceWorkerFile","facebookOptIn","setFacebookChannelConfig","importSubscriptionManager","configParams","isForTest","isDesktop","isMobile","isBot","isNotMobile","device","RegExp","matches","eval","hostname","search","utmParam","denyCount","KEY_DENY_COUNT","INT_RADIX","Number","children","matchedFilters","child","checkFilterConditions","applyConfirmAlertFilter","shownBanner","banner","show","matchElementPathAndDomain","visitsStr","visitsInt","finalizeShow","isTrue","choose","logic","showOnlySubscribers","subscriptionManager","isSubscribed","res","getTopics","_null","topicsLogic","topic","includes","excludeTopics","every","tag","hasTag","values","tagsLogic","excludeTags","attributes","attribute","hasAttribute","checkScroll","getScrollPercentage","removeEventListener","addEventListener","scrollPixels","getScrollPixels","optInRate","minimumOptInRate","minPercentToAlwaysShowNativeOptInDirectly","minPercentNecessaryToShowNativeOptInDirectly","chanceToDirectlyShowNativeOptIn","Math","pow","max","min","random","followUpCampaignId","eventName","eventParamsParam","eventParams","clickedFollowUpCampaignId","trigger","api","triggerFollowUpEvent","href","bypassInactiveFollowUps","waitForInit","waitForSubscription","getSubscriptionId","clickedJourneyId","triggerJourneyEvent","journeys","journey","elements","element","processJourneyElement","bell","initialized","initCalled","initFailed","initError","os","init","callbackParam","callback","successParam","success","warn","message","cleverPushInitCallback","Event","CleverPushError","POST_MESSAGE_ALLOWED_METHODS","loadConfigFromParent","apiEndpoint","env","cleverPushConfig","cleverpushConfig","initSubscriptionManager","importFile","protocol","parent","isPopup","isIframe","ownDomain","SubscriptionManager","default","isHost","loadConfigPromise","confirmAlertTests","confirmAlertAutoRegisterTest","find","bypassConfigCache","fetch","loadConfig","getChannelConfig","channelConfig","loadConfigUrl","loadIframe","trackSessions","webBanners","configLoaded","initWebpackPublicPath","enableRestrictOptInDomain","domain","channelName","isPopupUnsubscribe","facebookAppId","URLSearchParams","setConfirmAlertTestId","TRUE_STRING","urlSession","confirmAlertFilters","f","bounceEnabled","bounceFilters","source","supportsPushOrFbMessenger","catchError","compatibilityError","forceChannelId","setUrlSessionConfig","initHideUnsupported","facebookPageId","facebookCheckboxEnabled","isWebView","walletChannel","walletPasses","t","walletOptInDisabled","hideNotificationBellSubscribed","showConfirmAlert","facebookPage","facebookCheckboxOnlyUnsupported","facebookDoubleOptIn","supportsPush","safariWebsitePushId","checkConfirmAlertFilters","initBounces","domReady","initMultiPlatformWidgets","initChatWidget","desktopOnly","availableConfirmAlertTests","filters","testIndex","findIndex","tryTest","defaultPercent","tests","currentTest","percentage","randomNr","threshold","allow","alertLocalizationAllow","deny","alertLocalizationDeny","confirmInfo","alertLocalizationConfirmInfo","alertLocalizationTitle","alertLocalizationInfo","alertLocalizationTranslations","translation","translatedUrlFields","translatedUrlField","channelTopics","sort","b","initSdk","loadBell","showNotificationBell","hideNotificationBellMobile","importPromises","Confirm","bellResult","confirm","setConfirm","Bell","triggerOptIn","urlTriggeredPanelTab","validateUrlTriggerType","triggerBellClick","fullScreenOptIn","confirmAlertSelectTopicsLaterDisabled","confirmAlertSelectTopicsLater","isSafariMac","autoBalanceConfirmAlert","checkAutoBalanceShouldShowAlert","autoBalanceOptInRate","autoBalanceMinimumOptInRate","showConfirmAlertMobile","browserSubVersion","isSafari_12_1","isFirefox","isEdge","inEdgeUnblockVersionRange","silentPromptTutorialDisabled","displayUnblockTutorial","confirmAlertHideChannelTopics","customAttributes","attr","askAfterOptIn","confirmAlertSelectAttributesLater","confirmAlertDisabled","on","reset","hide","initGoogleAnalytics","subscribed","initWebBanners","initWidgets","initTagButtons","initTagSwitches","initTopicButtons","initPageBanners","initTags","initAttributes","initTopics","initConversions","initPiano","initTcf","initDuplicateSubscriptions","initSpeechbubblePanels","iframeMessenger","iframeSubscriptionId","initAutoUnsubscribeDuplicateSubscriptions","setSubscribed","lastSession","storageManager","getLastSession","checkEndSession","lastInteractionAt","startedAt","duration","round","getTime","endSession","getNotifications","notifications","lastNotificationId","startSession","setLastSession","node","createElement","innerHTML","customCssOverrides","appendChild","customJs","autoTriggerOptIn","exitIntentOptIn","ouibounce","aggressive","showExitIntent","shownStr","shownTime","exitIntentOncePerSession","isSubscribing","exitIntentForMobile","optInsConfig","initMobileExitIntentListeners","hash","scrollPercent","scrollTo","queryParams","importedSubscriptionId","subdomain","channelSubdomain","worker","workerScope","notification","Notification","permission","cX","getUserSegmentIds","persistedQueryId","redirect","cleverpushDomain","encodeURIComponent","registrationCount","serviceWorker","getRegistrations","registrations","registration","getServiceWorker","pushManager","getSubscription","scriptURL","prompt","alert","unsubscribe","sync","removeItem","existingText","keepText","successText","notSubscribed","tagSubscription","subscribe","showBackdrop","utilsTranslate","formatCleverPush","getTags","storedTags","untagSubscription","storedTopics","matchPath","notMatchPath","subscribedTopics","setClickedNotification","setNotificationRead","cleverPushVoucherCode","cleverPushVoucherPoolId","cleverPushVoucherPool","voucherPools","voucherPool","PageBanner","description","initNotificationId","initFollowUpCampaigns","initJourneys","trackNotificationSessions","trackSessionImpression","currentPathname","detectLocationIntervalEnabled","setInterval","webPushUnsupported","staticEndpoint","__webpack_public_path__","showSilentPromptTutorial","telegramChannel","trackConversionsWithoutSubscriptions","conversionTrackingKey","lastConversionTrackedAt","isLastCheckExpired","trackConversion","conversionDelayMs","conversionTrackingByMinutesKey","lastConversionByMinutesTrackedAt","facebookButtonOptIn","importType","filterType","setDenyStatus","storageManagerVisits","getVisits","optInTriggered","optIn","checkVisits","setTimeout","preventDuplicateOptIns","androidPackageName","getInstalledRelatedApps","relatedApps","foundApp","app","optInVisitorTracked","canSubscribe","trackOptInVisitor","alertOncePerSession","cmpReady","UC_UI_SUPPRESS_CMP_DISPLAY","UC_UI","isInitialized","__tcfapi","optInReady","retryCount","optInWaitForTcfDecision","tcfOptInFired","tcfOptIn","tcData","tcfRequireVendorConsent","tcfVendorId","vendor","consents","TCF_VERSION","vendorConsents","grants","vendorGrant","checkTcData","listenerId","tcString","eventStatus","tcfWaitForFunction","isTcfFunctionAllowed","tcfFunctionCompleted","TCF_MAX_RETRY_COUNT","TCF_RETRY_DELAY_MS","incrementVisits","disableConfirmAlertSearchTraffic","showConfirmAlertForce","statusDiv","getElementById","innerText","opener","close","history","back","domLoaded","appendConfirmBox","denyButton","style","display","confirmBox","querySelector","onbeforeunload","shownWidgets","storageKey","shownWidgetsStorage","shownWidgetsSessionStorage","concat","widgets","widget","autoAppendType","autoAppendPath","autoAppendSelector","widgetDiv","className","dataset","autoAppendPosition","insertBefore","firstChild","hasExitIntent","querySelectorAll","Widget","isWidgetAlreadyExist","some","getWidget","newWidget","widgetConfig","elementConfig","bypassExitIntent","enableRegularDisplayForMobile","isMessengerWidget","hasSharedWidgetChannels","exitIntent","initElementExitIntentListener","shouldShowBanner","isInViewport","trackShown","enterViewportListener","markElementAsShown","hideUnsupportedContainers","setProperty","multiPlatformWidgets","MultiPlatformWidget","tagButtons","TagButton","tagButton","tagCheckboxes","newTagCheckboxes","TagCheckbox","newTagCheckbox","topicButtons","TopicButton","topicButton","pageBanners","pageBannerNotifications","reduce","op","filteredNs","getNotification","dbNotification","filteredNotifications","pageBanner","scheduledAt","expiresAt","pageBannerMatchPath","pageBannerNotMatchPath","onClickCallback","addNotification","icon","iconUrl","media","mediaUrl","autoHide","createdAt","clicked","markedAsDelivered","pageBannerAdblockEnabled","detectAdblock","detected","pageBannerAdblockTitle","pageBannerAdblockText","pageBannerAdblockUrl","sessionKey","multipleBannersBehaviour","cleverpushChatLoaded","displayChatWidget","chatWidgetPath","script","src","head","bannerParam","currentBanner","bannerShown","WebBanner","getRandomTestVariant","webBanner","shownWebBannersStorage","previousClickBanner","shownWebBannersSessionStorage","banners","bannersWithSelectedBehaviour","startsAt","endsAt","setBannerSessionKey","displayElement","showWebBannerById","forceAppDownloadBanner","appDownloadBanner","enabled","androidId","androidEnabled","appleId","iosEnabled","isBannerShown","bannerSettings","settings","shouldShowAppDownloadBanner","forceHomeScreenBanner","homeScreenBanner","matchMedia","shouldShowHomeScreenBanner","webBannersDisabled","pendingWebBanners","elementExitIntentListener","disable","elementType","shownElement","elementHTML","shownElements","backButtonExitIntentAllowed","backButtonForMobileExitIntent","scrollingExitIntentAllowed","scrollingForMobileExitIntent","backButtonPressed","exitIntentTriggered","tryToShowBanner","displayDocument","optIns","checkMobileScrollingPosition","lastPosition","timer","delta","delay","clearMobileScrollPosition","newPosition","scrollY","clearTimeout","replaceState","pushState","frequency","sessions","frequencyInterval","splice","channelTags","checkTags","trackTagsOnlyWhenTopicEnabled","trackTagsOnlyWhenTopicEnabledIds","topicId","once","javascriptFunctionEnabled","javascriptFunction","result","setAttribute","SelectAttributes","selectAttributes","topicParam","optionsParam","currentTopic","frequencyCappingVisits","topicLayerShownKey","visitsStorageKey","currentVisits","TOPIC_LAYER_VISITS_DEFAULT","customLocalization","layerTitle","layerDenyText","layerAllowText","layerInfo","hasChildTopics","childTopic","parentTopic","layerTheme","confirmAlertSelectTopicsLaterTheme","waitForConfirmAvailable","topicsLayer","topicsRadioButtons","childTopicsRadioButtons","topicsRequired","childTopicsRequired","allowed","selectedTopics","setTopics","Set","topicFound","topicMatches","layerMatchPath","layerFunction","layerEnabled","triggerEvent","showTopicLayer","layerScrollPercentage","visitsNeeded","layerMinimumVisits","visitsStorage","layerTimeout","channelEvents","amountFunction","amount","triggerType","triggerPath","triggerPathAndQuery","triggerFunction","triggerSelector","triggerElements","triggerElementIndex","triggerElement","onPianoEnabledChange","tcfAutoUnsubscribe","duplicateChannels","initDuplicates","autoUnsubscribeDuplicateSubscriptions","specialLinks","notificationCount","KEY_UNREAD_NOTIFICATIONS_COUNT","KEY_SPEECHBUBBLE_UNREAD_NOTIFICATIONS","hasUnreadNotifications","unread","link","existingCounter","parentNode","removeChild","classList","add","KEY_HAS_UNREAD_NOTIFICATIONS","appendCounterElement","remove","console","count","counterEl","updateSpeechbubblePanelUnread","preventDefault","showSpeechbubbleInlinePanel","contains","userIsSubscribed","hasNotificationsStoredInBrowserDb","getDeliveredNotifications","getRemoteNotifications","getStoredNotifications","checkUnreadNotifications","Error","specialLink","panel","showSpeechbubblePanel","Panel","safari","pushNotification","Command","reply","remoteNotificationPermission","item","functionName","shift","resolveId","retry","firstArg","secondArg","forceSubscribe","successCallback","getNotificationPermission","notificationPermission","top","setAutoHideBackdrop","isAndroid","subCallback","hideBackdrop","showDenyAlert","detectPrompt","setShowBackdrop","backdrop","noExistingPermissionOptIns","confirmAlertShown","notManuallyParam","stack","notManually","initialTags","tagDate","getTagDate","setTags","attributeValue","topicIds","valueParam","sendToApi","alradyExists","setSubscriptionAttribute","saveToStorage","alreadyExists","waitForConfigAvailable","attributesWithoutSubscriptionEnabled","incParam","inc","storageStr","array","alreadySet","force","pushSubscriptionAttributeValue","pullSubscriptionAttributeValue","toUpperCase","getConsoleStyle","isBrowser","emit","onClick","bounceUrl","bounceDevice","hashParams","decodeURIComponent","replace","exception","initBounce","endsWith","fromSeo","bounceFilter","should","matchQuery","query","performance","navigation","TYPE_BACK_FORWARD","bounced","setupBounce","bounceParams","trackBounce","initialUrl","cleverpushBounce","readyState","notificationLastInteraction","followUpCampaigns","campaign","prepareJourneyOrFollowUpTriggers","shopifyCartAbandonmentFollowUpCampaignId","addToCartButtons","addToCartButtonIndex","addToCartButton","documentElement","epagesCartAbandonmentFollowUpCampaignId","currency","trackEvent","conversionEventId","conversionEvents","isVisible","tryEvent","conversionTrackingProps","handleConversionTracking","isSpecificBannerVisible","specificBanner","trackWebBannerEvent","handleLegacyConversion","delayMinutes","handleAdditionalConversionTrack","getClickedNotification","clickedNotificationId","notif","additionalDelayToCheck","trackConversionsWithoutFrequencyCapping","generateWalletPass","googleAnalyticsDimensionIndex","ga","gtag","event_category","event_label","PANEL_TABS","EventEmitter","ZERO_STRING","FOLLOW_UP_PARENT_ELEMENTS_CHECK","WHITESPACE_REGEX","SPACE_CHARACTER","CSS_SELECTOR_SEPARATOR","DAY","HOURS","DEFAULT_LANGUAGE","KEY_SUBSCRIPTION_STATUS","KEY_FORCED_OPT_IN_RESET_AT","freeze","NOTIFICATIONS","SETTINGS","SUBSCRIPTION_STATUS","DENIED","WAS_DENIED","UNSUBSCRIBED","PENDING","ALLOWED","en","privacy","de","captureStackTrace","adsBlocked","adBlockEnabled","testAd","offsetHeight","originalLoggerFactory","loglevel","getEnv","methodName","debug","join","methodFactory","logLevel","loggerName","rawMethod","setLevel","getLevel","showSilentAlert","safariBlurChecker","hasFocus","showBackdropSubscribe","subscribeInProgress","cancelBlurTimeout","blurCheckerFired","checkForBlur","storage","estimate","quota","onReady","attachEvent","createNode","htmlStr","frag","createDocumentFragment","temp","fadeIn","el","opacity","last","tick","newOpacity","requestAnimationFrame","fadeOut","elParam","offsetTop","left","offsetLeft","width","offsetWidth","height","offsetParent","pageYOffset","innerHeight","pageXOffset","innerWidth","getPercentOfView","viewTop","rect","getBoundingClientRect","elementTop","elementBottom","SERVICE_WORKER","HOST","POPUP","IFRAME","getDevice","browserVersionSplit","browserName","BROWSER_TYPES","NOTIFICATION_ACCESS_TYPES","GRANT","SILENT","isChromeOrChromium","isNewerEdge","origin","WorkerLocation","h","st","sh","clientHeight","supportsPushApi","supported","off","webkitRequestFileSystem","db","indexedDB","open","onerror","onsuccess","HTMLElement","openDatabase","x","cookieEnabled","testLocalStorage","PointerEvent","MSPointerEvent","isPrivate","ServiceWorkerRegistration","ReactNativeWebView","TagNames","getFollowUpVariableFromElement","variableName","skipHrefAnkerTag","tagName","zoom","imageSource","startsWith","content","textContent","trim","ENVIRONMENTS","CLEVERPUSH_API_ENDPOINTS","DEVELOPMENT","PRODUCTION","STAGE","ENVIRONMENT","triggerPathSplit","triggers","triggerParams","currentParams","paramValue","ignoreTrafficPercentage","matchDomain","host","matchFunction","trafficPercentage","pianoChangeListeners","getPianoService","getTCFVendors","vendorList","vendorListSuccess","vendors","pianoVendor","consent","pianoService","pianoEnabledNew","listener","resolved","pianoTimeout","race","timeoutResolve","enabledChangeResolve","callQueue","userId","getPianoSegmentsHash","segmentsString","msgUint8","TextEncoder","encode","crypto","subtle","digest","hashBuffer","hashArray","hashHex","padStart","predicate","thisArg","k","kValue","doc","testsEnabled","randomIndex","floor","parseJSON","response","ok","_","fetchWithTimeout","autoAssignTagMatches","autoAssignPath","autoAssignFunction","autoAssignSelector","autoAssignCheckInterval","interval","clearInterval","triggerElems","triggerElemIndex","triggerElem","dateAfter","autoAssignVisits","autoAssignSessionVisits","dateKey","toISOString","autoAssignDays","setDate","getDate","dailyVisits","curDateKey","sessionsNeeded","autoAssignSessions","sessionsStorageKey","sessionsCountedStorageKey","sessionsStr","dailySessions","autoAssignSeconds","DEFAULT_LANG","enableTranslationLanguageFromHTML","lang","substring","locale","userLanguage","charsetEscape","newText","charset","characterSet","escapedText","escape","TextDecoder","decode","charCodeAt","translate","keyParam","charsetAlreadyEscaped","translations","trans","hasOwnProperty","formatted","isFollowUpCampaign","triggered","extraVariables","variables","triggerAutoVariables","variable","selectorType","selector","javascriptCode","tryElement","triggerEventName","articleElement","triggerArticleSelector","triggerArticleMinScroll","triggerArticleMaxScroll","setupSelector","productId","cancelType","cancelSelector","cancelFunction","cancelPath","root","definition","noop","undefinedType","logMethods","bindMethod","realMethod","replaceLoggingMethods","level","enableLoggingWhenConsoleArrives","defaultMethodFactory","Logger","defaultLevel","factory","currentLevel","persistLevelIfPossible","levelNum","levelName","ignore","cookie","getPersistedLevel","storedLevel","exec","levels","persist","setDefaultLevel","enableAll","TRACE","disableAll","initialLevel","defaultLogger","_loggersByName","getLogger","logger","_log","noConflict","getLoggers","setTimeoutFunc","_state","_handled","_value","_deferreds","doResolve","handle","deferred","_immediateFn","cb","onFulfilled","onRejected","ret","promise","newValue","finale","_unhandledRejectionFn","Handler","ex","prom","all","remaining","val","setImmediate","runtime","Op","hasOwn","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","context","Context","_invoke","state","GenStateSuspendedStart","GenStateExecuting","GenStateCompleted","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","GenStateSuspendedYield","makeInvokeMethod","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","NativeIteratorPrototype","Gp","defineIteratorMethods","AsyncIterator","PromiseImpl","invoke","__await","unwrapped","previousPromise","callInvokeWithMethodAndArg","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","iterable","iteratorMethod","displayName","isGeneratorFunction","genFun","ctor","mark","awrap","async","object","reverse","pop","skipTempReset","prev","charAt","stop","rootRecord","rval","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","globalThis","FUNC_TYPE","UNDEF_TYPE","OBJ_TYPE","STR_TYPE","MAJOR","MODEL","NAME","TYPE","VENDOR","ARCHITECTURE","CONSOLE","MOBILE","TABLET","SMARTTV","WEARABLE","EMBEDDED","AMAZON","APPLE","ASUS","BLACKBERRY","FIREFOX","GOOGLE","HUAWEI","LG","MICROSOFT","MOTOROLA","OPERA","SAMSUNG","SHARP","SONY","XIAOMI","ZEBRA","FACEBOOK","CHROMIUM_OS","MAC_OS","enumerize","enums","str1","str2","lowerize","str","rgxMapper","ua","arrays","j","q","match","regex","strMapper","windowsVersionMap","regexes","CHROME","cpu","engine","EDGE","extensions","getResult","_navigator","_ua","_uach","userAgentData","_rgxmap","mergedRegexes","extend","_isSelfNav","_browser","brave","isBrave","getCPU","_cpu","_device","mobile","standalone","maxTouchPoints","getEngine","_engine","_os","getUA","setUA","BROWSER","CPU","DEVICE","ENGINE","OS","$","jQuery","Zepto","prop","proto","originalGlobalValue","indexOfListener","listeners","alias","isValidListener","getListeners","evt","events","_getEvents","flattenListeners","flatListeners","getListenersAsObject","addListener","listenerIsWrapped","addOnceListener","defineEvent","defineEvents","evts","removeListener","index","addListeners","manipulateListeners","removeListeners","single","multiple","removeEvent","_events","removeAllListeners","emitEvent","listenersMap","_getOnceReturnValue","setOnceReturnValue","_onceReturnValue","webpackAsyncContext","req","__webpack_require__","code","ids","__webpack_module_cache__","leafPrototypes","inProgress","dataWebpackPrefix","moduleId","cachedModule","__webpack_modules__","m","amdO","getter","__esModule","d","ns","r","def","current","getOwnPropertyNames","chunkId","u","miniCssF","l","needAttach","scripts","getElementsByTagName","s","getAttribute","nc","onScriptComplete","onload","doneFns","baseURI","installedChunks","installedChunkData","errorType","realSrc","webpackJsonpCallback","parentChunkLoadingFunction","chunkIds","moreModules","chunkLoadingGlobal","predefinedFunctionCalls","__cleverPushSdkLoadCount","executeFunction"],"mappings":"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","file":"cleverpush.js","sourcesContent":["export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nexport default function _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    _construct = Reflect.construct;\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","export default function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}","export default function _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import _typeof from \"./typeof.js\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n\n  return assertThisInitialized(self);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeFunction from \"./isNativeFunction.js\";\nimport construct from \"./construct.js\";\nexport default function _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}","module.exports = require(\"regenerator-runtime\");\n","import UAParser from 'ua-parser-js';\nimport Promise from 'promise-polyfill';\n\nimport { log, logMethodCall } from './utils/debug';\nimport request from './utils/request';\nimport { getPianoUserData } from './utils/piano';\nimport { detectLanguage } from './utils/translate';\nimport { getApiEndpoint } from './utils/getApiEndpoint';\nimport { getBrowserName } from './utils/env';\n\nconst SYNC_PARAMETERS_TIMEOUT = 3000;\nconst HTTP_METHODS = {\n  GET: 'GET',\n  POST: 'POST',\n};\n\nconst TRACK_EVENTS = {\n  CONVERSIONS: 'conversions',\n  DELIVERED: 'delivered',\n  CLICKED: 'clicked'\n};\n\nexport default class CleverPushApi {\n  constructor(channelId) {\n    this.channelId = channelId;\n    this.originalChannelId = channelId;\n    this.confirmAlertTestId = undefined;\n    this.endpoint = getApiEndpoint();\n    this.regionEnabled = false;\n  }\n\n  setConfirmAlertTestId(id) {\n    this.confirmAlertTestId = id;\n  }\n\n  request(method, path, data, options = {}) {\n    logMethodCall('request', method, path, data);\n\n    const finalOptions = {\n      method: HTTP_METHODS.GET,\n      headers: {\n        Accept: 'application/json',\n      },\n      ...options,\n    };\n    if (method) {\n      finalOptions.method = method;\n    }\n    if (data) {\n      if (this.authorizerToken) {\n        data.subscriptionToken = this.authorizerToken;\n      }\n      finalOptions.body = JSON.stringify({ sdkVersion: typeof VERSION !== 'undefined' ? VERSION : undefined, ...data });\n      finalOptions.headers['Content-Type'] = 'application/json';\n    }\n\n    return request(this.endpoint + path, finalOptions);\n  }\n\n  getChannelConfig(confirmAlertTestsEnabled = false, bypassCache = false) {\n    let url = `/channel/${this.channelId}/config`;\n    if (confirmAlertTestsEnabled) {\n      url += '?confirmAlertTestsEnabled=true';\n\n      const parser = new UAParser(navigator.userAgent);\n      const platform = parser.getOS();\n      if (platform.name) {\n        url += `&platformName=${platform.name}`;\n      }\n    }\n\n    if (bypassCache) {\n      url += '?bypassCache=true';\n    }\n\n    return this.request(HTTP_METHODS.GET, url, null);\n  }\n\n  tagSubscription(subscriptionId, tagId) {\n    const payload = {\n      channelId: this.channelId,\n      tagId,\n      subscriptionId\n    };\n    return this.request(HTTP_METHODS.POST, '/subscription/tag', payload);\n  }\n\n  untagSubscription(subscriptionId, tagId) {\n    const payload = {\n      channelId: this.channelId,\n      tagId,\n      subscriptionId\n    };\n    return this.request(HTTP_METHODS.POST, '/subscription/untag', payload);\n  }\n\n  setSubscriptionAttribute(subscriptionId, attributeId, value) {\n    const payload = {\n      channelId: this.channelId,\n      attributeId,\n      value,\n      subscriptionId\n    };\n    return this.request(HTTP_METHODS.POST, '/subscription/attribute', payload);\n  }\n\n  pushSubscriptionAttributeValue(subscriptionId, attributeId, value) {\n    const payload = {\n      channelId: this.channelId,\n      attributeId,\n      value,\n      subscriptionId\n    };\n    return this.request(HTTP_METHODS.POST, '/subscription/attribute/push-value', payload);\n  }\n\n  pullSubscriptionAttributeValue(subscriptionId, attributeId, value) {\n    const payload = {\n      channelId: this.channelId,\n      attributeId,\n      value,\n      subscriptionId\n    };\n    return this.request(HTTP_METHODS.POST, '/subscription/attribute/pull-value', payload);\n  }\n\n  triggerFollowUpEvent(subscriptionId, campaignId, notificationId, name, parameters, fromNotification, bypassInactive) {\n    const data = {\n      channelId: this.channelId,\n      subscriptionId,\n      campaignId,\n      notificationId,\n      name,\n      parameters,\n      fromNotification,\n      bypassInactive\n    };\n\n    if (name === 'triggerArticleBounce' && typeof navigator.sendBeacon === 'function') {\n      const blob = new Blob([JSON.stringify(data)], { type: 'application/x-www-form-urlencoded' });\n      return navigator.sendBeacon(`${this.endpoint}/subscription/event`, blob);\n    }\n\n    return this.request(HTTP_METHODS.POST, '/subscription/event', data);\n  }\n\n  triggerJourneyEvent(subscriptionId, journeyId, notificationId, fromNotification, name, type, parameters) {\n    const data = {\n      channelId: this.channelId,\n      subscriptionId,\n      journeyId,\n      notificationId,\n      fromNotification,\n      type,\n      name,\n      parameters,\n    };\n\n    if (name === 'triggerArticleBounce' && typeof navigator.sendBeacon === 'function') {\n      const blob = new Blob([JSON.stringify(data)], { type: 'application/x-www-form-urlencoded' });\n      return navigator.sendBeacon(`${this.endpoint}/subscription/journey-event`, blob);\n    }\n\n    return this.request(HTTP_METHODS.POST, '/subscription/journey-event', data);\n  }\n\n  trackConversion(subscriptionId, notificationId, eventId, properties, minutes) {\n    const requestBody = {\n      channelId: this.channelId,\n      subscriptionId,\n      notificationId,\n      eventId,\n      properties,\n    };\n\n    if (typeof minutes !== 'undefined') {\n      requestBody.minutes = minutes;\n    }\n\n    return this.request(HTTP_METHODS.POST, '/subscription/conversion', requestBody);\n  }\n\n  trackWidget(widgetId, type, widgetTestId, platform) {\n    return this.request(HTTP_METHODS.POST, `/channel/${this.channelId}/widget/${type}`, {\n      widgetChannelId: this.channelId,\n      widgetId,\n      widgetTestId,\n      platform\n    });\n  }\n\n  trackPanel(notificationId, type) {\n    return this.request(HTTP_METHODS.POST, `/channel/${this.channelId}/panel/${type}`, {\n      channelId: this.channelId,\n      notificationId\n    });\n  }\n\n  trackBounce(params) {\n    const data = { channelId: this.channelId, ...params || {} };\n\n    const parser = new UAParser(navigator.userAgent);\n    const browser = parser.getBrowser();\n    const platform = parser.getOS();\n\n    data.platformName = platform.name || undefined;\n    data.browserType = browser.name || undefined;\n\n    if (typeof navigator.sendBeacon === 'function') {\n      try {\n        logMethodCall('sendBeacon', HTTP_METHODS.POST, `${this.endpoint}/notification/bounced`, data);\n      } catch(error){\n        log.error(error);\n      }\n\n      const blob = new Blob([JSON.stringify(data)], { type: 'application/x-www-form-urlencoded' });\n      return navigator.sendBeacon(`${this.endpoint}/notification/bounced`, blob);\n    }\n\n    return this.request(HTTP_METHODS.POST, '/notification/bounced', data);\n  }\n\n  getSyncParameters(noPromise) {\n    logMethodCall('getSyncParameters');\n\n    const parser = new UAParser(navigator.userAgent);\n    const browser = parser.getBrowser();\n    const platform = parser.getOS();\n\n    const browserVersionMain = (browser.version || '').split('.')[0];\n    const platformVersionMain = (platform.version || '').split('.')[0];\n\n    let params = {\n      channelId: this.channelId,\n      browserType: browser.name || undefined,\n      browserVersion: browserVersionMain || browser.version || undefined,\n      platformName: platform.name || undefined,\n      platformVersion: platformVersionMain || platform.version || undefined\n    };\n\n    const pathname = location.pathname;\n    if (pathname) {\n      params.pathname = pathname;\n    }\n\n    try {\n      if (typeof sessionStorage !== 'undefined') {\n        const referrer = sessionStorage.getItem('cleverpush-referrer') || document.referrer.split('?')[0];\n        if (referrer) {\n          params.referrer = referrer;\n        }\n\n        const referralSubscriptionId = sessionStorage.getItem('cleverpush-referral-subscription-id');\n        if (referralSubscriptionId) {\n          params.referralSubscriptionId = referralSubscriptionId;\n        }\n      }\n\n      if (typeof localStorage !== 'undefined') {\n        const visits = localStorage.getItem('cleverpush-visits') || 0;\n        if (!isNaN(visits)) {\n          params.visits = `${visits}`;\n        }\n\n        if (localStorage.getItem('subscription-status') === 'was-denied' || localStorage.getItem('subscription-status') === 'denied') {\n          params.wasDenied = true;\n        }\n      }\n    } catch (ignored) { }\n\n    const language = detectLanguage(self?.CleverPush?.config);\n    if (language) {\n      params.language = language;\n    }\n\n    if (this.confirmAlertTestId) {\n      params.confirmAlertTestId = this.confirmAlertTestId;\n    }\n\n    if (this.testSubscription) {\n      params.testSubscription = this.testSubscription;\n    }\n\n    if (typeof noPromise !== 'undefined' && noPromise) {\n      return params;\n    }\n\n    const promises = [];\n\n    if (self.CleverPush?.config?.geoipApiEndpoint) {\n      const geoipPromise = new Promise((resolve) => {\n        request(self.CleverPush?.config?.geoipApiEndpoint, {\n          mode: 'cors',\n          timeout: SYNC_PARAMETERS_TIMEOUT\n        }).then((json) => {\n          params = Object.assign(params, json);\n          resolve();\n        }).catch((err) => {\n          log.error(err);\n          resolve();\n        });\n      });\n      promises.push(geoipPromise);\n    }\n\n    if (\n      self.CleverPush\n      && self.CleverPush.config\n      && self.CleverPush.config.pianoEnabled\n      && self.CleverPush.config.pianoPublicPersistedId\n    ) {\n      try {\n        const pianoPromise = new Promise((resolve) => {\n          getPianoUserData().then(({ segments }) => {\n            params.pianoSegments = segments;\n            resolve();\n          }).catch(resolve);\n        });\n        promises.push(pianoPromise);\n      } catch (error) {\n        log.info('Error getting Piano Segments', error);\n      }\n    }\n\n    return Promise.all(promises).then(() => Promise.resolve(params));\n  }\n\n  syncSubscription(subscription, topics, tags, optionalParams) {\n    logMethodCall('syncSubscription', subscription, topics);\n\n    if (!subscription) {\n      return Promise.reject();\n    }\n\n    let params = typeof optionalParams === 'object' ? optionalParams : {};\n\n    return this.getSyncParameters().then((paramsParam) => {\n      params = Object.assign(params, paramsParam);\n      const browserVersionMain = parseInt(params.browserVersion, 10);\n\n      if (!this.regionEnabled) {\n        delete params.region;\n      }\n\n      if (typeof topics === 'object' && topics && !isNaN(topics.length)) {\n        let topicsVersion = 0;\n        try {\n          const topicsVersionStr = localStorage.getItem('cleverpush-topics-version');\n          if (topicsVersionStr && !isNaN(topicsVersionStr)) {\n            topicsVersion = parseInt(topicsVersionStr, 10);\n          }\n        } catch (ignored) { }\n        topicsVersion += 1;\n\n        params.topics = topics;\n        params.topicsVersion = topicsVersion;\n      }\n      if (typeof tags === 'object' && tags && tags.length) {\n        params.tags = tags;\n      }\n\n      if (params.existingPermission) {\n        // do not track existing permissions in confirm alert tests\n        delete params.confirmAlertTestId;\n      }\n\n      if (this.fromBellWidget) {\n        params.fromBellWidget = this.fromBellWidget;\n      }\n\n      if (this.widgetId) {\n        params.widgetId = this.widgetId;\n        params.widgetChannelId = this.widgetChannelId || params.channelId;\n      }\n\n      if (this.widgetTestId) {\n        params.widgetTestId = this.widgetTestId;\n      }\n\n      if (subscription.facebookUserRef) {\n        params.facebookUserRef = subscription.facebookUserRef;\n\n        if (typeof self !== 'undefined' && self.CleverPush && self.CleverPush.config && self.CleverPush.config.multiChannels && self.CleverPush.config.multiChannels.facebookChannel._id !== params.channelId) {\n          params.channelId = self.CleverPush.config.multiChannels.facebookChannel._id;\n        }\n      }\n\n      if (params.browserType === 'Safari' && typeof subscription === 'object' && subscription.deviceToken) {\n        // sync with APN token\n        params.apnsToken = subscription.deviceToken;\n      } else if (typeof subscription === 'string') {\n        // sync with subscriptionId\n        params.subscriptionId = subscription;\n      } else if (params.browserType === 'Chrome' && browserVersionMain >= 42 && browserVersionMain < 50) {\n        // without encryption (old GCM)\n        params.endpoint = subscription.endpoint;\n      } else {\n        // with encryption\n        params.endpoint = subscription.endpoint;\n\n        if (typeof subscription.getKey !== 'undefined') {\n          const key = subscription.getKey ? subscription.getKey('p256dh') : null;\n          let auth = null;\n          if (params.browserType !== 'Firefox' || (params.browserType === 'Firefox' && browserVersionMain >= 46)) {\n            auth = subscription.getKey ? subscription.getKey('auth') : null;\n          }\n          if (key) {\n            params.publicKey = btoa(String.fromCharCode.apply(null, new Uint8Array(key)));\n          }\n          if (auth) {\n            params.authSecret = btoa(String.fromCharCode.apply(null, new Uint8Array(auth)));\n          }\n        }\n      }\n\n      return new Promise((resolve, reject) => this.request(HTTP_METHODS.POST, `/subscription/sync/${this.channelId}`, params)\n        .then((json) => {\n          if (json && json.id) {\n            resolve(json);\n          } else if (json && json.error) {\n            reject(json.error);\n          } else {\n            reject();\n          }\n        }).catch((err) => {\n          if (err.reason) {\n            reject(err.reason);\n          } else if (err.status) {\n            reject(err.status);\n          } else {\n            reject(err);\n          }\n        }));\n    });\n  }\n\n  unsubscribe(subscriptionId) {\n    return new Promise((resolve) => {\n      this.request(HTTP_METHODS.POST, '/subscription/unsubscribe', {\n        subscriptionId,\n        channelId: this.channelId\n      }).then(resolve).catch(resolve);\n    });\n  }\n\n  unsubscribeFeedback(type, text = '') {\n    return new Promise((resolve) => {\n      this.request(HTTP_METHODS.POST, '/subscription/unsubscribe/feedback', {\n        type,\n        text,\n        channelId: this.channelId\n      }).then(resolve).catch(resolve);\n    });\n  }\n\n  startSession(subscriptionId, data) {\n    return new Promise((resolve) => {\n      this.request(HTTP_METHODS.POST, '/subscription/session/start', {\n        subscriptionId,\n        channelId: this.channelId,\n        ...data || {}\n      }).then(resolve).catch(resolve);\n    });\n  }\n\n  endSession(subscriptionId, options) {\n    const blob = new Blob([JSON.stringify({ subscriptionId, channelId: this.channelId, ...options })], { type: 'application/x-www-form-urlencoded' });\n    return navigator.sendBeacon(`${this.endpoint}/subscription/session/end`, blob);\n  }\n\n  trackSessionImpression(subscriptionId, notificationId) {\n    return new Promise((resolve) => {\n      this.request(HTTP_METHODS.POST, '/subscription/session/impression', {\n        subscriptionId,\n        notificationId,\n        channelId: this.channelId\n      }).then(resolve).catch(resolve);\n    });\n  }\n\n  confirmAlertShown(existingPermission, type = 'confirm-alert') {\n    let report = true;\n    const localStorageKey = `cleverpush-${type}-reported`;\n    const reportMuteHours = 2;\n\n    const confirmAlertLastReported = sessionStorage.getItem(localStorageKey);\n    if (confirmAlertLastReported) {\n      const confirmAlertLastReportedInt = parseInt(confirmAlertLastReported, 10);\n      if (!isNaN(confirmAlertLastReportedInt)) {\n        report = (confirmAlertLastReportedInt + (1000 * 60 * 60 * reportMuteHours)) < Date.now();\n      }\n    }\n\n    if (report) {\n      sessionStorage.setItem(localStorageKey, Date.now());\n\n      const data = {\n        channelId: this.channelId,\n        confirmAlertTestId: this.confirmAlertTestId\n      };\n\n      const parser = new UAParser(navigator.userAgent);\n      const browser = parser.getBrowser();\n      const platform = parser.getOS();\n\n      data.platformName = platform.name || undefined;\n      data.browserType = browser.name || undefined;\n\n      if (typeof existingPermission !== 'undefined' && existingPermission) {\n        data.existingPermission = true;\n        // do not track existing permissions in confirm alert tests\n        delete data.confirmAlertTestId;\n      }\n\n      if (typeof window !== 'undefined' && window.CleverPush && window.CleverPush.config.trackOptInPathnames) {\n        const pathname = location.pathname;\n        if (pathname) {\n          data.pathname = pathname;\n        }\n      }\n\n      if (this.widgetId) {\n        data.widgetId = this.widgetId;\n      }\n\n      if (typeof window !== 'undefined' && window.CleverPush && window.CleverPush.config.trackOptInReferrers) {\n        try {\n          if (typeof sessionStorage !== 'undefined') {\n            const referrer = sessionStorage.getItem('cleverpush-referrer') || document.referrer.split('?')[0];\n            if (referrer) {\n              data.referrer = referrer;\n            }\n          }\n        } catch (ignored) { }\n      }\n\n      if (typeof localStorage !== 'undefined' && (localStorage.getItem('subscription-status') === 'was-denied' || localStorage.getItem('subscription-status') === 'denied')) {\n        data.wasDenied = true;\n      }\n\n      return this.request(HTTP_METHODS.POST, `/channel/${type}`, data);\n    }\n    return Promise.resolve();\n  }\n\n  trackOptInVisitor() {\n    const params = {\n      channelId: this.channelId,\n      confirmAlertTestId: this.confirmAlertTestId\n    };\n\n    if (this.widgetId) {\n      params.widgetId = this.widgetId;\n    }\n\n    return this.request(HTTP_METHODS.POST, '/channel/optin-visitor', params);\n  }\n\n  confirmAlertDenied() {\n    const params = {\n      channelId: this.channelId,\n      confirmAlertTestId: this.confirmAlertTestId\n    };\n\n    if (this.widgetId) {\n      params.widgetId = this.widgetId;\n    }\n\n    if (params.existingPermission) {\n      // do not track existing permissions in confirm alert tests\n      delete params.confirmAlertTestId;\n    }\n\n    return this.request(HTTP_METHODS.POST, '/channel/blocked-optin-request', params);\n  }\n\n  generateWalletPass(walletPassId, options) {\n    return new Promise((resolve, reject) => {\n      this.request(HTTP_METHODS.POST, `/channel/${this.channelId}/wallet-pass/${walletPassId}/subscribe`, { walletPassId, ...options }).then(resolve).catch(reject);\n    });\n  }\n\n  trackWebBannerEvent(event, bannerId, elementId, testId) {\n    const path = `/web-banner/event/${event}`;\n    const data = {\n      bannerId,\n      elementId,\n      testId,\n      channelId: this.channelId\n    };\n\n    if (event === TRACK_EVENTS.CONVERSIONS) {\n      const shownWebBanners = JSON.parse(sessionStorage.getItem('cleverpush-shown-web-banners')) || {};\n      data.shownWebBanners = shownWebBanners;\n    }\n\n    if (event === TRACK_EVENTS.DELIVERED || event === TRACK_EVENTS.CLICKED) {\n      data.browser = getBrowserName();\n    }\n\n    if (typeof navigator.sendBeacon === 'function') {\n      const blob = new Blob([JSON.stringify(data)], { type: 'application/x-www-form-urlencoded' });\n      return navigator.sendBeacon(`${this.endpoint}${path}`, blob);\n    }\n\n    return this.request(HTTP_METHODS.POST, path, data);\n  }\n\n  trackAppDownloadBannerEvent(event) {\n    const path = `/app-download-banner/event/${event}`;\n    const data = { channelId: this.originalChannelId || this.channelId };\n\n    if (typeof navigator.sendBeacon === 'function') {\n      const blob = new Blob([JSON.stringify(data)], { type: 'application/x-www-form-urlencoded' });\n      return navigator.sendBeacon(`${this.endpoint}${path}`, blob);\n    }\n\n    return this.request(HTTP_METHODS.POST, path, data);\n  }\n\n  getSocialFeedWidget(widgetId) {\n    const path = `/channel/${this.channelId}/social-feed-widget/${widgetId}`;\n    return this.request(HTTP_METHODS.GET, path);\n  }\n\n  getWidget(widgetId) {\n    const url = `/widgets/${widgetId}`;\n    return this.request(HTTP_METHODS.GET, url);\n  }\n}\n","/* eslint-disable no-restricted-syntax */\nimport EventEmitter from 'wolfy87-eventemitter';\nimport Promise from 'promise-polyfill';\n\nimport './utils/polyfills';\nimport { log, logMethodCall, getConsoleStyle } from './utils/debug';\nimport {\n  domReady, domLoaded, isInViewport\n} from './utils/dom';\nimport CleverPushApi from './api';\nimport Command from './messenger/command';\nimport request from './utils/request';\nimport { detectPrompt } from './utils/detect';\nimport { translate as utilsTranslate, detectLanguage } from './utils/translate';\nimport { checkTags } from './utils/tags';\nimport { onPianoEnabledChange } from './utils/piano';\nimport detectAdblock from './utils/adblock';\nimport customCssOverrides from './const/customCssOverrides';\nimport Event from './const/event';\nimport CleverPushError from './error/CleverPushError';\nimport {\n  browser,\n  os,\n  device,\n  browserVersion,\n  browserSubVersion,\n  isHost,\n  isPopup,\n  isPopupUnsubscribe,\n  isIframe,\n  isBrowser,\n  supportsPush,\n  getScrollPercentage,\n  getScrollPixels,\n  isAndroid,\n  isEdge,\n  isFirefox,\n  inEdgeUnblockVersionRange,\n  isWebView,\n} from './utils/env';\n\nimport {\n  INT_RADIX,\n  TRUE_STRING,\n  TOPIC_LAYER_VISITS_DEFAULT,\n  PANEL_TABS,\n  KEY_SPEECHBUBBLE_UNREAD_NOTIFICATIONS,\n  KEY_HAS_UNREAD_NOTIFICATIONS,\n  KEY_DENY_COUNT,\n  KEY_UNREAD_NOTIFICATIONS_COUNT,\n  TCF_MAX_RETRY_COUNT,\n  TCF_RETRY_DELAY_MS,\n  TCF_VERSION,\n  POST_MESSAGE_ALLOWED_METHODS,\n} from './const/common';\nimport { matchElementPathAndDomain, triggerPathAndQuery } from './utils/matchElementPathAndDomain';\nimport { getRandomTestVariant } from './utils/randomTestVariant';\nimport { prepareJourneyOrFollowUpTriggers } from './utils/triggerJourneysAndFollowUps';\n\nconst MOBILE_SCROLL_POSITION_DELAY_VALUE = 50;\nconst MOBILE_DELTA_VALUE = -80;\nconst MOBILE_EXIT_INTENT_LOCATION_HASH = '#!/showMobileExitIntentPopup';\nconst WEB_BANNER = 'webBanner';\nconst WIDGET = 'widget';\nconst OPT_INS = 'optIns';\nconst TIME_UNITS = {\n  MINUTES: 'MINUTES',\n  HOUR: 'HOUR',\n  DAYS: 'DAYS',\n  SECONDS: 'SECONDS',\n};\nconst BANNER_BEHAVIOUR_PER_SESSION = 'perSession';\n\nconst MILLISECOND_UNIT = {\n  [TIME_UNITS.MINUTES]: 60 * 1000,\n  [TIME_UNITS.HOUR]: 60 * 60 * 1000,\n  [TIME_UNITS.DAYS]: 24 * 60 * 60 * 1000,\n  [TIME_UNITS.SECONDS]: 1000,\n};\n\nconst ADDITIONAL_CONVERSION_EXPIRATIONS = [\n  {\n    value: 24,\n    unit: TIME_UNITS.HOUR,\n  },\n  {\n    value: 7,\n    unit: TIME_UNITS.DAYS,\n  },\n  {\n    value: 30,\n    unit: TIME_UNITS.DAYS,\n  },\n];\n\nconst CLEVERPUSH_EXIT_INTENT_SHOWN = 'cleverpush-exit-intent-shown';\nconst SESSION_BANNER_DISPLAY_KEY = 'cleverpush-banner-shown-current-session';\n\nconst convertMSToMinutes = (ms) => ms / 60000;\nconst convertMinutesToMS = (minutes) => minutes * 60 * 1000;\n\nconst ADDITIONAL_CONVERSION_EXPIRATIONS_MINUTES = ADDITIONAL_CONVERSION_EXPIRATIONS.map((timeDuration) => convertMSToMinutes(timeDuration.value * MILLISECOND_UNIT[timeDuration.unit]));\nconst TRACK_EVENTS = {\n  CONVERSIONS: 'conversions'\n};\n\nexport default class CleverPush extends EventEmitter {\n  constructor() {\n    super();\n\n    this.bell = null;\n    this.config = {};\n    this.log = log;\n    this.initialized = false;\n    this.initCalled = false;\n    this.initFailed = false;\n    this.initError = null;\n    this.api = null;\n    this.subscriptionManager = null;\n    this.version = typeof VERSION !== 'undefined' ? VERSION : '';\n    this.isMobile = os.name === 'Android' || os.name === 'iOS' || device.type === 'mobile';\n  }\n\n  init(configParam, callbackParam) {\n    logMethodCall('init');\n    log.info('Browser:', browser.name, browserVersion);\n\n    const callback = (err, successParam) => {\n      const success = typeof successParam !== 'undefined' ? successParam : !err;\n\n      if (typeof callbackParam === 'function') {\n        callbackParam(err, success);\n      } else if (err) {\n        if (err.warn || (err.reason === 'unsupported-browser' || err.reason === 'private-mode' || err.reason === 'already-initialized' || err.reason === 'init-already-called')) {\n          log.warn(err.message);\n        } else {\n          log.error(err);\n        }\n      }\n\n      if (typeof window.cleverPushInitCallback === 'function') {\n        window.cleverPushInitCallback(err, success);\n      }\n\n      if (err) {\n        if (err.reason !== 'already-initialized' && err.reason !== 'init-already-called') {\n          this.initFailed = true;\n          this.initError = err;\n        }\n\n        this.trigger(Event.INITIALIZATION_FAILED);\n      } else {\n        this.initFailed = false;\n      }\n    };\n\n    if (this.initCalled) {\n      callback(new CleverPushError('Init was already called, please only call init() once.', 'init-already-called'), false);\n    } else {\n      this.initCalled = true;\n\n      // message listener for iframes\n      window.addEventListener('message', (event) => {\n        if (\n          event.data\n          && typeof event.data === 'object'\n          && event.data.type === 'cleverpush'\n          && event.data.method\n          && POST_MESSAGE_ALLOWED_METHODS.includes(event.data.method)\n          && event.data.arguments\n          && this[event.data.method]\n        ) {\n          this[event.data.method](...event.data.arguments);\n        }\n      });\n\n      if (typeof configParam !== 'object') {\n        callback(new CleverPushError('Required parameter `config` not given.', 'invalid-config'));\n      } else if (!configParam.channelId && !configParam.loadConfigFromParent) {\n        callback(new CleverPushError('Required attribute `channelId` in `config` not given.', 'invalid-config'));\n      } else if (this.initialized) {\n        callback(new CleverPushError('CleverPush SDK was already initialized.', 'already-initialized'));\n      } else {\n        this.api = new CleverPushApi(configParam.channelId);\n\n        if (configParam.apiEndpoint) {\n          this.api.endpoint = configParam.apiEndpoint;\n        }\n\n        if (!configParam.env && window.cleverPushConfig && window.cleverPushConfig.env) {\n          configParam.env = window.cleverPushConfig.env;\n        } else if (!configParam.env && window.cleverpushConfig && window.cleverpushConfig.env) {\n          configParam.env = window.cleverpushConfig.env;\n        }\n\n        const initSubscriptionManager = () => {\n          let protocol = window.location.protocol;\n          let hostname = window.location.hostname;\n          try {\n            protocol = window.parent.location.protocol;\n            hostname = window.parent.location.hostname;\n          } catch (error) {\n            log.info('error reading parent location', error);\n          }\n\n          let importFile;\n          if (this.browserType === 'safari') {\n            importFile = 'safariManager';\n          } else if (this.browserType === 'facebook') {\n            importFile = 'facebookManager';\n          } else if (this.browserType === 'wallet') {\n            importFile = 'walletManager';\n          } else if (this.browserType === 'urlSession') {\n            importFile = 'urlSessionManager';\n          } else if (isPopup(configParam) || configParam.env === 'POPUP') {\n            importFile = 'httpPopupManager';\n          } else if (isIframe(configParam)) {\n            importFile = 'httpIframeManager';\n          } else if (this.config.ownDomain && (protocol === 'https:' || hostname === 'localhost')) {\n            importFile = 'httpsManager';\n          } else {\n            importFile = 'httpHostManager';\n          }\n\n          return new Promise((resolve) => {\n            import(`./subscription/${importFile}`).then(({ default: SubscriptionManager }) => {\n              this.subscriptionManager = new SubscriptionManager(this.config, this.api, this.trigger.bind(this));\n              resolve();\n            });\n          });\n        };\n\n        if ((configParam.env !== 'POPUP' && isHost(configParam)) || configParam.env === 'PREVIEW' || configParam.env === 'WIDGET') {\n          const loadConfigPromise = new Promise((resolve, reject) => {\n            const confirmAlertTestsEnabled = configParam.confirmAlertTestsEnabled && configParam.confirmAlertTests?.length;\n            let confirmAlertAutoRegisterTest = false;\n            if (\n              confirmAlertTestsEnabled\n              && configParam.confirmAlertTests.length === 2\n              && configParam.confirmAlertTests.find((test) => (\n                typeof test.config?.autoRegister !== 'undefined' && test.config?.autoRegister !== configParam.autoRegister\n              ))\n            ) {\n              // for opt-in split tests which contain an \"autoRegister: false\" variant we do not want to load the confirm alert test ID dynamically from the API, because the test might get stuck with it.\n              confirmAlertAutoRegisterTest = true;\n            }\n\n            const bypassConfigCache = location.search?.includes('cleverPushWebBannerId=');\n            if (\n              typeof fetch !== 'undefined'\n              && (\n                typeof configParam.loadConfig === 'undefined'\n                || configParam.loadConfig\n                || (confirmAlertTestsEnabled && !confirmAlertAutoRegisterTest)\n                || bypassConfigCache\n              ) && configParam.env !== 'PREVIEW'\n            ) {\n              this.api.getChannelConfig(configParam.confirmAlertTestsEnabled, bypassConfigCache).then((channelConfig) => {\n                resolve(channelConfig);\n              }).catch(reject);\n            } else if (configParam.loadConfigUrl) {\n              request(configParam.loadConfigUrl).then((json) => {\n                if (json) {\n                  resolve(json);\n                } else {\n                  resolve({});\n                }\n              }).catch(reject);\n            } else {\n              resolve({});\n            }\n          });\n\n          if (configParam.apiEndpoint) {\n            this.api.endpoint = configParam.apiEndpoint;\n          }\n\n          loadConfigPromise.then((channelConfig) => {\n            this.config = {\n              autoRegister: true,\n              alertTimeout: 0,\n              alertMinimumVisits: 0,\n              loadIframe: true,\n              trackSessions: true,\n              ...channelConfig,\n              ...configParam,\n              webBanners: channelConfig.webBanners || configParam.webBanners,\n              confirmAlertTests: channelConfig.confirmAlertTests || configParam.confirmAlertTests,\n            };\n\n            this.configLoaded = true;\n            this.trigger(Event.CONFIG_AVAILABLE);\n\n            this.initWebpackPublicPath();\n\n            if (this.config.enableRestrictOptInDomain && this.config.domain) {\n              if (!this.config.domain.includes(location.hostname)) {\n                callback(new CleverPushError(`This channel has enabled Opt-in domain restrictions. (${location.hostname} is not included in allowed domains (${this.config.domain}))`, 'enableRestrictOptInDomain'));\n                return;\n              }\n            }\n\n            if (configParam.alertLocalization) {\n              // merge\n              this.config.alertLocalization = { ...channelConfig.alertLocalization, ...configParam.alertLocalization };\n            }\n\n            if (typeof this.config.channelId === 'undefined' || typeof this.config.channelName === 'undefined') {\n              callback(new CleverPushError('`channelId` or `channelName` not found in config.', 'invalid-config'));\n              return;\n            }\n\n            if (typeof self.cleverPushConfig === 'object') {\n              this.config = Object.assign(this.config, self.cleverPushConfig);\n            } else if (typeof self.cleverpushConfig === 'object') {\n              this.config = Object.assign(this.config, self.cleverpushConfig);\n            }\n\n            log.debug('Config:', this.config);\n\n            if (this.config.apiEndpoint) {\n              this.api.endpoint = this.config.apiEndpoint;\n            }\n            if (this.config.regionEnabled) {\n              this.api.regionEnabled = true;\n            }\n\n            if (isPopupUnsubscribe()) {\n              this.config.autoRegister = false;\n            }\n\n            if (!this.config.facebookAppId) {\n              this.config.facebookAppId = '436333683366106';\n            }\n\n            if (typeof URLSearchParams !== 'undefined' && location.search && location.search.length) {\n              const params = new URLSearchParams(location.search.slice(1));\n              if (params.get('confirmAlertTestId')) {\n                this.config.confirmAlertTestId = params.get('confirmAlertTestId');\n                this.api.setConfirmAlertTestId(this.config.confirmAlertTestId);\n              }\n\n              if (params.get('cpId')) {\n                try {\n                  sessionStorage.setItem('cleverpush-url-session', TRUE_STRING);\n                  sessionStorage.setItem('cleverpush-subscription-id', params.get('cpId'));\n                } catch (error) {\n                  log.warn('Error setting URL-session', error);\n                }\n              }\n            }\n\n            try {\n              if (sessionStorage.getItem('cleverpush-url-session')) {\n                this.urlSession = true;\n              }\n            } catch (error) {\n              log.info('Error getting url-session key from storage', error);\n            }\n\n            // only set cleverpush-referrer if really needed\n            try {\n              if (this.config.trackOptInReferrers || (this.config.confirmAlertFilters || []).find((f) => f.type === 'referrer') || (this.config.bounceEnabled && (this.config.bounceFilters || []).find((f) => f.source === 'direct'))) {\n                if (!sessionStorage.getItem('cleverpush-referrer') && document.referrer) {\n                  sessionStorage.setItem('cleverpush-referrer', document.referrer.split('?')[0]);\n                }\n              }\n              this.referrer = sessionStorage.getItem('cleverpush-referrer');\n            } catch (e) {\n              log.debug(e);\n            }\n\n            const supportsPushOrFbMessenger = () => new Promise((resolve, reject) => {\n              const catchError = (compatibilityError) => {\n                if (compatibilityError.reason !== 'unsupported-browser') {\n                  reject(compatibilityError);\n                  return;\n                }\n\n                if (\n                  this.urlSession\n                  && !configParam.forceChannelId\n                ) {\n                  this.setUrlSessionConfig(configParam);\n                  this.initHideUnsupported();\n                  resolve('urlSession');\n                  return;\n                }\n\n                if (\n                  this.config.facebookAppId\n                  && this.config.facebookPageId\n                  && this.config.facebookCheckboxEnabled\n                  && !isWebView()\n                ) {\n                  this.setFacebookChannelConfig(configParam);\n                  this.initHideUnsupported();\n                  resolve('facebook');\n                  return;\n                }\n\n                if (\n                  this.config.multiChannels\n                  && this.config.multiChannels.walletChannel\n                  && (\n                    (this.config.walletPasses || []).length\n                    || (\n                      this.config.confirmAlertTestsEnabled\n                      && this.config.confirmAlertTestId\n                      && (this.config.confirmAlertTests || []).find((t) => t.id === this.config.confirmAlertTestId && t.config && (t.config.walletPasses || []).length)\n                    )\n                  )\n                  && os.name === 'iOS'\n                  && !isWebView()\n                  && !this.config.walletOptInDisabled\n                ) {\n                  if (this.config.multiChannels && this.config.multiChannels.walletChannel && this.config.multiChannels.walletChannel._id !== this.config.channelId && !configParam.forceChannelId) {\n                    this.config.channelId = this.config.multiChannels.walletChannel._id;\n                    this.config.alertLocalization = { ...this.config.alertLocalization, ...this.config.multiChannels.walletChannel.alertLocalization };\n                    this.api.channelId = this.config.multiChannels.walletChannel._id;\n                  }\n\n                  this.config.hideNotificationBellSubscribed = true;\n\n                  this.config.showConfirmAlert = true;\n                  if (this.config.confirmAlertNativeTheme === 'cleverpush-confirm-backdrop-text') {\n                    this.config.confirmAlertNativeTheme = '';\n                  }\n\n                  resolve('wallet');\n                  return;\n                }\n\n                reject(compatibilityError);\n              };\n\n              if (this.urlSession) {\n                this.setUrlSessionConfig(configParam);\n                resolve('urlSession');\n                return;\n              }\n\n              if (this.config.multiChannels && this.config.multiChannels.facebookChannel && this.config.multiChannels.facebookChannel.facebookPage && !this.config.facebookPageId) {\n                this.config.facebookPageId = this.config.multiChannels.facebookChannel.facebookPage.id || this.config.multiChannels.facebookChannel.facebookPageId;\n                this.config.facebookCheckboxEnabled = this.config.multiChannels.facebookChannel.facebookCheckboxEnabled;\n                this.config.facebookCheckboxOnlyUnsupported = this.config.multiChannels.facebookChannel.facebookCheckboxOnlyUnsupported;\n                this.config.facebookDoubleOptIn = this.config.multiChannels.facebookChannel.facebookDoubleOptIn;\n              }\n\n              supportsPush().then((browserType) => {\n                if (this.config.facebookCheckboxOnlyUnsupported && this.config.facebookPageId) {\n                  this.config.facebookPageId = null;\n                }\n\n                if (browserType === 'safari' && !this.config.safariWebsitePushId) {\n                  catchError(new CleverPushError('Safari Web Push not set up', 'unsupported-browser'));\n                  return;\n                }\n                this.checkConfirmAlertFilters(configParam);\n\n                // this.browserType can be set by applyConfirmAlertFilters\n                resolve(this.browserType || browserType);\n              }).catch(catchError);\n            });\n\n            // init stuff which does not require push capabilities\n            this.initBounces();\n            domReady().then(() => {\n              this.initMultiPlatformWidgets();\n            });\n            this.initChatWidget();\n\n            supportsPushOrFbMessenger().then((browserType) => {\n              this.browserType = browserType;\n              this.config.browserType = browserType;\n\n              if (this.config.desktopOnly && (os.name === 'Android' || device.type === 'mobile')) {\n                return;\n              }\n\n              // opt-in split-testing\n              if (this.config.confirmAlertTestsEnabled && this.config.confirmAlertTests?.length > 0) {\n                const availableConfirmAlertTests = this.config.confirmAlertTests.filter((test) => {\n                  const hasConfirmAlertFilter = test.filters && test.filters.length > 0;\n                  if (!hasConfirmAlertFilter) {\n                    return true;\n                  }\n\n                  return (test.filters).every((filter) => this.checkFilterConditions(filter, {}, true));\n                });\n\n                let test;\n                if (this.config.confirmAlertTestId) {\n                  const testIndex = availableConfirmAlertTests.findIndex((tryTest) => (tryTest || {}).id === this.config.confirmAlertTestId);\n                  if (testIndex >= 0) {\n                    test = availableConfirmAlertTests[testIndex];\n                  }\n                }\n\n                if (!test) {\n                  const defaultPercent = 100 / availableConfirmAlertTests.length;\n\n                  const tests = availableConfirmAlertTests.map((currentTest) => ({ ...currentTest, percentage: currentTest.percentage || defaultPercent }));\n\n                  let i;\n                  const randomNr = Math.random();\n                  let threshold = 0;\n\n                  for (i = 0; i < tests.length; i += 1) {\n                    if (!tests[i].percentage) {\n                      continue;\n                    }\n\n                    threshold += (tests[i].percentage / 100);\n                    if (threshold > randomNr) {\n                      test = tests[i];\n                      break;\n                    }\n\n                    if (!test) {\n                      // nothing found based on probability value, so pick element marked with wildcard\n                      test = tests.filter((tryTest) => !tryTest.percentage);\n                    }\n                  }\n                }\n\n                if (test && test.config) {\n                  log.debug('Split-Test:', test);\n                  this.config = {\n                    ...this.config,\n                    ...test.config,\n                    confirmAlertTestId: test.id,\n                    customCss: (test.config.customCss || '') + (this.config.customCss ? this.config.customCss : ''),\n                    alertLocalization: { ...this.config.alertLocalization, ...test.config.alertLocalization || {} },\n                  };\n                  if (!test.alertLocalization) {\n                    if (!this.config.alertLocalization) {\n                      this.config.alertLocalization = {};\n                    }\n                    this.config.alertLocalization = {\n                      allow: test.config.alertLocalizationAllow || this.config.alertLocalization.allow,\n                      deny: test.config.alertLocalizationDeny || this.config.alertLocalization.deny,\n                      confirmInfo: test.config.alertLocalizationConfirmInfo || this.config.alertLocalization.confirmInfo,\n                      title: test.config.alertLocalizationTitle || this.config.alertLocalization.title,\n                      info: test.config.alertLocalizationInfo || this.config.alertLocalization.info\n                    };\n                  }\n                  this.api.setConfirmAlertTestId(this.config.confirmAlertTestId);\n                }\n              }\n\n              const language = detectLanguage(this.config || {});\n              if (this.config.alertLocalizationTranslations && language && this.config.alertLocalizationTranslations[language]) {\n                const translation = this.config.alertLocalizationTranslations[language];\n                const translatedUrlFields = ['privacyPolicyText', 'privacyPolicyUrl', 'faqText', 'faqUrl'];\n                for (const translatedUrlField of translatedUrlFields) {\n                  if (translation[translatedUrlField]) {\n                    this.config[translatedUrlField] = translation[translatedUrlField];\n                  }\n                }\n              }\n\n              // filter channel topics by path name\n              if (this.config.channelTopics && this.config.channelTopics.length) {\n                this.config.channelTopics = this.config.channelTopics.sort((a, b) => a.sort - b.sort);\n              }\n\n              const initSdk = () => {\n                Promise.all([\n                  this.waitForInit(),\n                  initSubscriptionManager(),\n                ]).then(() => {\n                  log.debug('Init done');\n                  const isMobile = os.name === 'Android' || os.name === 'iOS' || device.type === 'mobile';\n                  const loadBell = this.config.showNotificationBell && (!isMobile || !this.config.hideNotificationBellMobile);\n                  const importPromises = [import('./confirm')];\n                  if (loadBell) {\n                    importPromises.push(import('./bell'));\n                  }\n\n                  Promise.all(importPromises).then(([{ default: Confirm }, bellResult]) => {\n                    this.confirm = new Confirm(this, this.subscriptionManager);\n\n                    this.trigger(Event.CONFIRM_AVAILABLE);\n                    this.subscriptionManager.setConfirm(this.confirm);\n                    if (loadBell) {\n                      const { default: Bell } = bellResult;\n                      this.bell = new Bell(this.config, this.subscriptionManager, this.api, this.confirm, this.trigger.bind(this), this.triggerOptIn.bind(this));\n                    }\n\n                    this.config.urlTriggeredPanelTab = this.validateUrlTriggerType(location.search.split('?cleverPushPanelTab=')[1]);\n                    if (this.config.urlTriggeredPanelTab) {\n                      this.triggerBellClick();\n                    }\n\n                    // TODO: ALL browsers: show confirm alert when has no cookies but has push permission\n                    // this.config.showConfirmAlertResubscribe = true;\n\n                    // applies only to Android Chrome + Safari Mac right now\n                    const fullScreenOptIn = isMobile; // || os.name === 'Android' && (browser.name === 'Chrome' || browser.name === 'Firefox' || browser.name === 'Opera');\n\n                    // force topics after opt in\n                    if (\n                      fullScreenOptIn\n                      && this.config.channelTopics\n                      && this.config.channelTopics.length\n                      && !this.config.confirmAlertSelectTopicsLaterDisabled\n                    ) {\n                      this.config.confirmAlertSelectTopicsLater = true;\n                    }\n\n                    const isSafariMac = os.name === 'Mac OS' && browser.name === 'Safari';\n\n                    if (this.config.env !== 'PREVIEW') {\n                      if (\n                        this.config.autoBalanceConfirmAlert\n                      ) {\n                        this.config.showConfirmAlert = !this.checkAutoBalanceShouldShowAlert(this.config.autoBalanceOptInRate, this.config.autoBalanceMinimumOptInRate);\n                      }\n\n                      if (this.config.showConfirmAlertMobile && !this.config.confirmAlertSelectTopicsLater && fullScreenOptIn) {\n                        log.debug('showConfirmAlert = true 2');\n                        this.config.showConfirmAlert = true;\n                      }\n\n                      // Safari 12.1+: Push notification prompting can only be done from a user gesture. (https://github.com/wicg/interventions/issues/49#issuecomment-477122163)\n                      if (isSafariMac && (browserVersion > 12 || (browserVersion === 12 && browserSubVersion >= 1))) {\n                        log.debug('showConfirmAlert = true 3');\n                        this.config.showConfirmAlert = true;\n                        this.config.isSafari_12_1 = true;\n                      }\n\n                      // Firefox 72: Push notification prompting can only be done from a user gesture\n                      if (isFirefox() && browserVersion >= 72) {\n                        log.debug('showConfirmAlert = true 4');\n                        this.config.showConfirmAlert = true;\n                      }\n\n                      if (isEdge() && inEdgeUnblockVersionRange() && !this.config.silentPromptTutorialDisabled) {\n                        this.displayUnblockTutorial();\n                      }\n                    }\n\n                    if (\n                      !this.config.confirmAlertHideChannelTopics\n                      && !this.config.isSafari_12_1\n                      && (\n                        this.config.channelTopics || []).length\n                      && ((fullScreenOptIn\n                        && !this.config.showConfirmAlertMobile\n                      )\n                        || isSafariMac)\n                      && !this.config.confirmAlertSelectTopicsLaterDisabled\n                    ) {\n                      this.config.confirmAlertSelectTopicsLater = true;\n                    }\n\n                    if (this.config.customAttributes && this.config.customAttributes.length && this.config.customAttributes.filter((attr) => !!attr.askAfterOptIn).length) {\n                      this.config.confirmAlertSelectAttributesLater = true;\n                    }\n\n                    // only for special request users, will completely disable confirm alerts even if necessary\n                    if (this.config.confirmAlertDisabled && this.config.showConfirmAlert) {\n                      this.config.showConfirmAlert = false;\n                    }\n\n                    this.on(Event.SUBSCRIBED, (subscriptionId) => {\n                      log.info('SUBSCRIBED fired');\n\n                      if (this.bell) {\n                        this.bell.reset(true);\n                      }\n                      if (this.confirm) {\n                        this.confirm.hide();\n                      }\n\n                      // Google Analytics auto tracking\n                      this.initGoogleAnalytics(subscriptionId);\n                    });\n                    this.on(Event.UNSUBSCRIBED, () => {\n                      this.subscriptionManager.subscribed = false;\n                      if (this.bell) {\n                        this.bell.reset(false);\n                      }\n                    });\n                    this.initWebBanners();\n                    this.initWidgets();\n                    this.initTagButtons();\n                    this.initTagSwitches();\n                    this.initTopicButtons();\n                    this.initPageBanners();\n                    this.initTags();\n                    this.initAttributes();\n                    this.initTopics();\n                    this.initConversions();\n                    this.initPiano();\n                    this.initTcf();\n                    this.initDuplicateSubscriptions();\n                    this.initSpeechbubblePanels();\n\n                    // check subscription status + sync every 2 days\n                    this.subscriptionManager.isSubscribed().then((isSubscribed) => {\n                      if (this.bell) {\n                        this.bell.show(isSubscribed);\n                        this.trigger(Event.BELL_READY);\n                      }\n\n                      if (isSubscribed) {\n                        log.debug('main subscribed = true');\n                        this.subscriptionManager.subscribed = true;\n\n                        if (this.subscriptionManager.iframeMessenger) {\n                          this.subscriptionManager.getSubscriptionId().then((subscriptionId) => {\n                            this.subscriptionManager.iframeMessenger.getSubscriptionId().then((iframeSubscriptionId) => {\n                              this.initAutoUnsubscribeDuplicateSubscriptions(subscriptionId, iframeSubscriptionId);\n                              this.subscriptionManager.iframeMessenger.setSubscribed(subscriptionId);\n                            });\n                          });\n                        }\n\n                        this.subscriptionManager.getSubscriptionId().then((subscriptionId) => {\n                          this.initGoogleAnalytics(subscriptionId);\n                        });\n                      }\n                    });\n\n                    // send session start+end to API\n                    if (this.config.trackSessions) {\n                      try {\n                        this.waitForSubscription().then((subscriptionId) => {\n                          let lastSession = this.subscriptionManager.storageManager.getLastSession();\n\n                          const checkEndSession = () => {\n                            if (lastSession && lastSession.lastInteractionAt && lastSession.startedAt && new Date(lastSession.lastInteractionAt) < new Date(Date.now() - (60 * 60 * 30))) {\n                              let duration = Math.round((new Date(lastSession.lastInteractionAt).getTime() - new Date(lastSession.startedAt).getTime()) / 1000);\n                              if (duration > 60 * 60 * 30) {\n                                duration = 60 * 60 * 30;\n                              } else if (duration < 0) {\n                                duration = 0;\n                              }\n                              if (subscriptionId) {\n                                this.api.endSession(subscriptionId, {\n                                  duration,\n                                  visits: lastSession.visits\n                                });\n                              }\n\n                              lastSession = {};\n                            }\n                          };\n\n                          checkEndSession();\n\n                          if (!lastSession.startedAt || sessionStorage.getItem('cleverpush-session-counted') !== TRUE_STRING) {\n                            sessionStorage.setItem('cleverpush-session-counted', TRUE_STRING);\n\n                            this.subscriptionManager.storageManager.getNotifications(1).then((notifications) => {\n                              log.info('getNotifications res', notifications);\n                              const data = {};\n                              if (notifications && notifications.length && notifications[0] && notifications[0].id) {\n                                data.lastNotificationId = notifications[0].id;\n                              }\n                              if (subscriptionId) {\n                                this.api.startSession(subscriptionId, data);\n                              }\n                            });\n\n                            lastSession.startedAt = new Date();\n                            lastSession.visits = 0;\n                          }\n\n                          lastSession.lastInteractionAt = new Date();\n                          lastSession.visits += 1;\n                          this.subscriptionManager.storageManager.setLastSession(lastSession);\n\n                          window.addEventListener('unload', () => {\n                            lastSession = this.subscriptionManager.storageManager.getLastSession();\n\n                            if (!lastSession || !lastSession.lastInteractionAt || !lastSession.startedAt || new Date(lastSession.lastInteractionAt) >= new Date(Date.now() - (60 * 60 * 30))) {\n                              lastSession.lastInteractionAt = new Date();\n                            }\n\n                            checkEndSession();\n\n                            this.subscriptionManager.storageManager.setLastSession(lastSession);\n                          }, false);\n                        });\n                      } catch (err) {\n                        log.warn(err);\n                      }\n                    }\n\n                    this.checkConfirmAlertFilters(configParam);\n\n                    if (this.config.customCss) {\n                      const node = document.createElement('style');\n                      node.innerHTML = this.config.customCss + customCssOverrides;\n                      document.body.appendChild(node);\n                    }\n\n                    if (this.config.customJs) {\n                      try {\n                        eval(this.config.customJs);\n                      } catch (err) {\n                        log.debug(err);\n                      }\n                    }\n\n                    this.autoTriggerOptIn();\n\n                    this.initialized = true;\n                    this.initCalled = false;\n\n                    callback(false, true);\n\n                    // exit intent\n                    if (this.config.exitIntentOptIn) {\n                      import('ouibounce').then(({ default: ouibounce }) => {\n                        ouibounce(null, {\n                          aggressive: true,\n                          callback: () => {\n                            let showExitIntent = true;\n                            try {\n                              const shownStr = localStorage.getItem(CLEVERPUSH_EXIT_INTENT_SHOWN);\n                              if (shownStr) {\n                                const shownTime = parseInt(shownStr, INT_RADIX);\n                                if (!isNaN(shownTime) && shownTime + (MILLISECOND_UNIT[TIME_UNITS.DAYS]) > Date.now()) {\n                                  showExitIntent = false;\n                                }\n                              }\n                            } catch (error) {\n                              log.info('error reading exit intent time', error);\n                            }\n\n                            if (showExitIntent) {\n                              if (this.config.exitIntentOncePerSession) {\n                                localStorage.setItem(CLEVERPUSH_EXIT_INTENT_SHOWN, `${Date.now()}`);\n                              }\n                              this.subscriptionManager.isSubscribed().then((subscribed) => {\n                                if (!subscribed && !this.subscriptionManager.isSubscribing) {\n                                  this.triggerOptIn(true);\n                                }\n                              });\n                            }\n                          }\n                        });\n                      });\n\n                      if (this.isMobile && this.config.exitIntentForMobile) {\n                        let showExitIntent = true;\n                        try {\n                          const shownStr = localStorage.getItem(CLEVERPUSH_EXIT_INTENT_SHOWN);\n                          if (shownStr) {\n                            const shownTime = parseInt(shownStr, INT_RADIX);\n                            if (!isNaN(shownTime) && shownTime + (MILLISECOND_UNIT[TIME_UNITS.DAYS]) > Date.now()) {\n                              showExitIntent = false;\n                            }\n                          }\n                        } catch (error) {\n                          log.info('error reading exit intent time', error);\n                        }\n\n                        if (showExitIntent) {\n                          this.subscriptionManager.isSubscribed().then((subscribed) => {\n                            if (this.config.exitIntentOncePerSession) {\n                              localStorage.setItem(CLEVERPUSH_EXIT_INTENT_SHOWN, `${Date.now()}`);\n                            }\n                            if (!subscribed) {\n                              const shownBanner = true;\n                              const optInsConfig = this.config;\n                              this.initMobileExitIntentListeners(OPT_INS, shownBanner, optInsConfig);\n                            }\n                          });\n                        }\n                      }\n                    }\n\n                    if (isHost() && window.location.hash) {\n                      if (window.location.hash.indexOf('#cleverPushScroll=') === 0) {\n                        const split = window.location.hash.split('=');\n                        if (split.length > 1) {\n                          const scrollPercent = parseInt(split[1].split('?')[0], INT_RADIX);\n                          if (scrollPercent) {\n                            window.scrollTo(0, scrollPercent);\n                          }\n                        }\n                      }\n                    }\n\n                    // check for debug URL parameter\n                    if (isHost() && typeof URLSearchParams !== 'undefined') {\n                      let queryParams = '';\n                      if (location.hash && location.hash.indexOf('#?') === 0) {\n                        queryParams += new URLSearchParams(location.hash.slice(2));\n                      }\n                      if (location.search && location.search.length) {\n                        if (queryParams) {\n                          queryParams += '&';\n                        }\n                        queryParams += location.search.slice(1);\n                      }\n\n                      if (queryParams) {\n                        const params = new URLSearchParams(queryParams);\n\n                        if (params.get('cleverPushBypassInactiveFollowUps') === TRUE_STRING) {\n                          this.config.bypassInactiveFollowUps = true;\n                        }\n\n                        const importedSubscriptionId = params.get('cleverPushOnesignalSubscriptionId') || params.get('cleverPushAccengageSubscriptionId') || params.get('cleverPushImportedSubscriptionId') || localStorage.getItem('cleverpush-onesignal-subscription-id') || localStorage.getItem('cleverpush-imported-subscription-id');\n\n                        if (params.get('cleverPushDebugRedirect') === TRUE_STRING) {\n                          const subdomain = (this.config.subdomain || this.config.channelSubdomain);\n                          if (subdomain) {\n                            const status = {\n                              worker: null,\n                              workerScope: null,\n                              notification: (window.Notification || {}).permission,\n                              localStorage: {\n                                'cleverpush-subscription-id': localStorage.getItem('cleverpush-subscription-id'),\n                                'cleverpush-subscription-id-old': localStorage.getItem('cleverpush-subscription-id-old'),\n                                'cleverpush-subscription-status': localStorage.getItem('cleverpush-subscription-status'),\n                                'cleverpush-last-sync': localStorage.getItem('cleverpush-last-sync'),\n                                'cleverpush-last-worker-update': localStorage.getItem('cleverpush-last-worker-update'),\n                                'cleverpush-last-worker-version': localStorage.getItem('cleverpush-last-worker-version'),\n                                'cleverpush-visits': localStorage.getItem('cleverpush-visits'),\n                                'cleverpush-close-time': localStorage.getItem('cleverpush-close-time'),\n                                'cleverpush-deny-time': localStorage.getItem('cleverpush-deny-time'),\n                                'cleverpush-topics': localStorage.getItem('cleverpush-topics'),\n                                'cleverpush-tags': localStorage.getItem('cleverpush-tags'),\n                                'cleverpush-duplicate-channels-completed': localStorage.getItem('cleverpush-duplicate-channels-completed'),\n                              }\n                            };\n\n                            if (\n                              this.config.pianoEnabled\n                              && this.config.pianoPublicPersistedId\n                              && typeof cX !== 'undefined'\n                            ) {\n                              try {\n                                status.pianoSegments = cX.getUserSegmentIds({ persistedQueryId: this.config.pianoPublicPersistedId });\n                              } catch (error) {\n                                log.info('Error getting Piano Segments', error);\n                              }\n                            }\n\n                            const redirect = () => {\n                              location.href = `https://${subdomain}.${this.config.cleverpushDomain || 'cleverpush.com'}/debug?status=${encodeURIComponent(JSON.stringify(status))}`;\n                            };\n\n                            let registrationCount = 0;\n                            navigator.serviceWorker.getRegistrations().then((registrations) => {\n                              if (!registrations.length) {\n                                redirect();\n                              }\n                              registrations.forEach((registration, i) => {\n                                const worker = this.subscriptionManager.getServiceWorker(registration);\n                                registration.pushManager.getSubscription().then((subscription) => {\n                                  status[`worker${i}Url`] = worker.scriptURL;\n                                  status[`worker${i}Subscription`] = JSON.stringify(subscription);\n\n                                  registrationCount += 1;\n                                  if (registrationCount >= registrations.length) {\n                                    redirect();\n                                  }\n                                }).catch(() => {\n                                  registrationCount += 1;\n                                  if (registrationCount >= registrations.length) {\n                                    redirect();\n                                  }\n                                });\n                              });\n                            }).catch(redirect);\n                          }\n                        } else if (params.get('cleverPushSubscriptionIdAlert') === TRUE_STRING) {\n                          this.subscriptionManager.isSubscribed().then((subscribed) => {\n                            if (subscribed) {\n                              this.waitForSubscription().then((subscriptionId) => {\n                                prompt('CleverPush Subscription ID:', subscriptionId);\n                              });\n                            } else {\n                              alert('Dieser Browser ist keinem Push Abonnement zugeordnet.');\n                            }\n                          });\n                        } else if (params.get('cleverPushUnsubscribe') === TRUE_STRING) {\n                          const subdomain = (this.config.subdomain || this.config.channelSubdomain);\n                          if (subdomain) {\n                            this.subscriptionManager.getSubscriptionId().then((subscriptionId) => {\n                              this.unsubscribe(() => {\n                                location.href = `https://${subdomain}.${this.config.cleverpushDomain || 'cleverpush.com'}/unsubscribe?subscriptionId=${subscriptionId}${params.get('cleverPushUnsubscribeForce') === TRUE_STRING ? '&force=true' : ''}`;\n                              });\n                            });\n                          }\n                        } else if (params.get('cleverPushTestSubscription') === TRUE_STRING) {\n                          this.api.testSubscription = true;\n                          this.subscriptionManager.sync().then(() => {\n                            alert('Subscription has been successfully marked as Test Subscription.');\n                          });\n                        } else if (importedSubscriptionId) {\n                          localStorage.setItem('cleverpush-imported-subscription-id', importedSubscriptionId);\n\n                          this.waitForSubscription().then((subscriptionId) => {\n                            if (subscriptionId && subscriptionId !== importedSubscriptionId) {\n                              this.api.unsubscribe(importedSubscriptionId);\n                              localStorage.removeItem('cleverpush-imported-subscription-id');\n                              localStorage.removeItem('cleverpush-onesignal-subscription-id');\n                            }\n                          });\n                        } else if (params.get('cleverPushOptIn') === TRUE_STRING) {\n                          let tags;\n                          if (params.get('cleverPushTags')) {\n                            tags = params.get('cleverPushTags').split(',');\n                            const existingText = 'Du hast dieses Thema bereits abonniert';\n                            const keepText = 'Klicke auf [OK] um fortzufahren oder auf [Abbrechen] um dieses Thema zu deabonnieren.';\n                            const successText = 'Du hast dieses Thema erfolgreich abonniert';\n\n                            const notSubscribed = () => {\n                              tags.forEach((tag) => {\n                                this.tagSubscription(tag);\n                              });\n                              this.subscribe((err) => {\n                                if (err && err.reason === 'denied') {\n                                  if (this.subscriptionManager.confirm) {\n                                    this.subscriptionManager.confirm.showBackdrop(undefined, 'denied', utilsTranslate('popup.info').formatCleverPush(`<strong>${utilsTranslate('confirm.allowBrowser') || utilsTranslate('confirm.allow')}</strong>`));\n                                  }\n                                } else {\n                                  alert(successText);\n                                }\n                              });\n                            };\n\n                            this.subscriptionManager.isSubscribed().then((subscribed) => {\n                              if (subscribed) {\n                                this.waitForSubscription().then(() => {\n                                  this.subscriptionManager.storageManager.getTags().then((storedTags) => {\n                                    if ((storedTags || []).filter((t) => tags.indexOf(t) > -1).length >= tags.length) {\n                                      if (!confirm(`${existingText}\\n\\n${keepText}`)) {\n                                        tags.forEach((tag) => {\n                                          this.untagSubscription(tag);\n                                        });\n                                      }\n                                    } else {\n                                      alert(successText);\n                                      tags.forEach((tag) => {\n                                        this.tagSubscription(tag);\n                                      });\n                                    }\n                                  });\n                                });\n                              } else {\n                                notSubscribed();\n                              }\n                            }).catch(() => {\n                              notSubscribed();\n                            });\n                          } else {\n                            this.subscriptionManager.isSubscribed().then((subscribed) => {\n                              if (subscribed) {\n                                this.waitForSubscription().then(() => {\n                                  this.subscriptionManager.storageManager.getTopics().then((storedTopics) => {\n                                    const channelTopics = (this.config.channelTopics || []).filter((topic) => {\n                                      let show = true;\n                                      if (show && topic.matchPath && topic.matchPath.length) {\n                                        show = new RegExp(topic.matchPath).test(window.parent.location.pathname);\n                                      }\n                                      if (show && topic.notMatchPath && topic.notMatchPath.length) {\n                                        show = !(new RegExp(topic.notMatchPath).test(window.parent.location.pathname));\n                                      }\n                                      return show;\n                                    });\n\n                                    if (this.config.confirmAlertHideChannelTopics || (storedTopics || []).length >= (channelTopics || []).length) {\n                                      alert(utilsTranslate('confirm.alreadySubscribed'));\n                                    } else {\n                                      (this.config.alertLocalization || {}).title = utilsTranslate('confirm.selectTopics');\n                                      (this.config.alertLocalization || {}).info = ' ';\n                                      (this.config.alertLocalization || {}).allow = utilsTranslate('panel.save');\n                                      if (this.confirm) {\n                                        this.confirm.subscribedTopics = storedTopics;\n                                      }\n                                      this.triggerOptIn(true);\n                                    }\n                                  });\n                                });\n                              } else {\n                                this.triggerOptIn(true, (error) => {\n                                  if (error && error.reason === 'denied') {\n                                    if (this.subscriptionManager.confirm) {\n                                      this.subscriptionManager.confirm.showBackdrop(undefined, 'denied', utilsTranslate('popup.info').formatCleverPush(`<strong>${utilsTranslate('confirm.allowBrowser') || utilsTranslate('confirm.allow')}</strong>`));\n                                    }\n                                  }\n                                });\n                              }\n                            }).catch(() => {\n                              this.triggerOptIn(true, (error) => {\n                                if (error && error.reason === 'denied') {\n                                  if (this.subscriptionManager.confirm) {\n                                    this.subscriptionManager.confirm.showBackdrop(undefined, 'denied', utilsTranslate('popup.info').formatCleverPush(`<strong>${utilsTranslate('confirm.allowBrowser') || utilsTranslate('confirm.allow')}</strong>`));\n                                  }\n                                }\n                              });\n                            });\n                          }\n                        } else if (params.get('cleverPushShowBell') === TRUE_STRING) {\n                          this.config.hideNotificationBellSubscribed = false;\n                          this.config.hideNotificationBellMobile = false;\n                          this.config.showNotificationBell = true;\n                        }\n\n                        if (params.get('cleverPushReferralSubscriptionId') && !sessionStorage.getItem('cleverpush-referral-subscription-id')) {\n                          sessionStorage.setItem('cleverpush-referral-subscription-id', params.get('cleverPushReferralSubscriptionId'));\n                        }\n\n                        if (params.get('cleverPushNotificationId')) {\n                          this.subscriptionManager.setClickedNotification(params.get('cleverPushNotificationId'));\n                          localStorage.setItem('cleverpush-notification-id', params.get('cleverPushNotificationId'));\n                          this.subscriptionManager.storageManager.setNotificationRead(params.get('cleverPushNotificationId'));\n                        }\n\n                        if (params.get('cleverPushFollowUpCampaignId')) {\n                          sessionStorage.setItem('cleverpush-follow-up-campaign-id', params.get('cleverPushFollowUpCampaignId'));\n                        }\n\n                        if (params.get('cleverPushJourneyId')) {\n                          sessionStorage.setItem('cleverpush-journey-id', params.get('cleverPushJourneyId'));\n                        }\n\n                        const cleverPushVoucherCode = params.get('cleverPushVoucherCode');\n                        const cleverPushVoucherPoolId = params.get('cleverPushVoucherPoolId');\n                        const cleverPushVoucherPool = this.config.voucherPools?.find((voucherPool) => voucherPool._id === cleverPushVoucherPoolId);\n                        if (cleverPushVoucherCode) {\n                          import('./pageBanner').then(({ default: PageBanner }) => {\n                            this.config.cleverPushVoucherCode = cleverPushVoucherCode;\n                            const voucherNotificationObj = {\n                              title: cleverPushVoucherPool?.title || utilsTranslate('voucherpool.title'),\n                              text: cleverPushVoucherPool?.description || utilsTranslate('voucherpool.text'),\n                              message: cleverPushVoucherPool?.message || utilsTranslate('voucher.code.copied'),\n                            };\n                            const followupNotification = new PageBanner(voucherNotificationObj, this.config, this.subscriptionManager, this.api, 'voucher');\n                            followupNotification.show();\n                          });\n                        }\n                      }\n                    }\n\n                    this.config.clickedFollowUpCampaignId = sessionStorage.getItem('cleverpush-follow-up-campaign-id');\n                    this.config.clickedJourneyId = sessionStorage.getItem('cleverpush-journey-id');\n\n                    this.initNotificationId();\n\n                    this.initFollowUpCampaigns();\n                    this.initJourneys();\n\n                    // Session Notification Tracking\n                    if (this.config.trackNotificationSessions) {\n                      try {\n                        this.waitForSubscription().then((subscriptionId) => {\n                          const notificationId = typeof sessionStorage !== 'undefined' ? localStorage.getItem('cleverpush-notification-id') : undefined;\n                          if (notificationId) {\n                            this.api.trackSessionImpression(subscriptionId, notificationId);\n                          }\n                        });\n                      } catch (err) {\n                        log.warn(err);\n                      }\n                    }\n\n                    // Optionally set location change interval. No listener is possible, the only way is an interval.\n                    // This can be enabled manually by CleverPush if the user is using some JS router (like Angular, React)\n                    // and we need to hook into URL changes\n                    let currentPathname = location.pathname;\n                    if (this.config.detectLocationIntervalEnabled) {\n                      setInterval(() => {\n                        if (location.pathname !== currentPathname) {\n                          log.debug('Location change detected');\n                          this.initFollowUpCampaigns();\n                          this.initJourneys();\n                          this.initConversions();\n                          this.initTags();\n                          this.initWebBanners();\n                          currentPathname = location.pathname;\n                        }\n                      }, 250);\n                    }\n                  });\n                });\n              };\n\n              domReady().then(initSdk).catch((err) => {\n                callback(err);\n              });\n            }).catch((compatibilityError) => {\n              this.webPushUnsupported = true;\n\n              this.checkConfirmAlertFilters(this.config);\n\n              // Still apply custom CSS styles to unsupported browser as they might be used for web banners etc.\n              if (this.config.customCss) {\n                const node = document.createElement('style');\n                node.innerHTML = this.config.customCss + customCssOverrides;\n                document.body.appendChild(node);\n              }\n\n              // page banners are always shown, even if push is not supported\n              this.initPageBanners();\n              this.initWebBanners();\n              this.initWidgets();\n\n              this.initHideUnsupported();\n\n              compatibilityError.warn = true;\n              callback(compatibilityError);\n            });\n          }).catch((err) => {\n            callback(err);\n          });\n        } else if (isIframe(configParam) || isPopup(configParam) || configParam.env === 'POPUP') {\n          this.config = configParam;\n\n          this.initWebpackPublicPath();\n\n          if (typeof URLSearchParams !== 'undefined' && location.search && location.search.length) {\n            const params = new URLSearchParams(location.search.slice(1));\n            if (params.get('confirmAlertTestId')) {\n              this.config.confirmAlertTestId = params.get('confirmAlertTestId');\n              this.api.setConfirmAlertTestId(this.config.confirmAlertTestId);\n            }\n          }\n\n          initSubscriptionManager();\n\n          log.debug('Init done');\n\n          this.initialized = true;\n          this.initCalled = false;\n\n          callback(false, true);\n        }\n      }\n    }\n  }\n\n  initWebpackPublicPath() {\n    if (this.config.staticEndpoint && process.env.NODE_ENV !== 'development') {\n      // set the public path to load chunks from dynamically, depending on the staticEndpoint from config\n      // eslint-disable-next-line camelcase\n      __webpack_public_path__ = `${this.config.staticEndpoint}/sdk/`;\n    }\n  }\n\n  /**\n   * Displays the unblock tutorial for the users to give guidance\n   * on how to unblock notifications, so a successful opt-in can occur.\n   *\n   * @function\n   */\n  displayUnblockTutorial() {\n    this.config.showSilentPromptTutorial = true;\n    this.config.showConfirmAlert = true;\n  }\n\n  setUrlSessionConfig(configParam) {\n    if (this.config.multiChannels && this.config.multiChannels.telegramChannel && this.config.multiChannels.telegramChannel._id !== this.config.channelId && !configParam.forceChannelId) {\n      this.config.channelId = this.config.multiChannels.telegramChannel._id;\n      this.api.channelId = this.config.multiChannels.telegramChannel._id;\n    } else if (this.config.multiChannels && this.config.multiChannels.facebookChannel && this.config.multiChannels.facebookChannel._id !== this.config.channelId && !configParam.forceChannelId) {\n      this.config.channelId = this.config.multiChannels.facebookChannel._id;\n      this.api.channelId = this.config.multiChannels.facebookChannel._id;\n    }\n  }\n\n  handleLegacyConversion({\n    subscriptionId,\n    notificationId,\n    eventId,\n    properties\n  }) {\n    if (!subscriptionId && !this.config.trackConversionsWithoutSubscriptions && !notificationId) {\n      return;\n    }\n\n    const conversionTrackingKey = `cleverpush-conversion-${eventId}-tracked`;\n    const lastConversionTrackedAt = sessionStorage.getItem(conversionTrackingKey);\n\n    if (!lastConversionTrackedAt || this.isLastCheckExpired(lastConversionTrackedAt, MILLISECOND_UNIT[TIME_UNITS.HOUR])) {\n      sessionStorage.setItem(conversionTrackingKey, Date.now());\n      this.api.trackConversion(subscriptionId, notificationId, eventId, properties);\n      this.trigger(Event.EVENT_TRACKED, { eventId });\n    }\n  }\n\n  /**\n    Tracks conversion events for CleverPush push notifications.\n    @param {Object} props - Conversion tracking properties.\n    @param {string} props.subscriptionId - The ID of the subscription associated with the conversion.\n    @param {string} props.notificationId - The ID of the notification associated with the conversion.\n    @param {string} props.eventId - The ID of the event being tracked.\n    @param {Object} props.properties - The amount of the conversion event.\n    @param {number} props.minutes - The number of minutes to wait before tracking the conversion again..\n    @returns {void}\n  */\n  handleAdditionalConversionTrack({\n    subscriptionId, notificationId, eventId, properties, minutes\n  }) {\n    if (!subscriptionId || !notificationId) {\n      return;\n    }\n\n    const conversionDelayMs = convertMinutesToMS(minutes);\n    const conversionTrackingByMinutesKey = `cleverpush-conversion-${eventId}-minutes-${conversionDelayMs}-tracked`;\n    const lastConversionByMinutesTrackedAt = sessionStorage.getItem(conversionTrackingByMinutesKey);\n\n    if (!lastConversionByMinutesTrackedAt || this.isLastCheckExpired(lastConversionByMinutesTrackedAt, conversionDelayMs)) {\n      sessionStorage.setItem(conversionTrackingByMinutesKey, Date.now());\n      this.api.trackConversion(subscriptionId, notificationId, eventId, properties, minutes);\n      this.trigger(Event.EVENT_TRACKED, { eventId });\n    }\n  }\n\n  setFacebookChannelConfig(configParam) {\n    if (this.config.multiChannels && this.config.multiChannels.facebookChannel && this.config.multiChannels.facebookChannel._id !== this.config.channelId && !configParam.forceChannelId) {\n      this.config.channelId = this.config.multiChannels.facebookChannel._id;\n      this.config.alertLocalization = { ...this.config.alertLocalization, ...this.config.multiChannels.facebookChannel.alertLocalization };\n      if (this.config.multiChannels.facebookChannel.alertLocalizationTranslations) {\n        this.config.alertLocalizationTranslations = {\n          ...(this.config.alertLocalizationTranslations || {}),\n          ...this.config.multiChannels.facebookChannel.alertLocalizationTranslations\n        };\n      }\n      this.api.channelId = this.config.multiChannels.facebookChannel._id;\n    }\n\n    this.config.hideNotificationBellSubscribed = true;\n\n    this.config.showConfirmAlert = true;\n    if (this.config.confirmAlertNativeTheme === 'cleverpush-confirm-backdrop-text') {\n      this.config.confirmAlertNativeTheme = '';\n    }\n\n    this.config.facebookButtonOptIn = true;\n    this.config.facebookCheckboxEnabled = false;\n  }\n\n  applyConfirmAlertFilter = async (filter, configParam) => {\n    if (typeof filter.autoRegister !== 'undefined') {\n      this.config.autoRegister = filter.autoRegister;\n    }\n    if (typeof filter.minimumVisits !== 'undefined') {\n      this.config.alertMinimumVisits = filter.minimumVisits;\n    }\n    if (typeof filter.scrollPercentage !== 'undefined') {\n      this.config.alertScrollPercentage = filter.scrollPercentage;\n    }\n    if (typeof filter.timeout !== 'undefined') {\n      this.config.alertTimeout = filter.timeout * 1000;\n    }\n    if (typeof filter.localizationTitle !== 'undefined') {\n      this.config.alertLocalization = { ...this.config.alertLocalization, title: filter.localizationTitle };\n    }\n    if (typeof filter.localizationInfo !== 'undefined') {\n      this.config.alertLocalization = { ...this.config.alertLocalization, info: filter.localizationInfo };\n    }\n    if (typeof filter.radioButtonTopics !== 'undefined') {\n      this.config.confirmAlertRadioButtonTopics = filter.radioButtonTopics;\n    }\n    if (typeof filter.requireTopics !== 'undefined') {\n      this.config.confirmAlertRequireChannelTopics = filter.requireTopics;\n    }\n    if (typeof filter.nativeTheme !== 'undefined') {\n      this.config.confirmAlertNativeTheme = filter.nativeTheme;\n    }\n    if (typeof filter.customCss !== 'undefined') {\n      if (!this.config.customCss) {\n        this.config.customCss = '';\n      }\n      this.config.customCss += filter.customCss;\n    }\n    if (typeof filter.config === 'object') {\n      Object.keys(filter.config || {}).forEach((key) => {\n        if (key === 'alertLocalization') {\n          this.config[key] = { ...this.config[key], ...filter.config[key] };\n        } else if (key.indexOf('alertLocalization') === 0) {\n          if (!this.config.alertLocalization) {\n            this.config.alertLocalization = {};\n          }\n          const keySub = key.substr('alertLocalization'.length);\n          this.config.alertLocalization[keySub.substr(0, 1).toLowerCase() + keySub.substr(1)] = filter.config[key];\n        } else if (key === 'serviceWorkerPath') {\n          this.config.serviceWorkerFile = filter.config[key];\n        } else if (key === 'customCss') {\n          if (!this.config.customCss) {\n            this.config.customCss = '';\n          }\n          this.config.customCss += filter.config.customCss;\n        } else {\n          this.config[key] = filter.config[key];\n        }\n      });\n      if (filter.config.alertTimeout && filter.config.alertTimeout < 1000) {\n        this.config.alertTimeout = filter.config.alertTimeout * 1000;\n      }\n\n      if (filter.config && filter.config.facebookOptIn && this.browserType !== 'facebook') {\n        this.browserType = 'facebook';\n        this.setFacebookChannelConfig(configParam);\n        this.importSubscriptionManager('facebookManager', filter.type);\n      }\n    }\n  };\n\n  importSubscriptionManager(importType, filterType) {\n    import(`./subscription/${importType}`).then(({ default: SubscriptionManager }) => {\n      this.subscriptionManager = new SubscriptionManager(this.config, this.api, this.trigger.bind(this));\n      if (filterType === 'denyCountGreaterThan') {\n        this.subscriptionManager.storageManager.setDenyStatus();\n      }\n    });\n  }\n\n  setAuthorizerToken(authorizerToken) {\n    this.api.authorizerToken = authorizerToken;\n  }\n\n  /**\n   * Determines whether a given filter object meets certain conditions.\n   * @param {Object} filter\n   * @param {Object} configParams\n   * @returns {Boolean}\n   *\n   */\n\n  checkFilterConditions = (filter, configParams = {}, isForTest = false) => {\n    switch (filter.type) {\n      case 'device': {\n        const isDesktop = filter.value === 'desktop';\n        const isMobile = filter.value === 'mobile';\n        const isBot = filter.value === 'bot';\n        const isNotMobile = device.type !== 'mobile';\n        const userAgent = navigator.userAgent;\n        return (isDesktop && isNotMobile) || (isMobile && !isNotMobile) || (isBot && /bot|google|baidu|bing|msn|duckduckbot|teoma|slurp|yandex/i.test(userAgent));\n      }\n      case 'referrer': {\n        const referrer = this.referrer || document.referrer;\n        return referrer && new RegExp(filter.value).test(referrer);\n      }\n      case 'path': {\n        const { pathname } = location;\n        return pathname && new RegExp(filter.value).test(pathname);\n      }\n      case 'function': {\n        try {\n          const matches = !!eval(filter.value);\n          return matches;\n        } catch (err) {\n          log.debug(err);\n          return false;\n        }\n      }\n      case 'userAgent': {\n        const userAgent = navigator.userAgent;\n        return userAgent && new RegExp(filter.value).test(userAgent);\n      }\n      case 'host': {\n        const { hostname } = location;\n        return hostname && new RegExp(filter.value).test(hostname);\n      }\n      case 'utmSource':\n      case 'utmMedium':\n      case 'utmCampaign': {\n        const { search } = window.location;\n        const utmParam = `utm_${filter.type.toLowerCase()}`;\n        return search && search.indexOf(`${utmParam}=${filter.value}`) > -1;\n      }\n      case 'facebook':\n      case 'wallet': {\n        return this.browserType === filter.type;\n      }\n      case 'denyCountGreaterThan': {\n        const { value } = filter;\n        const denyCount = parseInt(localStorage.getItem(KEY_DENY_COUNT), INT_RADIX) || 0;\n        return denyCount >= Number(value);\n      }\n\n      case 'filterGroup': {\n        const { children } = filter;\n        if (children && children.length === 0) {\n          return false;\n        }\n\n        const matchedFilters = (children || []).filter((child) => this.checkFilterConditions(child, configParams));\n\n        if (isForTest) {\n          return matchedFilters.length === children.length;\n        }\n\n        if (matchedFilters.length === children.length) {\n          this.applyConfirmAlertFilter(filter, configParams);\n        }\n      }\n\n      default: {\n        log.debug(`Invalid filter type: ${filter.type}`);\n        return false;\n      }\n    }\n  }\n\n  checkConfirmAlertFilters(configParams) {\n    const { confirmAlertFilters, env } = this.config;\n    if (!confirmAlertFilters?.length || env === 'PREVIEW') {\n      return {};\n    }\n\n    (confirmAlertFilters || []).forEach((filter) => {\n      if (this.checkFilterConditions(filter, configParams)) {\n        this.applyConfirmAlertFilter(filter, configParams);\n      }\n    });\n  }\n\n  autoTriggerOptIn() {\n    // we need to cache this here, because if called inside checkVisits the value will be too high.\n    const storageManagerVisits = this.subscriptionManager.storageManager.getVisits();\n\n    let optInTriggered = false;\n    const optIn = () => {\n      if (optInTriggered) {\n        return;\n      }\n      optInTriggered = true;\n\n      const checkVisits = () => {\n        if (storageManagerVisits >= this.config.alertMinimumVisits) {\n          setTimeout(() => {\n            if (this.config.preventDuplicateOptIns && this.config.androidPackageName && 'getInstalledRelatedApps' in navigator) {\n              navigator.getInstalledRelatedApps().then((relatedApps) => {\n                let foundApp = false;\n                if (relatedApps) {\n                  relatedApps.forEach((app) => {\n                    if (app.id === this.config.androidPackageName) {\n                      foundApp = true;\n                    }\n                  });\n                }\n                if (!foundApp) {\n                  sessionStorage.setItem('cleverpush-alert-shown', TRUE_STRING);\n                  this.triggerOptIn();\n                }\n              });\n            } else {\n              sessionStorage.setItem('cleverpush-alert-shown', TRUE_STRING);\n              this.triggerOptIn();\n            }\n          }, this.config.alertTimeout);\n\n          if (!this.optInVisitorTracked) {\n            this.subscriptionManager.canSubscribe().then((canSubscribe) => {\n              if (canSubscribe === true && !this.optInVisitorTracked) {\n                this.optInVisitorTracked = true;\n                this.api.trackOptInVisitor();\n              }\n            }).catch(() => {\n              // ignored\n            });\n          }\n        }\n      };\n\n      if (this.config.alertOncePerSession) {\n        if (sessionStorage.getItem('cleverpush-alert-shown') !== TRUE_STRING) {\n          checkVisits();\n        }\n      } else {\n        checkVisits();\n      }\n    };\n\n    const cmpReady = () => {\n      if (window.UC_UI_SUPPRESS_CMP_DISPLAY) {\n        return window.UC_UI && window.UC_UI.isInitialized();\n      }\n      return typeof __tcfapi === 'function';\n    };\n\n    const optInReady = (retryCount = 0) => {\n      if (this.config.optInWaitForTcfDecision && cmpReady()) {\n        let tcfOptInFired = false;\n\n        const tcfOptIn = (tcData) => {\n          log.debug('tcfOptIn tcData', tcData);\n          if (this.config.tcfRequireVendorConsent && this.config.tcfVendorId) {\n            if (tcData?.vendor?.consents && tcData.vendor?.consents[this.config.tcfVendorId]) {\n              optIn();\n            } else {\n              __tcfapi('getCustomVendorConsents', TCF_VERSION, (vendorConsents) => {\n                if (vendorConsents && vendorConsents.grants && vendorConsents?.grants[this.config.tcfVendorId] && vendorConsents?.grants[this.config.tcfVendorId].vendorGrant) {\n                  tcfOptInFired = true;\n                  log.debug('__tcfapi has vendor consent, starting opt in', vendorConsents);\n                  optIn();\n                } else {\n                  log.debug('__tcfapi no vendor consent!', vendorConsents);\n                }\n              });\n            }\n          } else {\n            tcfOptInFired = true;\n            optIn();\n          }\n        };\n\n        const checkTcData = () => {\n          __tcfapi('addEventListener', TCF_VERSION, (tcData, success) => {\n            __tcfapi('removeEventListener', TCF_VERSION, () => {}, tcData.listenerId);\n\n            log.debug('__tcfapi addEventListener', tcData, success);\n\n            if (!tcfOptInFired && success && tcData.tcString && tcData.eventStatus !== 'cmpuishown') {\n              tcfOptIn(tcData);\n            }\n          });\n        };\n\n        if (this.config.tcfWaitForFunction) {\n          const isTcfFunctionAllowed = () => {\n            try {\n              return !!eval(this.config.tcfWaitForFunction);\n            } catch (error) { }\n            return false;\n          };\n\n          setTimeout(() => {\n            if (isTcfFunctionAllowed()) {\n              checkTcData();\n              return;\n            }\n\n            let tcfFunctionCompleted = false;\n            __tcfapi('addEventListener', TCF_VERSION, () => {\n              if (tcfFunctionCompleted) {\n                return;\n              }\n              setTimeout(() => {\n                if (isTcfFunctionAllowed()) {\n                  tcfFunctionCompleted = true;\n                  checkTcData();\n                }\n              }, 500);\n            });\n          }, 500);\n        } else {\n          checkTcData();\n        }\n      } else if (this.config.optInWaitForTcfDecision) {\n        // we will now retry 30 x in 500ms intervals (= 15 seconds) to find it\n        if (retryCount < TCF_MAX_RETRY_COUNT) {\n          log.debug('__tcfapi not found. retrying…');\n          setTimeout(() => optInReady(retryCount + 1), TCF_RETRY_DELAY_MS);\n        } else {\n          log.debug('__tcfapi not found');\n          optIn();\n        }\n      } else {\n        optIn();\n      }\n    };\n\n    // automatically trigger opt-in, if enabled\n    if (this.config.autoRegister) {\n      if (this.config.env === 'PREVIEW') {\n        this.triggerOptIn();\n      } else {\n        if (!isNaN(this.config.alertScrollPercentage) && this.config.alertScrollPercentage > 0) {\n          const checkScroll = () => {\n            if (getScrollPercentage() >= this.config.alertScrollPercentage) {\n              window.removeEventListener('scroll', checkScroll);\n              optInReady();\n            }\n          };\n          window.addEventListener('scroll', checkScroll);\n          // initial check\n          checkScroll();\n        } else {\n          optInReady();\n        }\n\n        if (this.config.alertMinimumVisits && this.config.alertMinimumVisits > 0) {\n          // only increment visits if we need to (for triggering opt-in)\n          this.subscriptionManager.storageManager.incrementVisits();\n        }\n      }\n    }\n\n    if (this.config.showConfirmAlert && this.config.disableConfirmAlertSearchTraffic) {\n      if (this.referrer && /google|bing|yahoo|baidu|duckduckgo|wolframalpha/.test(this.referrer)) {\n        this.config.showConfirmAlert = false;\n      }\n    }\n\n    this.on(Event.PERMISSION_RE_GRANTED, () => {\n      if (this.config.autoRegister) {\n        optInReady();\n      }\n    });\n  }\n\n  initHttpIframe(config) {\n    logMethodCall('initHttpIframe', config);\n\n    this.init(config);\n  }\n\n  initWidget(config) {\n    logMethodCall('initWidget', config);\n\n    this.init({ ...config, env: 'WIDGET' });\n  }\n\n  initHttpPopup(config) {\n    logMethodCall('initHttpPopup', config);\n\n    config.env = 'POPUP';\n\n    if (browser.name === 'Firefox' && browserVersion >= 72) {\n      config.showConfirmAlert = true;\n      config.showConfirmAlertForce = true;\n    }\n\n    if (config.loadConfigFromParent) {\n      config.loadConfig = false;\n    }\n\n    log.debug('initHttpPopup calling init…');\n\n    this.init(config, (err) => {\n      if (err) {\n        log.error('initHttpPopup err', err);\n\n        const statusDiv = document.getElementById('status');\n        if (statusDiv) {\n          statusDiv.innerText = err.message || err.reason || err;\n        } else if (window.opener) {\n          window.close();\n        } else {\n          history.back();\n        }\n      } else {\n        // Firefox 72: Push notification prompting can only be done from a user gesture\n        if (browser.name === 'Firefox' && browserVersion >= 72) {\n          import('./confirm').then(({ default: Confirm }) => {\n            log.debug('showConfirmAlert = true 5');\n            this.config.showConfirmAlert = true;\n            this.config.showConfirmAlertForce = true;\n            this.confirm = new Confirm(this, this.subscriptionManager);\n            this.subscriptionManager.setConfirm(this.confirm);\n            domLoaded().then(() => {\n              this.confirm.appendConfirmBox(`${this.config.confirmAlertNativeTheme} ${this.config.confirmAlertNativeTheme}-native`);\n\n              if (this.confirm.denyButton) {\n                this.confirm.denyButton.style.display = 'none';\n              }\n              const confirmInfo = this.confirm.confirmBox.querySelector('.cleverpush-confirm-info');\n              if (confirmInfo) {\n                confirmInfo.style.display = 'none';\n              }\n            });\n          });\n        }\n\n        window.onbeforeunload = () => utilsTranslate('windowclose.confirm');\n      }\n    });\n  }\n\n  initContentButtons() {\n    return this.initWidgets();\n  }\n\n  initWidgets() {\n    logMethodCall('initWidgets');\n\n    const storageKey = 'cleverpush-widgets-shown';\n    const shownWidgetsStorage = localStorage.getItem(storageKey);\n\n    let shownWidgets;\n    if (shownWidgetsStorage) {\n      try {\n        shownWidgets = JSON.parse(shownWidgetsStorage);\n      } catch (error) {\n        log.info('error parsing JSON', error);\n      }\n    }\n    if (!shownWidgets) {\n      shownWidgets = [];\n    }\n    const shownWidgetsSessionStorage = sessionStorage.getItem(storageKey);\n    if (shownWidgetsSessionStorage) {\n      try {\n        shownWidgets = shownWidgets.concat(JSON.parse(shownWidgetsSessionStorage));\n      } catch (error) {\n        log.info('error parsing JSON', error);\n      }\n    }\n\n    this.widgets = (this.widgets || []).filter((widget) => !shownWidgets.includes(widget._id));\n    (this.config.widgets || []).filter((widget) => widget.autoAppendType === 'selector').forEach((widget) => {\n      try {\n        if (widget.autoAppendPath) {\n          if (!new RegExp(widget.autoAppendPath).test(window.location.pathname)) {\n            return;\n          }\n        }\n        if (widget.autoAppendSelector) {\n          const target = document.querySelector(widget.autoAppendSelector);\n          if (target) {\n            const widgetDiv = document.createElement('div');\n            widgetDiv.className = 'cleverpush-widget';\n            widgetDiv.dataset.id = widget._id;\n            if (!widget.autoAppendPosition || widget.autoAppendPosition === 'top') {\n              target.insertBefore(widgetDiv, target.firstChild);\n            } else if (widget.autoAppendPosition === 'bottom') {\n              target.appendChild(widgetDiv);\n            }\n          }\n        }\n      } catch (e) {\n        log.warn('Failed appending widget', e);\n      }\n    });\n\n    let hasExitIntent = false;\n    const shownWidget = false;\n    const widgets = document.querySelectorAll('.cleverpush-content-button, .cleverpush-widget');\n    if (widgets.length) {\n      import('./widget').then(async ({ default: Widget }) => {\n        widgets.forEach(async (element, i) => {\n          const isWidgetAlreadyExist = (this.config.widgets || []).some((widget) => widget._id === element.dataset.id);\n\n          if (!isWidgetAlreadyExist) {\n            const newWidget = await this.api.getWidget(element.dataset.id);\n            this.config.widgets.push(newWidget);\n          }\n\n          const widget = new Widget(i, element, this.config, this.subscriptionManager, this.api, this.trigger.bind(this));\n          const widgetConfig = widget.elementConfig;\n\n          const bypassExitIntent = this.isMobile && widgetConfig.enableRegularDisplayForMobile && !widgetConfig.exitIntentForMobile;\n\n          const isMessengerWidget = widget.isMessengerWidget('telegramChannel') || widget.isMessengerWidget('facebookChannel');\n          if (this.webPushUnsupported && !isMessengerWidget && !widget.hasSharedWidgetChannels()) {\n            // do not show widget when web push is not supported and this is not a messenger widget\n            return;\n          }\n\n          if (widgetConfig.exitIntent && !bypassExitIntent) {\n            if (hasExitIntent) {\n              return;\n            }\n\n            if (this.isMobile && widgetConfig.exitIntentForMobile && !widgetConfig.enableRegularDisplayForMobile) {\n              this.initMobileExitIntentListeners(WIDGET, shownWidget, element, widget, shownWidgets, storageKey);\n            }\n\n            hasExitIntent = true;\n\n            this.initElementExitIntentListener(WIDGET, shownWidget, element, widget, shownWidgets, storageKey);\n          } else {\n            this.shouldShowBanner(false, widget).then((show) => {\n              if (!show) {\n                return;\n              }\n\n              setTimeout(() => {\n                this.on(Event.SUBSCRIBED, () => {\n                  // use show instead of reset to re-paint topics\n                  widget.show(true);\n                });\n                this.on(Event.TOPICS_SET, () => {\n                  widget.show(true);\n                });\n                this.on(Event.TAGS_SET, () => {\n                  widget.show(true);\n                });\n                this.on(Event.UNSUBSCRIBED, () => {\n                  widget.show(false);\n                });\n\n                if (!this.subscriptionManager) {\n                  widget.show(false);\n                }\n\n                this.subscriptionManager?.isSubscribed().then((isSubscribed) => {\n                  widget.show(isSubscribed);\n\n                  // track confirm alert only when widget is visible\n                  if (widget.elementConfig.id && widget.element) {\n                    if (isInViewport(widget.element)) {\n                      widget.trackShown();\n                    } else {\n                      const enterViewportListener = () => {\n                        if (isInViewport(widget.element)) {\n                          window.removeEventListener('scroll', enterViewportListener);\n                          widget.trackShown();\n                        }\n                      };\n                      window.addEventListener('scroll', enterViewportListener, false);\n                    }\n                  }\n                });\n                this.markElementAsShown(shownWidgets, widget, storageKey);\n                this.widgets.push(widget);\n              }, (widget.timeout || 0) * 1000);\n            });\n          }\n        });\n      });\n    }\n  }\n\n  initHideUnsupported() {\n    const hideUnsupportedContainers = document.querySelectorAll('.cleverpush-hide-unsupported');\n    for (let i = 0; i < hideUnsupportedContainers.length; i += 1) {\n      const hideUnsupportedContainer = hideUnsupportedContainers[i];\n      hideUnsupportedContainer.style.setProperty('display', 'none', 'important');\n    }\n  }\n\n  initMultiPlatformWidgets() {\n    logMethodCall('initMultiPlatformWidgets');\n\n    this.multiPlatformWidgets = this.multiPlatformWidgets || [];\n\n    const widgets = document.querySelectorAll('.cleverpush-multi-platform-widget');\n    if (widgets.length) {\n      import('./multiPlatformWidget').then(({ default: MultiPlatformWidget }) => {\n        for (let i = 0; i < widgets.length; i += 1) {\n          const element = widgets[i];\n\n          const widget = new MultiPlatformWidget(i, element, this.config, this.subscriptionManager, this.api);\n\n          this.on(Event.SUBSCRIBED, () => {\n            widget.reset(this.browserType !== 'facebook', true);\n          });\n          this.on(Event.UNSUBSCRIBED, () => {\n            widget.reset(this.browserType !== 'facebook', false);\n          });\n\n          this.waitForInit().then(() => {\n            if (element && element.dataset && element.dataset.platform === 'web-push' && this.browserType === 'facebook') {\n              widget.show(false, false);\n              return;\n            }\n\n            widget.subscriptionManager = this.subscriptionManager;\n            this.subscriptionManager.isSubscribed().then((isSubscribed) => {\n              widget.show(this.browserType !== 'facebook', isSubscribed);\n            }).catch(() => {\n              widget.show(this.browserType !== 'facebook', false);\n            });\n          }).catch(() => {\n            widget.show(false, false);\n          });\n\n          this.multiPlatformWidgets.push(widget);\n        }\n      });\n    }\n  }\n\n  initTagButtons() {\n    logMethodCall('initTagButtons');\n\n    this.tagButtons = this.tagButtons || [];\n\n    const tagButtons = document.querySelectorAll('.cleverpush-tag-button');\n    if (tagButtons.length) {\n      import('./tagButton').then(({ default: TagButton }) => {\n        for (let i = 0; i < tagButtons.length; i += 1) {\n          const element = tagButtons[i];\n          const tagButton = new TagButton(i, element, this.config, this.subscriptionManager, this.api, this.triggerOptIn.bind(this));\n\n          this.on(Event.SUBSCRIBED, () => {\n            tagButton.reset(true);\n          });\n          this.on(Event.UNSUBSCRIBED, () => {\n            tagButton.reset(false);\n          });\n\n          this.tagButtons.push(tagButton);\n        }\n      });\n    }\n  }\n\n  initTagSwitches() {\n    logMethodCall('initTagSwitches');\n\n    this.tagCheckboxes = this.tagCheckboxes || [];\n\n    const newTagCheckboxes = document.querySelectorAll('.cleverpush-tag-switch');\n    if (newTagCheckboxes.length) {\n      import('./tagSwitch').then(({ default: TagCheckbox }) => {\n        for (let i = 0; i < newTagCheckboxes.length; i += 1) {\n          const element = newTagCheckboxes[i];\n          const newTagCheckbox = new TagCheckbox(i, element, this.config, this.subscriptionManager, this.api, this.triggerOptIn.bind(this));\n          this.on(Event.SUBSCRIBED, () => {\n            newTagCheckbox.reset(true);\n          });\n          this.on(Event.UNSUBSCRIBED, () => {\n            newTagCheckbox.reset(false);\n          });\n\n          this.tagCheckboxes.push(newTagCheckbox);\n        }\n      });\n    }\n  }\n\n  initTopicButtons() {\n    logMethodCall('initTopicButtons');\n\n    this.topicButtons = this.topicButtons || [];\n\n    const topicButtons = document.querySelectorAll('.cleverpush-topic-button');\n    if (topicButtons.length) {\n      import('./topicButton').then(({ default: TopicButton }) => {\n        for (let i = 0; i < topicButtons.length; i += 1) {\n          const element = topicButtons[i];\n          const topicButton = new TopicButton(i, element, this.config, this.subscriptionManager, this.api, this.triggerOptIn.bind(this));\n\n          this.on(Event.SUBSCRIBED, () => {\n            topicButton.reset(true);\n          });\n          this.on(Event.TOPICS_SET, () => {\n            topicButton.init();\n          });\n          this.on(Event.UNSUBSCRIBED, () => {\n            topicButton.reset(false);\n          });\n\n          this.topicButtons.push(topicButton);\n        }\n      });\n    }\n  }\n\n  initPageBanners() {\n    logMethodCall('initPageBanners');\n\n    this.pageBanners = this.pageBanners || [];\n\n    let storageManager;\n    if (this.subscriptionManager && this.subscriptionManager.storageManager) {\n      storageManager = this.subscriptionManager.storageManager;\n    }\n\n    (this.config.pageBannerNotifications || []).reduce((op, notification) => op.then((filteredNs) => new Promise((resolve) => {\n      if (storageManager) {\n        storageManager.getNotification(notification._id).then((dbNotification) => {\n          if (dbNotification) {\n            resolve(filteredNs);\n          } else {\n            resolve(filteredNs.concat(notification));\n          }\n        }).catch(() => {\n          resolve(filteredNs.concat(notification));\n        });\n      } else {\n        resolve(filteredNs.concat(notification));\n      }\n    })), Promise.resolve([])).then((filteredNotifications) => {\n      if (filteredNotifications.length) {\n        import('./pageBanner').then(({ default: PageBanner }) => {\n          filteredNotifications.forEach((notification) => {\n            const pageBanner = new PageBanner(notification, this.config, this.subscriptionManager, this.api);\n            if (\n              (!notification.scheduledAt || (notification.scheduledAt && notification.scheduledAt < new Date()))\n              && (!notification.expiresAt || notification.expiresAt > new Date())\n            ) {\n              let show = true;\n              if (show && notification.pageBannerMatchPath) {\n                show = new RegExp(notification.pageBannerMatchPath).test(window.location.pathname);\n              }\n              if (show && notification.pageBannerNotMatchPath) {\n                show = !(new RegExp(notification.pageBannerNotMatchPath).test(window.location.pathname));\n              }\n              if (show) {\n                pageBanner.show();\n\n                if (storageManager) {\n                  pageBanner.onClickCallback = () => storageManager.addNotification({\n                    id: notification._id,\n                    url: notification.url,\n                    title: notification.title,\n                    text: notification.text,\n                    icon: notification.iconUrl,\n                    media: notification.mediaUrl,\n                    autoHide: notification.autoHide,\n                    subscriptionId: '',\n                    channelId: this.config.channelId,\n                    scheduledAt: notification.scheduledAt,\n                    createdAt: notification.createdAt,\n                    expiresAt: notification.expiresAt,\n                    clicked: 0,\n                    markedAsDelivered: 1\n                  });\n                }\n              }\n            }\n            this.pageBanners.push(pageBanner);\n          });\n        });\n      }\n    });\n\n    // adblock page banner\n    if (this.config.pageBannerAdblockEnabled) {\n      detectAdblock((detected) => {\n        if (detected) {\n          log.debug('AdBlock detected');\n\n          import('./pageBanner').then(({ default: PageBanner }) => {\n            const pageBanner = new PageBanner({\n              id: 'adblockNotification',\n              title: this.config.pageBannerAdblockTitle || '',\n              text: this.config.pageBannerAdblockText || '',\n              url: this.config.pageBannerAdblockUrl\n            }, this.config, this.subscriptionManager, this.api);\n            pageBanner.show();\n          });\n        }\n      });\n    }\n  }\n\n  setBannerSessionKey(banner, sessionKey) {\n    if (banner.multipleBannersBehaviour === BANNER_BEHAVIOUR_PER_SESSION) {\n      sessionStorage.setItem(sessionKey, JSON.stringify(banner._id));\n    }\n  }\n\n  initChatWidget() {\n    if (!window.cleverpushChatLoaded && this.config.displayChatWidget && this.config.chatWidgetPath && new RegExp(this.config.chatWidgetPath).test(location.pathname)) {\n      const script = document.createElement('script');\n      script.src = 'https://static.cleverpush.com/sdk/cleverpush-chat.js';\n      document.head.appendChild(script);\n    }\n  }\n\n  shouldShowBanner = async (shownBanner, banner) => {\n    let show = !shownBanner;\n    show = await matchElementPathAndDomain(show, banner);\n\n    if (show && banner.minimumVisits) {\n      const visitsStr = localStorage.getItem(`cleverpush-banner-${banner._id}-visits`);\n      let visits = 0;\n      if (visitsStr) {\n        const visitsInt = parseInt(visitsStr, INT_RADIX);\n        if (!isNaN(visitsInt)) {\n          visits = parseInt(visitsInt, INT_RADIX);\n        }\n      }\n      visits += 1;\n      localStorage.setItem(`cleverpush-banner-${banner._id}-visits`, `${visits}`);\n      show = show && visits >= banner.minimumVisits;\n    }\n\n    const finalizeShow = () => {\n      const promises = [Promise.resolve(show)];\n      const isTrue = (a) => a;\n      const allTrue = (values) => values.every(isTrue);\n      const choose = (logic) => {\n        switch (logic) {\n          case 'and': return 'every';\n          case 'or': return 'some';\n          default: return 'some';\n        }\n      };\n\n      if (banner.showOnlySubscribers) {\n        promises.push(new Promise((resolve) => {\n          if (!this.subscriptionManager) {\n            resolve(false);\n            return;\n          }\n\n          this.subscriptionManager.isSubscribed().then(resolve);\n        }));\n      }\n\n      if (banner.topics && banner.topics.length > 0) {\n        const res = new Promise((resolve) => this.getTopics((_null, topics) => {\n          resolve(banner.topics[choose(banner.topicsLogic)]((topic) => topics.includes(topic)));\n        }));\n        promises.push(res);\n      }\n\n      if (banner.excludeTopics && banner.excludeTopics.length > 0) {\n        const res = new Promise((resolve) => this.getTopics((_null, topics) => {\n          resolve(banner.excludeTopics.every((topic) => !topics.includes(topic)));\n        }));\n        promises.push(res);\n      }\n\n      if (banner.tags && banner.tags.length > 0) {\n        const hasTag = (tag) => new Promise((resolve) => this.hasTag(tag, resolve));\n        const res = Promise.all(banner.tags.map(hasTag))\n          .then((values) => values[choose(banner.tagsLogic)](isTrue));\n        promises.push(res);\n      }\n\n      if (banner.excludeTags && banner.excludeTags.length > 0) {\n        const hasTag = (tag) => new Promise((resolve) => !this.hasTag(tag, resolve));\n        const res = Promise.all(banner.excludeTags.map(hasTag))\n          .then((values) => values.every(isTrue));\n        promises.push(res);\n      }\n\n      if (banner.attributes && banner.attributes.length > 0) {\n        const res = Promise.all(banner.attributes.map((attribute) => new Promise((resolve) => this.hasAttribute(attribute.id, attribute.value, resolve))))\n          .then((values) => values.every(isTrue));\n        promises.push(res);\n      }\n\n      return Promise.all(promises).then(allTrue);\n    };\n\n    return new Promise((resolve) => {\n      if (show && !isNaN(banner.scrollPercentage) && banner.scrollPercentage > 0) {\n        const checkScroll = () => {\n          if (getScrollPercentage() >= banner.scrollPercentage || banner.scrollPercentage === 0) {\n            window.removeEventListener('scroll', checkScroll);\n            finalizeShow().then(resolve);\n          }\n        };\n        window.addEventListener('scroll', checkScroll);\n        checkScroll();\n      } else if (show && !isNaN(banner.scrollPixels) && banner.scrollPixels > 0) {\n        const checkScroll = () => {\n          if (getScrollPixels() >= banner.scrollPixels || banner.scrollPixels === 0) {\n            window.removeEventListener('scroll', checkScroll);\n            finalizeShow().then(resolve);\n          }\n        };\n        window.addEventListener('scroll', checkScroll);\n        checkScroll();\n      } else {\n        finalizeShow().then(resolve);\n      }\n    });\n  };\n\n  showWebBannerById(bannerId, testId) {\n    const bannerParam = (this.config.webBanners || []).find((currentBanner) => currentBanner._id === bannerId);\n    if (!bannerParam) {\n      log.warn('cleverPushWebBannerId parameter given but banner with that ID could not be found');\n      return;\n    }\n\n    let bannerShown = false;\n    import('./webBanner').then(({ default: WebBanner }) => {\n      let banner = bannerParam;\n      if (banner.tests) {\n        if (testId) {\n          const testIndex = banner.tests.findIndex((test) => test.id === testId);\n          if (testIndex > -1) {\n            banner = { ...banner, ...banner.tests[testIndex], testId: `variant_${testIndex}:${banner.tests[testIndex]?.id}` };\n          }\n        } else {\n          banner = getRandomTestVariant(banner);\n        }\n      }\n\n      const finalizeShow = () => {\n        if (bannerShown) {\n          return;\n        }\n\n        bannerShown = true;\n\n        const webBanner = new WebBanner(banner, this.config, this.subscriptionManager, this.api, this.log, this.trigger);\n        webBanner.show();\n\n        if (!this.webBanners) {\n          this.webBanners = [];\n        }\n        this.webBanners.push(webBanner);\n      };\n\n      if (!isNaN(banner.scrollPercentage) && banner.scrollPercentage > 0) {\n        const checkScroll = () => {\n          if (getScrollPercentage() >= banner.scrollPercentage || banner.scrollPercentage === 0) {\n            window.removeEventListener('scroll', checkScroll);\n            finalizeShow();\n          }\n        };\n        window.addEventListener('scroll', checkScroll);\n        checkScroll();\n      } else if (!isNaN(banner.scrollPixels) && banner.scrollPixels > 0) {\n        const checkScroll = () => {\n          if (getScrollPixels() >= banner.scrollPixels || banner.scrollPixels === 0) {\n            window.removeEventListener('scroll', checkScroll);\n            finalizeShow();\n          }\n        };\n        window.addEventListener('scroll', checkScroll);\n        checkScroll();\n      } else {\n        finalizeShow();\n      }\n    });\n  }\n\n  initWebBanners() {\n    logMethodCall('initWebBanners');\n\n    const storageKey = 'cleverpush-webbanners-shown';\n    const previousClickBannerKey = 'cleverpush-banner-opened';\n    const shownWebBannersStorage = localStorage.getItem(storageKey);\n    const previousClickBanner = localStorage.getItem(previousClickBannerKey);\n\n    let shownWebBanners;\n    if (shownWebBannersStorage) {\n      try {\n        shownWebBanners = JSON.parse(shownWebBannersStorage);\n      } catch (error) {\n        log.info('error parsing JSON', error);\n      }\n    }\n    if (!shownWebBanners) {\n      shownWebBanners = [];\n    }\n    const shownWebBannersSessionStorage = sessionStorage.getItem(storageKey);\n    if (shownWebBannersSessionStorage) {\n      try {\n        shownWebBanners = shownWebBanners.concat(JSON.parse(shownWebBannersSessionStorage));\n      } catch (error) {\n        log.info('error parsing JSON', error);\n      }\n    }\n\n    if (previousClickBanner) {\n      try {\n        shownWebBanners = shownWebBanners.concat(JSON.parse(previousClickBanner));\n      } catch (error) {\n        log.info('error parsing JSON', error);\n      }\n    }\n\n    this.webBanners = this.webBanners || [];\n\n    let hasExitIntent = false;\n    const shownBanner = false;\n    let banners = (this.config.webBanners || []).filter((banner) => !shownWebBanners.includes(banner._id) && banner.status !== 'draft');\n    const bannersWithSelectedBehaviour = banners.filter((banner) => banner.multipleBannersBehaviour && banner.multipleBannersBehaviour !== 'default');\n    if (banners.length) {\n      import('./webBanner').then(({ default: WebBanner }) => {\n        if (bannersWithSelectedBehaviour.length) {\n          banners = bannersWithSelectedBehaviour;\n        }\n        banners.forEach(async (bannerParam) => {\n          const banner = getRandomTestVariant(bannerParam);\n          const webBanner = new WebBanner(banner, this.config, this.subscriptionManager, this.api, this.log, this.trigger);\n          const bypassExitIntent = this.isMobile && banner.enableRegularDisplayForMobile && !banner.exitIntentForMobile;\n          if (\n            (!banner.startsAt || (new Date(banner.startsAt) < new Date()))\n            && (!banner.endsAt || new Date(banner.endsAt) > new Date())\n          ) {\n            if (sessionStorage.getItem(SESSION_BANNER_DISPLAY_KEY) && banner.multipleBannersBehaviour === BANNER_BEHAVIOUR_PER_SESSION) {\n              return;\n            }\n\n            if (banner.exitIntent && !bypassExitIntent) {\n              if (hasExitIntent) {\n                return;\n              }\n\n              if (!(await matchElementPathAndDomain(!shownBanner, banner, true))) {\n                return;\n              }\n\n              if (this.isMobile && banner.exitIntentForMobile && !banner.enableRegularDisplayForMobile) {\n                this.initMobileExitIntentListeners(WEB_BANNER, shownBanner, banner, webBanner, shownWebBanners, storageKey);\n              }\n\n              hasExitIntent = true;\n\n              this.initElementExitIntentListener(WEB_BANNER, shownBanner, banner, webBanner, shownWebBanners, storageKey);\n            } else {\n              this.shouldShowBanner(shownBanner, banner).then((show) => {\n                if (show) {\n                  this.setBannerSessionKey(banner, SESSION_BANNER_DISPLAY_KEY);\n\n                  setTimeout(() => {\n                    this.displayElement(webBanner, shownWebBanners, banner, storageKey, Event.BANNER_SHOWN);\n                  }, (banner.timeout || 0) * 1000);\n                }\n              });\n            }\n          }\n          this.webBanners.push(webBanner);\n        });\n      });\n    }\n\n    let params;\n    if (typeof URLSearchParams !== 'undefined' && location.search && location.search.length) {\n      params = new URLSearchParams(location.search.slice(1));\n      if (params.get('cleverPushWebBannerId')) {\n        const [bannerId, testId] = params.get('cleverPushWebBannerId').split('-');\n        this.showWebBannerById(bannerId, testId);\n      }\n    }\n\n    // App Download Smart Banners\n    const forceAppDownloadBanner = params && params.get('cleverPushAppDownloadBanner') === 'true';\n    if (\n      (\n        this.config.appDownloadBanner?.enabled\n        && !isWebView()\n        && (\n          (this.config.appDownloadBanner.androidId && this.config.appDownloadBanner.androidEnabled && os.name === 'Android')\n          || (this.config.appDownloadBanner.appleId && this.config.appDownloadBanner.iosEnabled && os.name === 'iOS')\n        )\n      ) || forceAppDownloadBanner\n    ) {\n      const isBannerShown = localStorage.getItem('cleverpush-app-download-banner-shown');\n      const appDownloadBanner = this.config.appDownloadBanner;\n      const bannerSettings = this.config.appDownloadBanner.settings || {};\n      if (isBannerShown && !forceAppDownloadBanner) {\n        return;\n      }\n      import('./appDownloadBanner/appDownloadBanner').then(({ shouldShowAppDownloadBanner }) => {\n        shouldShowAppDownloadBanner(isBannerShown, appDownloadBanner, bannerSettings, this.config, this.subscriptionManager, this.api);\n      });\n    }\n\n    // iOS Add To Home Screen banner\n    // Shows for iOS Safari 16.4+ (as Web Push is supported starting this version)\n    const forceHomeScreenBanner = params && params.get('cleverPushHomeScreenBanner') === 'true';\n    if (\n      (\n        this.config.homeScreenBanner?.enabled\n        && !isWebView()\n        && os.name === 'iOS'\n        && browser.name === 'Mobile Safari'\n        && (browserVersion > 16 || (browserVersion === 16 && browserSubVersion >= 4))\n        && !window.matchMedia('(display-mode: standalone)').matches // check if not already in PWA\n      ) || forceHomeScreenBanner\n    ) {\n      const isBannerShown = localStorage.getItem('cleverpush-home-screen-banner-shown');\n      const homeScreenBanner = this.config.homeScreenBanner;\n      const bannerSettings = this.config.homeScreenBanner.settings || {};\n      if (isBannerShown && !forceHomeScreenBanner) {\n        return;\n      }\n      import('./homeScreenBanner/homeScreenBanner').then(({ shouldShowHomeScreenBanner }) => {\n        shouldShowHomeScreenBanner(isBannerShown, homeScreenBanner, bannerSettings, this.config, this.api);\n      });\n    }\n  }\n\n  enableWebBanners() {\n    if (!this.webBannersDisabled) {\n      return;\n    }\n    this.webBannersDisabled = false;\n    this.initWebBanners();\n  }\n\n  disableWebBanners() {\n    this.webBannersDisabled = true;\n    /**\n     * Enabling / disabling app banners works for exit-intent right now\n     * In the future we might need to cache the pending banners into an array and show them once enableAppBanners is called again.\n     */\n    this.pendingWebBanners = [];\n\n    if (this.elementExitIntentListener) {\n      this.elementExitIntentListener.disable();\n      this.elementExitIntentListener = null;\n    }\n  }\n\n  initMobileExitIntentListeners(elementType, shownElement, element, elementHTML, shownElements, storageKey) {\n    const backButtonExitIntentAllowed = this.isMobile && element.exitIntentForMobile && element.backButtonForMobileExitIntent;\n    const scrollingExitIntentAllowed = this.isMobile && element.exitIntentForMobile && element.scrollingForMobileExitIntent;\n\n    let backButtonPressed = false;\n    let exitIntentTriggered = false;\n\n    const tryToShowBanner = async () => {\n      if (exitIntentTriggered) {\n        return;\n      }\n      exitIntentTriggered = true;\n\n      let show = !shownElement;\n\n      if (elementType !== OPT_INS) {\n        show = await matchElementPathAndDomain(show, element);\n      }\n\n      const displayDocument = {\n        webBanner: Event.BANNER_SHOWN,\n        widget: Event.WIDGET_SHOWN,\n        optIns: Event.OPTIN_SHOWN\n      }[elementType];\n\n      if (!displayDocument) {\n        return;\n      }\n\n      if (elementType === OPT_INS) {\n        this.triggerOptIn(true);\n      }\n\n      if (show) {\n        this.displayElement(elementHTML, shownElements, element, storageKey, displayDocument);\n      }\n    };\n\n    const checkMobileScrollingPosition = (function () {\n      let lastPosition;\n      let timer;\n      let delta;\n\n      const delay = MOBILE_SCROLL_POSITION_DELAY_VALUE;\n\n      function clearMobileScrollPosition() {\n        lastPosition = null;\n        delta = 0;\n      }\n\n      clearMobileScrollPosition();\n\n      return () => {\n        const newPosition = window.scrollY;\n        if (lastPosition != null) {\n          delta = newPosition - lastPosition;\n        }\n\n        lastPosition = newPosition;\n        clearTimeout(timer);\n        timer = setTimeout(clearMobileScrollPosition, delay);\n\n        return delta;\n      };\n    }());\n\n    const checkScrollSpeed = () => {\n      const delta = checkMobileScrollingPosition();\n      if (backButtonPressed || delta < MOBILE_DELTA_VALUE) {\n        tryToShowBanner();\n      }\n    };\n\n    const onBackButton = () => {\n      backButtonPressed = true;\n\n      if (location.hash !== MOBILE_EXIT_INTENT_LOCATION_HASH) {\n        return;\n      }\n\n      history.replaceState(null, document.title, location.pathname);\n\n      tryToShowBanner();\n    };\n\n    history.replaceState(null, document.title, `${location.pathname}${MOBILE_EXIT_INTENT_LOCATION_HASH}`);\n    history.pushState(null, document.title, location.pathname);\n    if (scrollingExitIntentAllowed) {\n      window.addEventListener('scroll', checkScrollSpeed);\n    }\n\n    if (backButtonExitIntentAllowed) {\n      window.addEventListener('popstate', onBackButton);\n    }\n\n    return backButtonPressed;\n  }\n\n  initElementExitIntentListener(elementType, shownElement, elementHTML, element, shownElements, storageKey) {\n    import('ouibounce').then(({ default: ouibounce }) => {\n      if (this.webBannersDisabled && elementType === WEB_BANNER) {\n        return;\n      }\n      this.elementExitIntentListener = ouibounce(null, {\n        aggressive: true,\n        callback: async () => {\n          let show = !shownElement;\n          show = await matchElementPathAndDomain(show, element);\n\n          if (show) {\n            if (elementType === WEB_BANNER) {\n              this.setBannerSessionKey(elementHTML, SESSION_BANNER_DISPLAY_KEY);\n            }\n            this.displayElement(element, shownElements, elementHTML, storageKey, (elementType === WEB_BANNER ? Event.BANNER_SHOWN : Event.WIDGET_SHOWN));\n          }\n        }\n      });\n    });\n  }\n\n  markElementAsShown(shownWebBanners, banner, storageKey) {\n    if (banner.frequency === 'once') {\n      shownWebBanners.push(banner._id);\n      localStorage.setItem(storageKey, JSON.stringify(shownWebBanners));\n    } else if (banner.frequency === 'oncePerSession') {\n      shownWebBanners.push(banner._id);\n      sessionStorage.setItem(storageKey, JSON.stringify(shownWebBanners));\n    } else if (banner.frequency === 'everyXSessions') {\n      const sessions = parseInt(localStorage.getItem(`${storageKey}-sessions`), 10) || 0;\n      if (sessions >= banner.frequencyInterval) {\n        localStorage.removeItem(`${storageKey}-sessions`);\n        sessionStorage.removeItem(`${storageKey}-counted`);\n        shownWebBanners.splice(shownWebBanners.indexOf(banner._id), 1);\n      } else {\n        localStorage.setItem(`${storageKey}-sessions`, `${sessions + 1}`);\n        sessionStorage.setItem(`${storageKey}-counted`, 'true');\n        if (!shownWebBanners.includes(banner._id)) {\n          shownWebBanners.push(banner._id);\n        }\n      }\n      localStorage.setItem(storageKey, JSON.stringify(shownWebBanners));\n    }\n  }\n\n  /**\n   * This function will dislay Web Banner and updates local/session storage\n   *\n   * @function\n   * @param {object} webBanner\n   * @param {Array.<String>} shownWebBanners\n   * @param {object} banner\n   * @param {String} storageKey\n   */\n  displayElement(element, shownElements, elementHTML, storageKey, event) {\n    element.show();\n    this.markElementAsShown(shownElements, elementHTML, storageKey);\n    this.trigger(event, {\n      bannerId: elementHTML?._id,\n      testId: elementHTML?.testId,\n    });\n  }\n\n  initTags() {\n    const init = () => {\n      this.subscriptionManager.storageManager.getTags().then((storedTags) => {\n        const tags = this.config.channelTags;\n        checkTags(tags, storedTags, this.tagSubscription.bind(this), this.waitForSubscription.bind(this), location.pathname);\n      });\n    };\n\n    if (\n      !this.config.trackTagsOnlyWhenTopicEnabled\n      || !this.config.trackTagsOnlyWhenTopicEnabledIds.length\n    ) {\n      init();\n      return;\n    }\n\n    this.subscriptionManager.storageManager.getTopics().then((storedTopics) => {\n      if (this.config.trackTagsOnlyWhenTopicEnabledIds.every((topicId) => storedTopics.includes(topicId))) {\n        init();\n        return;\n      }\n\n      // recursive check if we can now init the tags if topics have been changed\n      this.once(Event.TOPICS_SET, this.initTags);\n    });\n  }\n\n  initAttributes() {\n    (this.config.customAttributes || []).forEach((attribute) => {\n      if (!attribute.javascriptFunctionEnabled || !attribute.javascriptFunction) {\n        return;\n      }\n\n      try {\n        const value = eval(attribute.javascriptFunction);\n        if (typeof value === 'object' && value.then) {\n          try {\n            value.then((result) => {\n              this.setAttribute(attribute.id, result);\n            });\n          } catch (err) {\n            log.debug(err);\n          }\n        } else if (typeof value !== 'undefined') {\n          this.setAttribute(attribute.id, value);\n        }\n      } catch (ignored) { }\n    });\n\n    if (this.config.confirmAlertSelectAttributesLater) {\n      import('./selectAttributes').then(({ default: SelectAttributes }) => {\n        this.selectAttributes = new SelectAttributes(this.config, this);\n        this.subscriptionManager.isSubscribed().then((isSubscribed) => {\n          if (isSubscribed) {\n            this.selectAttributes.init();\n          } else {\n            this.on(Event.SUBSCRIBED, () => {\n              this.selectAttributes.init();\n            });\n          }\n        });\n      });\n    }\n  }\n\n  /**\n   * Show the topic layer for one topic\n   * @param {*} topicParam Topic ID or Object\n   * @param {*} optionsParam Options which can have `frequencyCappingVisits` setting\n   */\n  showTopicLayer(topicParam, optionsParam) {\n    this.waitForSubscription().then(() => {\n      this.subscriptionManager.storageManager.getTopics().then((storedTopics) => {\n        const topics = this.config.channelTopics || [];\n        const topic = typeof topicParam === 'string' ? topics.find((currentTopic) => currentTopic._id === topicParam) : topicParam;\n        if (!topic) {\n          return;\n        }\n\n        // User already has subscribed to topic\n        if (storedTopics.includes(topic._id)) {\n          return;\n        }\n\n        const topicLayerShownKey = `cleverpush-topic-layerShown-${topic._id}`;\n        const visitsStorageKey = `cleverpush-topic-layer-visits-${topic._id}`;\n\n        // If options.frequencyCappingVisits is given and user has already seen layer before:\n        // wait until minimum visis are reached\n        let frequencyCappingVisits;\n        if (typeof optionsParam !== 'undefined' && optionsParam.frequencyCappingVisits) {\n          frequencyCappingVisits = optionsParam.frequencyCappingVisits;\n          const layerShown = !!localStorage.getItem(topicLayerShownKey);\n          if (layerShown) {\n            const currentVisits = parseInt(localStorage.getItem(visitsStorageKey), INT_RADIX) || TOPIC_LAYER_VISITS_DEFAULT;\n            // increment visits (localStorage only accepts strings)\n            localStorage.setItem(visitsStorageKey, `${currentVisits + 1}`);\n            // if visits are lower then minimum needed visits, exit here\n            if (currentVisits < frequencyCappingVisits) {\n              return;\n            }\n            localStorage.removeItem(visitsStorageKey);\n          }\n        }\n\n        logMethodCall('showTopicLayer', topicParam);\n\n        // I18n for the layer\n        const customLocalization = {\n          title: topic.layerTitle || `Möchtest du Neuigkeiten zu ${topic.name} erhalten?`,\n          deny: topic.layerDenyText || 'Nein',\n          allow: topic.layerAllowText || 'Ja',\n          info: topic.layerInfo || ' '\n        };\n        Object.keys(customLocalization).forEach((key) => {\n          if (typeof customLocalization[key] === 'undefined') {\n            delete customLocalization[key];\n          }\n        });\n\n        const hasChildTopics = topics.filter((childTopic) => childTopic.parentTopic === topic._id).length > 0;\n        const layerTheme = topic.layerTheme || this.config.layerTheme || this.config.confirmAlertSelectTopicsLaterTheme || 'cleverpush-confirm-default';\n\n        this.waitForConfirmAvailable().then(() => {\n          this.subscriptionManager.confirm.appendConfirmBox(layerTheme, hasChildTopics, {\n            topicsLayer: true,\n            customLocalization,\n            parentTopic: topic._id,\n            topicsRadioButtons: topic.childTopicsRadioButtons,\n            topicsRequired: topic.childTopicsRequired\n          }, (allowed, selectedTopics) => {\n            if (allowed && selectedTopics) {\n              this.setTopics([...new Set([...storedTopics, ...selectedTopics, topic._id])]);\n              localStorage.setItem(topicLayerShownKey, `${Date.now()}`);\n            } else if (!frequencyCappingVisits) {\n              sessionStorage.setItem(topicLayerShownKey, `${Date.now()}`);\n            } else {\n              localStorage.setItem(topicLayerShownKey, `${Date.now()}`);\n            }\n          });\n        });\n      });\n    });\n  }\n\n  initTopics() {\n    this.waitForSubscription().then(() => {\n      this.subscriptionManager.storageManager.getTopics().then((storedTopics) => {\n        const topics = this.config.channelTopics;\n        if (!topics?.length || typeof localStorage === 'undefined') {\n          return;\n        }\n\n        let topicFound = false;\n        topics.forEach((topic) => {\n          const topicLayerShownKey = `cleverpush-topic-layerShown-${topic._id}`;\n          const visitsStorageKey = `cleverpush-topic-layer-visits-${topic._id}`;\n\n          let topicMatches = topic.layerMatchPath && new RegExp(topic.layerMatchPath).test(location.pathname);\n          if (topic.layerFunction && topicMatches) {\n            try {\n              topicMatches = !!eval(topic.layerFunction);\n            } catch (err) {\n              log.debug(err);\n            }\n          }\n\n          if (\n            topic.layerEnabled\n            && !localStorage.getItem(topicLayerShownKey)\n            && !sessionStorage.getItem(topicLayerShownKey)\n            && !storedTopics.includes(topic._id)\n            && topicMatches\n          ) {\n            if (topicFound) {\n              return;\n            }\n\n            this.subscriptionManager.triggerEvent(Event.TOPICS_LAYER_SHOWN, topic._id);\n\n            const finalizeShow = () => {\n              this.showTopicLayer(topic);\n            };\n\n            const show = () => {\n              topicFound = true;\n\n              if (!isNaN(topic.layerScrollPercentage) && topic.layerScrollPercentage > 0) {\n                const checkScroll = () => {\n                  if (getScrollPercentage() >= topic.layerScrollPercentage) {\n                    window.removeEventListener('scroll', checkScroll);\n                    finalizeShow();\n                  }\n                };\n                window.addEventListener('scroll', checkScroll);\n                checkScroll();\n              } else {\n                finalizeShow();\n              }\n            };\n\n            const visitsNeeded = !isNaN(topic.layerMinimumVisits) ? topic.layerMinimumVisits : 0;\n            const visitsStorage = localStorage;\n            const visitsStr = visitsStorage.getItem(visitsStorageKey);\n            let visits = 0;\n            if (typeof visitsStr === 'string' && !isNaN(visitsStr)) {\n              visits = parseInt(visitsStr, INT_RADIX);\n            }\n            if (visits >= visitsNeeded) {\n              if (!isNaN(topic.layerTimeout) && topic.layerTimeout) {\n                setTimeout(() => {\n                  show();\n                }, topic.layerTimeout * 1000);\n              } else {\n                show();\n              }\n            } else {\n              visits += 1;\n              visitsStorage.setItem(visitsStorageKey, visits.toString());\n            }\n          }\n        });\n      });\n    });\n  }\n\n  initConversions() {\n    (this.config.channelEvents || []).forEach((event) => {\n      const trackConversion = () => {\n        if (event.amountFunction) {\n          try {\n            const amount = eval(event.amountFunction);\n            this.trackConversion(event._id, amount);\n            return;\n          } catch (err) {\n            log.debug(err);\n          }\n        }\n        this.trackConversion(event._id);\n      };\n\n      if (event && event._id) {\n        if (event.triggerType === 'path' && event.triggerPath && triggerPathAndQuery(event.triggerPath)) {\n          trackConversion();\n        } else if (event.triggerType === 'function' && event.triggerFunction) {\n          try {\n            const trigger = !!eval(event.triggerFunction);\n            if (trigger) {\n              trackConversion();\n            }\n          } catch (err) {\n            log.debug(err);\n          }\n        } else if (event.triggerType === 'selector' && event.triggerSelector) {\n          const triggerElements = document.querySelectorAll(event.triggerSelector);\n          for (let triggerElementIndex = 0; triggerElementIndex < triggerElements.length; triggerElementIndex += 1) {\n            const triggerElement = triggerElements[triggerElementIndex];\n            if (triggerElement) {\n              triggerElement.addEventListener('click', () => {\n                trackConversion();\n              }, true);\n            }\n          }\n        }\n      }\n    });\n  }\n\n  initPiano() {\n    onPianoEnabledChange(() => {\n      if (this.subscriptionManager) {\n        this.subscriptionManager.isSubscribed().then((isSubscribed) => {\n          if (isSubscribed) {\n            this.subscriptionManager.sync().then(() => {\n              log.debug('Piano Opt-Out');\n            });\n          }\n        });\n      }\n    });\n  }\n\n  initTcf() {\n    if (!this.config.tcfAutoUnsubscribe) {\n      return;\n    }\n\n    this.waitForInit().then(() => {\n      import('./utils/tcf').then(({ default: initTcf }) => {\n        initTcf(this.subscriptionManager);\n      });\n    });\n  }\n\n  initDuplicateSubscriptions() {\n    const { duplicateChannels } = this.config;\n    if (!duplicateChannels || !duplicateChannels.length) {\n      return;\n    }\n\n    this.subscriptionManager.getSubscriptionId().then((subscriptionId) => {\n      if (!subscriptionId) {\n        return;\n      }\n\n      import('./utils/duplicates').then(({ default: initDuplicates }) => {\n        initDuplicates(this.config, this.api, subscriptionId);\n      });\n    });\n  }\n\n  initAutoUnsubscribeDuplicateSubscriptions(subscriptionId, iframeSubscriptionId) {\n    const { autoUnsubscribeDuplicateSubscriptions } = this.config;\n    if (!autoUnsubscribeDuplicateSubscriptions) {\n      return;\n    }\n\n    if (subscriptionId === iframeSubscriptionId || !iframeSubscriptionId) {\n      return;\n    }\n\n    import('./utils/autoUnsubscribeDuplicates').then(({ default: initDuplicates }) => {\n      initDuplicates(this.config, this.api, this.subscriptionManager, subscriptionId, iframeSubscriptionId);\n    });\n  }\n\n  async updateSpeechbubblePanelUnread() {\n    const specialLinks = document.querySelectorAll(\"a[href='#cleverpush-bell-speechbubble']\");\n    if (specialLinks.length) {\n      let unread;\n      try {\n        const isSubscribed = await this.subscriptionManager.isSubscribed();\n        const notificationCount = Number(localStorage.getItem(KEY_UNREAD_NOTIFICATIONS_COUNT));\n        if (isSubscribed) {\n          if (!sessionStorage.getItem(KEY_SPEECHBUBBLE_UNREAD_NOTIFICATIONS)) {\n            unread = await this.hasUnreadNotifications();\n            sessionStorage.setItem(KEY_SPEECHBUBBLE_UNREAD_NOTIFICATIONS, unread);\n          } else if (notificationCount) {\n            unread = true;\n          }\n        }\n        specialLinks.forEach((link) => {\n          const existingCounter = link.querySelector('.cleverpush-unread-notifications-count');\n          if (existingCounter) {\n            existingCounter.parentNode.removeChild(existingCounter);\n          }\n          if (unread && isSubscribed) {\n            link.classList.add(KEY_HAS_UNREAD_NOTIFICATIONS);\n            if (notificationCount) {\n              this.appendCounterElement(link);\n            }\n          } else {\n            link.classList.remove(KEY_HAS_UNREAD_NOTIFICATIONS);\n          }\n        });\n      } catch (err) {\n        console.info('Error while fetching notifications');\n      }\n    }\n  }\n\n  appendCounterElement(link) {\n    const count = localStorage.getItem(KEY_UNREAD_NOTIFICATIONS_COUNT);\n    const counterEl = parent.document.createElement('span');\n    counterEl.className = 'cleverpush-unread-notifications-count';\n    counterEl.innerText = count;\n    link.appendChild(counterEl);\n  }\n\n  async initSpeechbubblePanels() {\n    const specialLinks = document.querySelectorAll(\"a[href='#cleverpush-bell-speechbubble']\");\n    if (specialLinks.length) {\n      try {\n        this.updateSpeechbubblePanelUnread();\n        this.on(Event.SUBSCRIBED, () => this.updateSpeechbubblePanelUnread());\n        this.on(Event.UNSUBSCRIBED, () => this.updateSpeechbubblePanelUnread());\n\n        specialLinks.forEach((link) => {\n          link.addEventListener('click', async (e) => {\n            e.preventDefault();\n            const isSubscribed = await this.subscriptionManager.isSubscribed();\n            if (isSubscribed) {\n              this.showSpeechbubbleInlinePanel(link);\n            } else {\n              this.triggerOptIn(true, (err) => {\n                if (err) {\n                  if (link.classList.contains(KEY_HAS_UNREAD_NOTIFICATIONS)) {\n                    link.classList.remove(KEY_HAS_UNREAD_NOTIFICATIONS);\n                  }\n                }\n              });\n            }\n          });\n        });\n      } catch (error) {\n        log.error('Error while initializing speechbubble panels', error);\n      }\n    }\n  }\n\n  async getNotifications(callback) {\n    const userIsSubscribed = await new Promise((resolve) => {\n      this.isSubscribed((isSubscribed) => {\n        resolve(isSubscribed);\n      });\n    });\n    const hasNotificationsStoredInBrowserDb = await this.subscriptionManager.hasNotificationsStoredInBrowserDb();\n\n    if (userIsSubscribed && hasNotificationsStoredInBrowserDb) {\n      this.getDeliveredNotifications(callback);\n      return;\n    }\n\n    this.getRemoteNotifications(callback);\n  }\n\n  getDeliveredNotifications(callback) {\n    this.subscriptionManager.getDeliveredNotifications().then((notifications) => {\n      callback?.(notifications);\n    });\n  }\n\n  getRemoteNotifications(callback) {\n    this.subscriptionManager.getStoredNotifications().then((notifications) => {\n      callback?.(notifications);\n    });\n  }\n\n  // Return true if we have unread notifications\n  hasUnreadNotifications() {\n    return new Promise((resolve, reject) => {\n      this.subscriptionManager.getStoredNotifications().then((notifications) => {\n        const storageManager = this.subscriptionManager.storageManager;\n        if (!storageManager.checkUnreadNotifications) {\n          resolve(false);\n          return;\n        }\n        const unread = storageManager.checkUnreadNotifications(notifications);\n        resolve(unread);\n      }).catch((err) => {\n        reject(new Error(err));\n      });\n    });\n  }\n\n  showSpeechbubbleInlinePanel(specialLink) {\n    if (!this.panel) {\n      import('./panel').then(({ default: Panel }) => {\n        this.panel = new Panel(this.config, this.subscriptionManager, this.trigger.bind(this), this.api);\n        this.panel.showSpeechbubblePanel(specialLink);\n      });\n    } else {\n      this.panel.showSpeechbubblePanel(specialLink);\n    }\n  }\n\n  getNotificationPermission() {\n    return this.waitForInit().then(() => new Promise((resolve) => {\n      if (this.config.ownDomain && location.protocol === 'https:') {\n        if (this.browserType === 'safari') {\n          if (this.config.safariWebsitePushId) {\n            resolve(window.safari.pushNotification.permission(this.config.safariWebsitePushId).permission);\n          } else {\n            log.debug('Safari website push ID is unknown.');\n          }\n        } else if (this.browserType === 'facebook' || this.browserType === 'wallet') {\n          resolve('default');\n        } else {\n          resolve(window.Notification.permission);\n        }\n      } else {\n        this.iframeMessenger.message(Command.REMOTE_NOTIFICATION_PERMISSION, null, (reply) => {\n          const remoteNotificationPermission = reply.data;\n          resolve(remoteNotificationPermission);\n        });\n      }\n    }));\n  }\n\n  push(item) {\n    if (typeof (item) === 'function') {\n      item();\n    } else if (typeof (item) === 'string') {\n      this.push(arguments);\n    } else {\n      const functionName = item.shift();\n      this[functionName].apply(this, item);\n    }\n  }\n\n  executeFunction() {\n    let args = [];\n    if (arguments && typeof arguments[0] === 'object') {\n      args = arguments[0];\n    } else {\n      args = arguments;\n    }\n    const fn = this[args[0]];\n    if (typeof fn === 'function') {\n      fn.apply(this, Array.prototype.slice.call(args, 1));\n    }\n  }\n\n  waitForInit() {\n    return new Promise((resolve, reject) => {\n      if (this.initFailed) {\n        reject(this.initError);\n      } else if (!this.initialized) {\n        this.once(Event.INITIALIZED, resolve);\n        this.once(Event.INITIALIZATION_FAILED, reject);\n      } else {\n        resolve();\n      }\n    });\n  }\n\n  waitForConfigAvailable() {\n    return new Promise((resolve) => {\n      if (!this.configLoaded) {\n        this.once(Event.CONFIG_AVAILABLE, resolve);\n      } else {\n        resolve();\n      }\n    });\n  }\n\n  waitForConfirmAvailable() {\n    return this.waitForInit().then(() => new Promise((resolve) => {\n      if (!this.confirm) {\n        this.once(Event.CONFIRM_AVAILABLE, resolve);\n      } else {\n        resolve();\n      }\n    }));\n  }\n\n  waitForSubscription() {\n    return new Promise((resolve, reject) => {\n      this.waitForInit().then(() => {\n        const resolveId = (retry) => {\n          this.subscriptionManager.getSubscriptionId().then((subscriptionId) => {\n            if (subscriptionId || retry) {\n              resolve(subscriptionId);\n            } else {\n              this.once(Event.SUBSCRIBED, () => resolveId(true));\n            }\n          });\n        };\n\n        if (this.urlSession) {\n          resolveId();\n          return;\n        }\n\n        this.subscriptionManager.isSubscribed().then((isSubscribed) => {\n          if (isSubscribed) {\n            resolveId();\n          } else {\n            this.once(Event.SUBSCRIBED, resolveId);\n          }\n        });\n      }).catch(reject);\n    });\n  }\n\n  waitForBell() {\n    return this.waitForInit().then(() => new Promise((resolve) => {\n      if (this.bell) {\n        resolve();\n      } else {\n        this.once(Event.BELL_READY, resolve);\n      }\n    }));\n  }\n\n  isSubscribed(callback) {\n    return this.waitForInit().then(() => this.subscriptionManager.isSubscribed().then((isSubscribed) => callback(isSubscribed))).catch(() => callback(false));\n  }\n\n  getSubscriptionId(callback) {\n    return this.waitForInit().then(() => {\n      this.subscriptionManager.isSubscribed().then((isSubscribed) => {\n        if (isSubscribed) {\n          this.subscriptionManager.getSubscriptionId().then((subscriptionId) => {\n            callback(subscriptionId);\n          });\n        } else {\n          callback(false);\n        }\n      });\n    }).catch(() => {\n      callback(false);\n    });\n  }\n\n  subscribe(callback) {\n    if (this.initialized) {\n      return this.subscriptionManager.subscribe().then(() => this.subscriptionManager.getSubscriptionId().then((subscriptionId) => callback(false, subscriptionId))).catch((error) => callback(error));\n    }\n    return this.waitForInit().then(() => this.subscriptionManager.subscribe().then(() => this.subscriptionManager.getSubscriptionId().then((subscriptionId) => callback(false, subscriptionId)))).catch((error) => callback(error));\n  }\n\n  checkAutoBalanceShouldShowAlert = (optInRate, minimumOptInRate) => {\n    const minPercentToAlwaysShowNativeOptInDirectly = minimumOptInRate * 2;\n    const minPercentNecessaryToShowNativeOptInDirectly = minimumOptInRate * 1.05;\n    let chanceToDirectlyShowNativeOptIn = (100 / Math.pow(minPercentToAlwaysShowNativeOptInDirectly - minPercentNecessaryToShowNativeOptInDirectly, 2)) * Math.pow(optInRate - minPercentNecessaryToShowNativeOptInDirectly, 2);\n    chanceToDirectlyShowNativeOptIn = chanceToDirectlyShowNativeOptIn || 0;\n    // Make sure its between 0 and 100\n    chanceToDirectlyShowNativeOptIn = Math.max(0, Math.min(100, chanceToDirectlyShowNativeOptIn));\n    if (Math.random() * 100 <= chanceToDirectlyShowNativeOptIn) {\n      // show native opt in directly\n      return true;\n    }\n    return false;\n  };\n\n  triggerOptIn(firstArg, secondArg) {\n    logMethodCall('triggerOptIn', firstArg, secondArg);\n\n    const callbackParam = typeof secondArg === 'function' ? secondArg : firstArg;\n    const forceSubscribe = typeof firstArg === 'boolean' && firstArg;\n\n    const callback = typeof callbackParam === 'function' ? callbackParam : (err) => {\n      if (err) {\n        if (err.reason === 'unsubscribed' || err.reason === 'subscribed') {\n          log.info(err.message || err);\n        } if (err.reason === 'unsupported-browser' || err.reason === 'private-mode' || err.reason === 'already-initialized' || err.reason === 'init-already-called' || err.reason === 'unsubscribed') {\n          log.warn(err.message || err);\n        } else {\n          log.error(err.message || err);\n        }\n      }\n    };\n\n    const checkIfCanSubscribe = () => {\n      if (forceSubscribe) {\n        return Promise.resolve(true);\n      }\n      return this.subscriptionManager.canSubscribe();\n    };\n\n    return this.waitForConfirmAvailable().then(() => {\n      const successCallback = () => {\n        this.subscriptionManager.getSubscriptionId().then((subscriptionId) => {\n          callback(false, subscriptionId);\n        });\n      };\n\n      checkIfCanSubscribe().then(async (canSubscribe) => {\n        if (canSubscribe === true) {\n          const notificationPermission = await this.subscriptionManager.getNotificationPermission();\n\n          if (this.confirm && (this.config.showConfirmAlert || !this.config.ownDomain || !(window.parent.location.protocol === 'https:' || window.top.location.hostname === 'localhost'))) {\n            log.debug('this.confirm.show 1');\n            this.confirm.setAutoHideBackdrop(notificationPermission === 'granted' || isAndroid());\n            this.confirm.show((err) => {\n              if (err) {\n                callback(err);\n              } else {\n                successCallback();\n              }\n            });\n          } else if (!this.subscriptionManager.isSubscribing) {\n            // only show backdrop if notification permission is not granted\n            // const isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n            let showBackdrop = notificationPermission === 'default' || this.config.env === 'PREVIEW'; // && !isSafari;\n            log.debug('showBackdrop', showBackdrop);\n\n            const subscribe = (subCallback) => {\n              if (this.config.env === 'PREVIEW') {\n                // don't subscribe in preview mode\n                return;\n              }\n\n              this.subscriptionManager.subscribe().then((permission) => {\n                if (typeof subCallback === 'function') {\n                  subCallback();\n                }\n\n                if (this.confirm && showBackdrop) {\n                  this.confirm.hideBackdrop(permission);\n                }\n\n                if (permission === 'denied') {\n                  if (this.confirm && this.browserType !== 'safari') {\n                    this.confirm.showDenyAlert();\n                  }\n                  callback(new CleverPushError('Permission for notifications was denied', permission));\n                } else {\n                  successCallback();\n                }\n              }).catch((err) => {\n                if (typeof subCallback === 'function') {\n                  subCallback();\n                }\n\n                if (this.confirm && showBackdrop) {\n                  this.confirm.hideBackdrop('denied');\n                }\n                callback(err);\n              });\n            };\n\n            if (this.confirm && showBackdrop) {\n              detectPrompt({\n                subscriptionManager: this.subscriptionManager,\n                config: this.config,\n                subscribe,\n                showBackdrop: () => {\n                  this.confirm.showBackdrop();\n                },\n                setShowBackdrop: (backdrop) => {\n                  showBackdrop = backdrop;\n                }\n              });\n            } else {\n              subscribe();\n            }\n          }\n\n          const existingPermission = notificationPermission === 'granted';\n          this.subscriptionManager.existingPermission = existingPermission;\n\n          if (!this.config.noExistingPermissionOptIns || !existingPermission) {\n            if (!this.optInVisitorTracked) {\n              this.optInVisitorTracked = true;\n              this.api.trackOptInVisitor();\n            }\n\n            this.api.confirmAlertShown(this.subscriptionManager.existingPermission);\n            this.trigger(Event.OPTIN_SHOWN);\n          }\n        } else {\n          callback(new CleverPushError('Can not subscribe because of an unknown error', 'cannot-subscribe'));\n        }\n      }).catch((err) => {\n        if (err && err.reason === 'subscribed') {\n          // don't throw an error if user is already subscribed\n          log.debug('running successCallback()');\n          successCallback();\n\n          // TODO: check if err.reason is 'unsubscribed' and teach user how to re-subscribe\n        } else {\n          callback(err);\n        }\n      });\n    }).catch((error) => {\n      callback(error);\n    });\n  }\n\n  unsubscribe(callbackParam, notManuallyParam) {\n    logMethodCall('unsubscribe');\n\n    const callback = typeof callbackParam === 'function' ? callbackParam : (err) => {\n      if (err) {\n        log.error(err.stack || err.message || err);\n      }\n    };\n\n    const notManually = typeof notManuallyParam === 'boolean' ? notManuallyParam : false;\n\n    this.waitForInit().then(() => {\n      this.subscriptionManager.unsubscribe(notManually).then(() => {\n        callback(false, true);\n      }).catch((err) => {\n        log.error(err);\n        callback(false);\n      });\n    });\n  }\n\n  tagSubscription(tagId, callbackParam) {\n    logMethodCall('tagSubscription', tagId);\n\n    const callback = typeof callbackParam === 'function' ? callbackParam : () => { };\n\n    this.waitForInit().then(() => {\n      if (this.subscriptionManager) {\n        this.subscriptionManager.initialTags.push(tagId);\n      }\n\n      this.waitForSubscription().then((subscriptionId) => {\n        if (tagId) {\n          this.subscriptionManager.storageManager.getTags().then((storedTags) => {\n            const tagDate = this.subscriptionManager.storageManager.getTagDate(tagId);\n            if (storedTags.indexOf(tagId) < 0 || !tagDate || tagDate.getTime() < (Date.now() - (1000 * 60 * 60 * 12))) {\n              this.subscriptionManager.storageManager.setTags([...storedTags, tagId]);\n              this.api.tagSubscription(subscriptionId, tagId).then((result) => {\n                this.trigger(Event.TAGS_SET);\n                callback(result);\n              }).catch(callback);\n            } else {\n              log.debug('tag is already in stored tags');\n            }\n          });\n        } else {\n          log.error('tag id not specified');\n        }\n      });\n    });\n  }\n\n  untagSubscription(tagId, callbackParam) {\n    logMethodCall('untagSubscription', tagId);\n\n    const callback = typeof callbackParam === 'function' ? callbackParam : () => { };\n\n    this.waitForInit().then(() => {\n      this.waitForSubscription().then((subscriptionId) => {\n        if (tagId) {\n          this.subscriptionManager.storageManager.getTags().then((storedTags) => {\n            storedTags.splice(storedTags.indexOf(tagId), 1);\n            this.subscriptionManager.storageManager.setTags(storedTags);\n          });\n          this.api.untagSubscription(subscriptionId, tagId).then((result) => {\n            this.trigger(Event.TAGS_SET);\n            callback(result);\n          }).catch(callback);\n        } else {\n          log.error('tag id not specified');\n        }\n      });\n    });\n  }\n\n  hasTag(tagId, callback) {\n    logMethodCall('hasTag', tagId);\n\n    this.waitForInit().then(() => {\n      if (tagId) {\n        this.subscriptionManager.storageManager.hasTag(tagId).then((hasTag) => {\n          if (typeof callback === 'function') {\n            callback(hasTag);\n          }\n        });\n      } else {\n        log.error('tag id not specified');\n      }\n    });\n  }\n\n  /**\n   * This fuction will match passed attribute id from channel attributes\n   *\n   * @param {String} attributeId Attribute id\n   * @param {String} attributeValue Attribute value\n   * @param {() => void} callback callback function (optional)\n   */\n  hasAttribute(attributeId, attributeValue, callback) {\n    logMethodCall('hasAttribute', attributeId);\n\n    this.waitForInit().then(() => {\n      if (attributeId) {\n        this.subscriptionManager.storageManager.hasAttribute(attributeId, attributeValue).then((hasAttribute) => {\n          if (typeof callback === 'function') {\n            callback(hasAttribute);\n          }\n        });\n      } else {\n        log.error('attribute id not specified');\n      }\n    });\n  }\n\n  setTopics(topicIds, callback) {\n    logMethodCall('setTopics', topicIds);\n\n    return this.waitForInit().then(() => {\n      if (!this.subscriptionManager) {\n        return Promise.reject();\n      }\n      this.subscriptionManager.setTopics(topicIds);\n      return this.subscriptionManager.sync().then(() => {\n        if (typeof callback === 'function') {\n          callback();\n        }\n      });\n    });\n  }\n\n  getTopics(callback) {\n    logMethodCall('getTopics');\n    if (typeof callback !== 'function') {\n      log.error('Please provide a callback function (err, topics) => {} to getTopics');\n      return Promise.reject();\n    }\n    return this.waitForInit().then(() => {\n      if (this.subscriptionManager) {\n        this.subscriptionManager.getTopics().then((topics) => {\n          callback(null, topics);\n        });\n      }\n    });\n  }\n\n  setAttribute(attributeId, valueParam, callback) {\n    logMethodCall('setAttribute', attributeId, valueParam);\n\n    let value = valueParam;\n    if (typeof value === 'object') {\n      value = JSON.stringify(value);\n    }\n\n    const sendToApi = ({ subscriptionId, alradyExists }) => {\n      if (!subscriptionId || alradyExists) {\n        return;\n      }\n\n      this.api.setSubscriptionAttribute(subscriptionId, attributeId, valueParam).then(() => {\n        if (typeof callback === 'function') {\n          callback(false, true);\n        }\n      });\n    };\n\n    const saveToStorage = () => {\n      if (localStorage.getItem(`cleverpush-attribute-${attributeId}`) === (`${value}`)) {\n        return { alreadyExists: true };\n      }\n      localStorage.setItem(`cleverpush-attribute-${attributeId}`, value);\n      return { alreadyExists: false };\n    };\n\n    this.waitForConfigAvailable().then(() => {\n      if (this.config.attributesWithoutSubscriptionEnabled) {\n        const { alreadyExists } = saveToStorage();\n        this.waitForInit().then(() => {\n          this.waitForSubscription().then((subscriptionId) => {\n            sendToApi({ subscriptionId, alreadyExists });\n          });\n        });\n      } else {\n        this.waitForInit().then(() => {\n          this.waitForSubscription().then((subscriptionId) => {\n            const { alreadyExists } = saveToStorage();\n            sendToApi({ subscriptionId, alreadyExists });\n          });\n        });\n      }\n    });\n  }\n\n  incAttribute(attributeId, incParam, callback) {\n    logMethodCall('incAttribute', attributeId, incParam);\n\n    let inc = parseInt(incParam, INT_RADIX);\n    if (isNaN(inc)) {\n      inc = 1;\n    }\n\n    let value = parseInt(localStorage.getItem(`cleverpush-attribute-${attributeId}`), INT_RADIX) || 0;\n    value += inc;\n\n    this.waitForInit().then(() => {\n      this.waitForSubscription().then((subscriptionId) => {\n        localStorage.setItem(`cleverpush-attribute-${attributeId}`, `${value}`);\n\n        this.api.setSubscriptionAttribute(subscriptionId, attributeId, value).then(() => {\n          if (typeof callback === 'function') {\n            callback(false, true);\n          }\n        });\n      });\n    });\n  }\n\n  getAttribute(attributeId, callback) {\n    logMethodCall('getAttribute', attributeId);\n\n    this.waitForInit().then(() => {\n      this.waitForSubscription().then(() => {\n        callback(localStorage.getItem(`cleverpush-attribute-${attributeId}`));\n      });\n    });\n  }\n\n  hasAttributeValue(attributeId, valueParam, callback) {\n    let value = valueParam;\n    if (typeof value === 'object') {\n      value = JSON.stringify(value);\n    }\n\n    const storageStr = localStorage.getItem(`cleverpush-attribute-${attributeId}`);\n    if (storageStr) {\n      try {\n        const array = JSON.parse(storageStr);\n        if (array && array.length) {\n          callback(array.indexOf(value) > -1);\n          return;\n        }\n      } catch (error) {\n        log.info('Error parsing attribute value', error);\n      }\n    }\n    callback(false);\n  }\n\n  pushAttributeValue(attributeId, valueParam, optionsParam, callbackParam) {\n    logMethodCall('pushAttributeValue', attributeId, valueParam);\n\n    let value = valueParam;\n    if (typeof value === 'object') {\n      value = JSON.stringify(value);\n    }\n\n    let callback = callbackParam;\n    let options = {};\n    if (typeof optionsParam === 'function') {\n      callback = optionsParam;\n    } else if (typeof optionsParam === 'object') {\n      options = optionsParam;\n    }\n\n    this.waitForInit().then(() => {\n      this.waitForSubscription().then((subscriptionId) => {\n        let alreadySet = false;\n\n        const storageStr = localStorage.getItem(`cleverpush-attribute-${attributeId}`);\n        if (storageStr) {\n          try {\n            const array = JSON.parse(storageStr);\n            if (array && array.length) {\n              if (array.indexOf(value) > -1) {\n                alreadySet = true;\n              } else {\n                localStorage.setItem(`cleverpush-attribute-${attributeId}`, JSON.stringify([...array, value]));\n              }\n            } else {\n              localStorage.setItem(`cleverpush-attribute-${attributeId}`, JSON.stringify([value]));\n            }\n          } catch (ignored) {\n            localStorage.setItem(`cleverpush-attribute-${attributeId}`, JSON.stringify([value]));\n          }\n        } else {\n          localStorage.setItem(`cleverpush-attribute-${attributeId}`, JSON.stringify([value]));\n        }\n\n        if (alreadySet && !options.force) {\n          return;\n        }\n\n        this.api.pushSubscriptionAttributeValue(subscriptionId, attributeId, valueParam).then(() => {\n          if (typeof callback === 'function') {\n            callback(false, true);\n          }\n        });\n      });\n    });\n  }\n\n  pullAttributeValue(attributeId, valueParam, callback) {\n    logMethodCall('pullAttributeValue', attributeId, valueParam);\n\n    let value = valueParam;\n    if (typeof value === 'object') {\n      value = JSON.stringify(value);\n    }\n\n    this.waitForInit().then(() => {\n      this.waitForSubscription().then((subscriptionId) => {\n        const storageStr = localStorage.getItem(`cleverpush-attribute-${attributeId}`);\n        if (storageStr) {\n          try {\n            const array = JSON.parse(storageStr);\n            if (array && array.length) {\n              if (array.indexOf(value) > -1) {\n                array.splice(array.indexOf(value), 1);\n                localStorage.setItem(`cleverpush-attribute-${attributeId}`, JSON.stringify(array));\n              }\n            }\n          } catch (error) {\n            log.info('Error pulling attribute value', error);\n          }\n        }\n\n        this.api.pullSubscriptionAttributeValue(subscriptionId, attributeId, valueParam).then(() => {\n          if (typeof callback === 'function') {\n            callback(false, true);\n          }\n        });\n      });\n    });\n  }\n\n  trigger(eventName, data) {\n    if (data || data === false) {\n      log.debug(`%c${eventName?.toUpperCase()}:`, getConsoleStyle('event'), data);\n    } else {\n      log.debug(`%c${eventName?.toUpperCase()}`, getConsoleStyle('event'));\n    }\n\n    if (isBrowser()) {\n      if (eventName === Event.INITIALIZED) {\n        if (this.initialized) {\n          return;\n        }\n        this.initialized = true;\n      }\n      this.emit(eventName, data);\n    }\n  }\n\n  triggerBellClick() {\n    logMethodCall('triggerBellClick');\n\n    this.waitForInit().then(() => {\n      if (this.webPushUnsupported) {\n        alert(utilsTranslate('alert.unsupported'));\n        return;\n      }\n\n      this.subscriptionManager.isSubscribed().then((isSubscribed) => {\n        this.trigger(Event.BELL_CLICKED);\n\n        if (this.bell) {\n          this.bell.onClick();\n        } else if (!isSubscribed) {\n          this.triggerOptIn(true, (err, id) => {\n            if (!err && id) {\n              this.updateSpeechbubblePanelUnread();\n              if (!this.panel) {\n                import('./panel').then(({ default: Panel }) => {\n                  this.panel = new Panel(this.config, this.subscriptionManager, this.trigger.bind(this), this.api);\n                  this.panel.show();\n                });\n              } else {\n                this.panel.show();\n              }\n            }\n          });\n        } else if (!this.panel) {\n          import('./panel').then(({ default: Panel }) => {\n            this.panel = new Panel(this.config, this.subscriptionManager, this.trigger.bind(this), this.api);\n            this.panel.show();\n          });\n        } else {\n          this.panel.show();\n        }\n      });\n    }).catch(() => {\n      if (this.webPushUnsupported) {\n        alert(utilsTranslate('alert.unsupported'));\n      }\n    });\n  }\n\n  hidePanel() {\n    if (this.panel) {\n      this.panel.hide();\n    }\n  }\n\n  translate(key) {\n    return utilsTranslate(key);\n  }\n\n  triggerFollowUpEvent = (followUpCampaignId, eventName, eventParamsParam) => {\n    const eventParams = typeof eventParamsParam === 'object' ? eventParamsParam : {};\n    logMethodCall('triggerFollowUpEvent', followUpCampaignId, eventName, eventParams);\n\n    if (this.config.clickedFollowUpCampaignId === followUpCampaignId) {\n      // do not re-trigger the campaign which this session resulted in by clicking (results in an endless loop if user clicks every time!)\n      return;\n    }\n\n    const trigger = (subscriptionId) => {\n      if (subscriptionId) {\n        log.debug('triggerFollowUpEvent waitForSubscription done', subscriptionId);\n        const fromNotification = this.config.clickedFollowUpCampaignId === followUpCampaignId;\n        const notificationId = typeof sessionStorage !== 'undefined' ? localStorage.getItem('cleverpush-notification-id') : undefined;\n        this.api.triggerFollowUpEvent(subscriptionId, followUpCampaignId, notificationId, eventName, { url: location.href, ...eventParams }, fromNotification, this.config.bypassInactiveFollowUps);\n      }\n    };\n\n    if (eventName === 'triggerArticleBounce') {\n      const subscriptionId = localStorage.getItem('cleverpush-subscription-id');\n      trigger(subscriptionId);\n      return;\n    }\n\n    this.waitForInit().then(() => {\n      log.debug('triggerFollowUpEvent waitForInit done');\n\n      if (this.config.autoRegister) {\n        this.waitForSubscription().then(trigger);\n      } else {\n        this.subscriptionManager.getSubscriptionId().then(trigger);\n      }\n    });\n  }\n\n  triggerJourneyEvent = (journeyId, eventName, eventParamsParam, type) => new Promise((resolve, reject) => {\n    const eventParams = typeof eventParamsParam === 'object' ? eventParamsParam : {};\n    logMethodCall('Journey Events', journeyId, eventName, eventParams);\n\n    if (this.config.clickedJourneyId === journeyId) {\n      return;\n    }\n\n    const trigger = async (subscriptionId) => {\n      if (subscriptionId) {\n        log.debug('JourneyEvents waitForSubscription done', subscriptionId);\n        const fromNotification = this.config.clickedJourneyId === journeyId;\n        const notificationId = typeof sessionStorage !== 'undefined' ? localStorage.getItem('cleverpush-notification-id') : undefined;\n        await this.api.triggerJourneyEvent(subscriptionId, journeyId, notificationId, fromNotification, eventName, type, { url: location.href, ...eventParams });\n        resolve();\n      }\n      reject();\n    };\n\n    if (eventName === 'triggerArticleBounce') {\n      const subscriptionId = localStorage.getItem('cleverpush-subscription-id');\n      trigger(subscriptionId);\n      return;\n    }\n\n    this.waitForInit().then(() => {\n      log.debug('JourneyEvents waitForInit done');\n\n      if (this.config.autoRegister) {\n        this.waitForSubscription().then(trigger);\n      } else {\n        this.subscriptionManager.getSubscriptionId().then(trigger);\n      }\n    });\n  });\n\n  initBounces() {\n    logMethodCall('initBounces');\n    try {\n      let bounceUrl;\n      if (isHost() && typeof URLSearchParams !== 'undefined') {\n        let bounceDevice;\n        let notificationId;\n        if (location.search && location.search.length) {\n          const params = new URLSearchParams(location.search.slice(1));\n          bounceUrl = params.get('cleverPushBounceUrl');\n          bounceDevice = params.get('cleverPushBounceDevice');\n          notificationId = params.get('cleverPushNotificationId');\n        }\n        if (!bounceUrl && location.hash && location.hash.indexOf('#?') === 0) {\n          const hashParams = new URLSearchParams(location.hash.slice(2));\n          bounceUrl = hashParams.get('cleverPushBounceUrl');\n          bounceDevice = hashParams.get('cleverPushBounceDevice');\n          if (!notificationId) {\n            notificationId = hashParams.get('cleverPushNotificationId');\n          }\n        }\n\n        try {\n          if (bounceUrl) {\n            const decodedBounceUrlWithoutSpecialChars = decodeURIComponent(bounceUrl).replace(/[^\\w:]/gi, '').toLowerCase();\n            // eslint-disable-next-line no-script-url\n            if (decodedBounceUrlWithoutSpecialChars.includes('javascript:')) {\n              // prevent RXSS\n              bounceUrl = undefined;\n            }\n          }\n        } catch (exception) {\n          // catches URI Malformed exception which might be used to bypass the above check\n          bounceUrl = undefined;\n        }\n\n        if (bounceDevice && (\n          (bounceDevice === 'mobile' && device.type !== 'mobile')\n          || (bounceDevice === 'tablet' && device.type !== 'tablet')\n          || (bounceDevice === 'desktop' && (device.type === 'table' || device.type === 'mobile')))\n        ) {\n          bounceUrl = undefined;\n        }\n        if (bounceUrl) {\n          this.initBounce(bounceUrl, notificationId);\n        }\n      }\n\n      if (!bounceUrl && this.config && this.config.bounceEnabled && this.config.bounceFilters && this.config.bounceFilters.length) {\n        const fromNotification = document.referrer && (document.referrer.endsWith('cleverpush.com/worker.js') || document.referrer.endsWith(this.config.serviceWorkerFile || document.referrer.endsWith('/cleverpush-worker.js')));\n        const fromSeo = document.referrer && /google|bing|yahoo|baidu|duckduckgo|wolframalpha/.test(document.referrer);\n        const bounceFilter = this.config.bounceFilters.find((f) => {\n          let should = (\n            (!f.source || f.source === 'notification') && fromNotification)\n            || (f.source === 'seo' && fromSeo)\n            || ((!this.referrer || this.referrer === location.href) && f.source === 'direct')\n            || (f.source === 'ignore');\n          if (should && f.device) {\n            should = (f.device === 'mobile' && device.type === 'mobile')\n              || (f.device === 'tablet' && device.type === 'tablet')\n              || (f.device === 'desktop' && device.type !== 'mobile' && device.type !== 'tablet');\n          }\n          if (should && f.matchQuery) {\n            const params = new URLSearchParams(location.search.slice(1));\n            Object.keys(f.matchQuery || {}).forEach((query) => {\n              if (f.matchQuery[query]) {\n                should = should && params.get(query) && params.get(query).includes(f.matchQuery[query]);\n              }\n            });\n          }\n          return should;\n        });\n\n        if (bounceFilter && bounceFilter.url) {\n          this.initBounce(bounceFilter.url, null);\n        }\n      }\n\n      if (sessionStorage.getItem('cleverpush-bounced') === TRUE_STRING && window.performance && window.performance.navigation.type === window.performance.navigation.TYPE_BACK_FORWARD) {\n        sessionStorage.removeItem('cleverpush-bounced');\n        history.back();\n      }\n    } catch (err) {\n      log.error(err);\n    }\n  }\n\n  initBounce(url, notificationId) {\n    logMethodCall('initBounce', url, notificationId);\n    let bounced = false;\n    if (window.history && window.history.pushState) {\n      const setupBounce = () => {\n        setTimeout(() => {\n          window.addEventListener('popstate', () => {\n            setTimeout(() => {\n              if (sessionStorage.getItem('cleverpush-bounced') === TRUE_STRING) {\n                return;\n              }\n\n              bounced = !location.hash || location.href.indexOf('cleverPushBounceUrl') > -1;\n\n              if (bounced && location.href.endsWith('#')) {\n                // This was added for loberon.de as they change the hash to # when clicking on the quantity dropdown in the article selection\n                bounced = false;\n              }\n\n              if (bounced) {\n                sessionStorage.setItem('cleverpush-bounced', TRUE_STRING);\n\n                const bounceParams = { channelId: this.config.channelId, notificationId, subscriptionId: this.subscriptionManager.storageManager.getSubscriptionId() };\n\n                this.api.trackBounce(bounceParams);\n\n                location.href = url;\n              }\n            }, 0);\n          }, false);\n        }, 250);\n\n        const initialUrl = location.pathname + (location.search || '') + (location.hash || '');\n\n        setTimeout(() => {\n          history.pushState({ cleverpushBounce: true }, document.title, location.pathname + (location.search || '') + (location.hash || ''));\n          setTimeout(() => {\n            history.replaceState(null, document.title, initialUrl);\n          }, 150);\n        }, 150);\n        bounced = true;\n      };\n\n      if (document.readyState === 'completed' || document.readyState === 'complete' || document.readyState === 'interactive') {\n        setupBounce();\n      } else {\n        window.addEventListener('load', setupBounce);\n      }\n    }\n  }\n\n  initNotificationId() {\n    const notificationId = localStorage.getItem('cleverpush-notification-id');\n    const notificationLastInteraction = parseInt(localStorage.getItem('cleverpush-notification-last-interaction'), 10) || 0;\n    if (notificationId && (!notificationLastInteraction || (Date.now() - notificationLastInteraction < (30 * 60 * 1000)))) {\n      this.notificationId = notificationId;\n      localStorage.setItem('cleverpush-notification-last-interaction', Date.now());\n    } else {\n      localStorage.removeItem('cleverpush-notification-last-interaction');\n      localStorage.removeItem('cleverpush-notification-id');\n    }\n  }\n\n  initFollowUpCampaigns() {\n    if (this.config.followUpCampaigns && this.config.followUpCampaigns.length) {\n      this.config.followUpCampaigns.forEach((campaign) => {\n        prepareJourneyOrFollowUpTriggers(campaign, this.triggerFollowUpEvent, this.triggerJourneyEvent);\n      });\n    }\n\n    if (this.config.shopifyCartAbandonmentFollowUpCampaignId) {\n      const addToCartButtons = document.querySelectorAll('button[name=\"add\"], button.addtocart, a.add-to-cart');\n      for (let addToCartButtonIndex = 0; addToCartButtonIndex < addToCartButtons.length; addToCartButtonIndex += 1) {\n        const addToCartButton = addToCartButtons[addToCartButtonIndex];\n        if (addToCartButton) {\n          addToCartButton.addEventListener('click', () => {\n            this.triggerFollowUpEvent(this.config.shopifyCartAbandonmentFollowUpCampaignId, 'addToCart');\n          }, true);\n        }\n      }\n\n      if (\n        (document.documentElement\n          && document.documentElement.className\n          && document.documentElement.className.indexOf('page--thank-you') > -1)\n        || (window.location && window.location.pathname\n          && window.location.pathname.indexOf('thank_you') > -1)\n      ) {\n        this.triggerFollowUpEvent(this.config.shopifyCartAbandonmentFollowUpCampaignId, 'checkout');\n      }\n    }\n\n    if (this.config.epagesCartAbandonmentFollowUpCampaignId) {\n      const addToCartButton = document.querySelector('button.product-add-cart-button');\n      if (addToCartButton) {\n        addToCartButton.addEventListener('click', () => {\n          this.triggerFollowUpEvent(this.config.epagesCartAbandonmentFollowUpCampaignId, 'addToCart');\n        }, true);\n      }\n\n      if (\n        (document.documentElement\n          && document.documentElement.className\n          && document.documentElement.className.indexOf('page--thank-you') > -1)\n        || (window.location\n          && window.location.pathname\n          && window.location.pathname.indexOf('thank_you') > -1)\n      ) {\n        this.triggerFollowUpEvent(this.config.epagesCartAbandonmentFollowUpCampaignId, 'checkout');\n      }\n    }\n  }\n\n  initJourneys = async () => {\n    if (this.config.journeys && this.config.journeys.length) {\n      for (const journey of this.config.journeys) {\n        const elements = journey?.elements || [];\n        for (const element of elements) {\n          const payload = element?.payload || {};\n          // eslint-disable-next-line no-await-in-loop\n          await this.processJourneyElement(journey._id, payload);\n        }\n      }\n    }\n  }\n\n  async processJourneyElement(journeyId, payload) {\n    prepareJourneyOrFollowUpTriggers({ _id: journeyId, ...payload }, this.triggerFollowUpEvent, this.triggerJourneyEvent, false);\n    return new Promise((resolve) => setTimeout(resolve, 100));\n  }\n\n  /**\n   * Deprecated method for conversion event tracking, has been renamed to trackEvent\n   */\n  trackConversion(eventId, amount, currency) {\n    this.trackEvent(eventId, { amount, currency });\n  }\n\n  isSpecificBannerVisible(conversionEventId) {\n    const bannersWithEvent = this.config.webBanners.filter((banner) => banner.conversionEvents && banner.conversionEvents.includes(conversionEventId));\n    const isVisible = bannersWithEvent.some((banner) => banner.isVisible);\n\n    return isVisible;\n  }\n\n  /**\n   * Track conversion events.\n   * @param {*} eventId Can be the ID or Name of the event\n   * @param {*} properties Optional event properties (can include amount, currency and custom properties)\n   */\n  trackEvent(eventId, properties) {\n    logMethodCall('trackEvent', eventId, properties);\n\n    this.waitForInit().then(() => {\n      const event = (this.config.channelEvents || []).find((tryEvent) => tryEvent._id === eventId || tryEvent.name === eventId);\n      if (!event) {\n        log.warn(`Event with ID or Name \"${eventId}\" not found`);\n        return;\n      }\n\n      this.subscriptionManager.getSubscriptionId().then((subscriptionId) => {\n        const params = new URLSearchParams(location.search.slice(1));\n        const notificationId = params.get('cleverPushNotificationId') || localStorage.getItem('cleverpush-notification-id');\n        const conversionTrackingProps = {\n          subscriptionId,\n          notificationId,\n          eventId: event._id,\n          properties,\n        };\n        this.handleConversionTracking(conversionTrackingProps);\n      });\n\n      if (this.isSpecificBannerVisible(eventId)) {\n        const specificBanner = this.config.webBanners.find((banner) => banner?.conversionEvents?.includes(eventId));\n        if (specificBanner) {\n          const bannerIdTestIdPair = JSON.parse(sessionStorage.getItem('cleverpush-shown-web-banners')) || {};\n          const testId = bannerIdTestIdPair[specificBanner._id] || this.testId;\n          this.api.trackWebBannerEvent(TRACK_EVENTS.CONVERSIONS, specificBanner._id, '', testId);\n        }\n      }\n    });\n  }\n\n  /**\n * Handles the conversion tracking for a given set of properties.\n *\n * @param {object} conversionTrackingProps - An object containing the conversion tracking properties.\n * @param {string} conversionTrackingProps.notificationId - The ID of the notification associated with the conversion.\n * @param {string} conversionTrackingProps.subscriptionId - The ID of the subscription associated with the conversion.\n * @param {string} conversionTrackingProps.eventId - The ID of the event associated with the conversion.\n * @param {object} conversionTrackingProps.properties - An object containing any additional properties associated with the conversion.\n * @returns {void}\n */\n  handleConversionTracking(conversionTrackingProps) {\n    const { notificationId } = conversionTrackingProps;\n    if (!notificationId) {\n      this.subscriptionManager.getClickedNotification().then((clickedNotificationId) => {\n        if (!clickedNotificationId) {\n          ADDITIONAL_CONVERSION_EXPIRATIONS_MINUTES.forEach((delayMinutes) => {\n            this.subscriptionManager.getClickedNotification(convertMinutesToMS(delayMinutes)).then((notif) => {\n              this.handleAdditionalConversionTrack({\n                ...conversionTrackingProps,\n                notificationId: notif,\n                minutes: delayMinutes,\n              });\n            });\n          });\n        } else {\n          ADDITIONAL_CONVERSION_EXPIRATIONS_MINUTES.forEach((delayMinutes) => {\n            this.handleAdditionalConversionTrack({\n              ...conversionTrackingProps,\n              notificationId: clickedNotificationId,\n              minutes: delayMinutes,\n            });\n          });\n        }\n        this.handleLegacyConversion({ ...conversionTrackingProps, notificationId: clickedNotificationId });\n      });\n    } else {\n      this.handleLegacyConversion({ ...conversionTrackingProps });\n      ADDITIONAL_CONVERSION_EXPIRATIONS_MINUTES.forEach((delayMinutes) => {\n        this.handleAdditionalConversionTrack({\n          ...conversionTrackingProps,\n          minutes: delayMinutes,\n        });\n      });\n    }\n  }\n\n  isLastCheckExpired(lastConversionTrackedAt, additionalDelayToCheck) {\n    return (lastConversionTrackedAt && !isNaN(lastConversionTrackedAt) && (parseInt(lastConversionTrackedAt, INT_RADIX) + additionalDelayToCheck) < Date.now()) || this.config.trackConversionsWithoutFrequencyCapping;\n  }\n\n  generateWalletPass(walletPassId, options, callback) {\n    return new Promise((resolve, reject) => {\n      this.api.generateWalletPass(walletPassId, options).then((result) => {\n        if (typeof callback === 'function') {\n          callback(null, result);\n        }\n        resolve(result);\n      }).catch((err) => {\n        if (typeof callback === 'function') {\n          callback(err, null);\n        }\n        reject(err);\n      });\n    });\n  }\n\n  initGoogleAnalytics(subscriptionId) {\n    if (this.config.googleAnalyticsDimensionIndex && typeof ga === 'function') {\n      // eslint-disable-next-line no-undef\n      ga('set', `dimension${this.config.googleAnalyticsDimensionIndex}`, subscriptionId);\n\n      if (typeof gtag === 'function') {\n        // eslint-disable-next-line no-undef\n        gtag('event', 'cleverpushSetSubscriptionId', {\n          event_category: 'cleverpush',\n          event_label: 'Set CleverPush Subscription ID',\n          [`dimension${this.config.googleAnalyticsDimensionIndex}`]: subscriptionId,\n          nonInteraction: true\n        });\n      }\n    }\n  }\n\n  /**\n   * checks if the given TriggerType is valid or not\n   *\n   * @param  {string} triggerType Trigger Type fetched from url\n   * @return  {string | null} TriggerType | Null\n   */\n  validateUrlTriggerType(triggerType) {\n    if (Object.values(PANEL_TABS).includes(triggerType)) {\n      return triggerType;\n    }\n    return null;\n  }\n}\n","export const INT_RADIX = 10;\nexport const TRUE_STRING = 'true';\nexport const ZERO_STRING = '0';\nexport const TOPIC_LAYER_VISITS_DEFAULT = 0;\nexport const FOLLOW_UP_PARENT_ELEMENTS_CHECK = 10;\nexport const WHITESPACE_REGEX = /\\s+/g;\nexport const SPACE_CHARACTER = ' ';\nexport const CSS_SELECTOR_SEPARATOR = ',';\nexport const DAY = 1000 * 60 * 60 * 24;\nexport const HOURS = 1000 * 60 * 60;\nexport const MINUTES = 1000 * 60;\nexport const DEFAULT_LANGUAGE = 'en';\n\nexport const KEY_SPEECHBUBBLE_UNREAD_NOTIFICATIONS = 'cheverpush-speechbubble-unread-notifications';\nexport const KEY_HAS_UNREAD_NOTIFICATIONS = 'cp-has-unread-notifications';\nexport const KEY_UNREAD_NOTIFICATIONS_COUNT = 'cleverpush-unread-notifications';\nexport const KEY_DENY_COUNT = 'cleverpush-deny-count';\nexport const KEY_SUBSCRIPTION_STATUS = 'cleverpush-subscription-status';\nexport const KEY_UNREAD_NOTIFICATIONS_CLASS = 'cleverpush-unread-notifications-count';\nexport const KEY_FORCED_OPT_IN_RESET_AT = 'cleverpush-forced-opt-in-reset-at';\n\nexport const PANEL_TABS = Object.freeze({\n  NOTIFICATIONS: 'notifications',\n  SETTINGS: 'settings'\n});\n\nexport const SUBSCRIPTION_STATUS = {\n  DENIED: 'denied',\n  WAS_DENIED: 'was-denied',\n  UNSUBSCRIBED: 'unsubscribed',\n  PENDING: 'pending',\n  ALLOWED: 'allowed',\n};\n\nexport const TCF_MAX_RETRY_COUNT = 30;\nexport const TCF_RETRY_DELAY_MS = 500;\nexport const TCF_VERSION = 2;\n\n// We only allow certain methods to prevent unwanted XSS\nexport const POST_MESSAGE_ALLOWED_METHODS = [\n  'triggerFollowUpEvent',\n  'trackEvent',\n  'trackConversion',\n  'tagSubscription',\n  'untagSubscription',\n  'setAttribute',\n  'incAttribute',\n  'pushAttributeValue',\n  'pullAttributeValue',\n  'subscribe',\n  'triggerOptIn',\n  'unsubscribe',\n];\n","export default (\n    `@media (min-width: 768px) {\n        .cleverpush-confirm-branding {\n            bottom: 0 !important;\n            left: 0 !important;\n        }\n\n        .cleverpush-confirm-buttons {\n            max-width: calc(100% - 80px);\n            margin-left: auto !important;\n        }\n    }`\n);\n","export default class Event {\n  static INITIALIZED = 'initialized';\n\n  static INITIALIZATION_FAILED = 'initializationFailed';\n\n  static SUBSCRIBED = 'subscribed';\n\n  static UNSUBSCRIBED = 'unsubscribed';\n\n  static OPTIN_SHOWN = 'optInShown';\n\n  static OPTIN_CLOSED = 'optInClosed';\n\n  static OPTIN_DENIED = 'optInDenied';\n\n  static OPTIN_ALLOWED = 'optInAllowed';\n\n  static PERMISSION_GRANTED = 'permissionGranted';\n\n  static TOPICS_SET = 'topicsSet';\n\n  static TOPICS_MANUALLY_SAVED = 'topicsManuallySaved';\n\n  static TOPICS_LAYER_SHOWN = 'topicsLayerShown';\n\n  static TOPICS_LAYER_DENIED = 'topicsLayerDenied';\n\n  static TOPICS_LAYER_ALLOWED = 'topicsLayerAllowed';\n\n  static TAGS_SET = 'tagsSet';\n\n  static BELL_READY = 'bellReady';\n\n  static BELL_CLICKED = 'bellClicked';\n\n  static PERMISSION_RE_GRANTED = 'permissionReGranted';\n\n  static PANEL_SHOWN = 'panelShown';\n\n  static PANEL_HIDDEN = 'panelHidden';\n\n  static CONFIRM_AVAILABLE = 'confirmAvailable';\n\n  static BANNER_SHOWN = 'bannerShown';\n\n  static BANNER_CLICKED = 'bannerClicked';\n\n  static WIDGET_SHOWN = 'widgetShown';\n\n  static CONFIG_AVAILABLE = 'configAvailable';\n\n  static EVENT_TRACKED = 'eventTracked';\n}\n","export default {\n  en: {\n    'confirm.title': '{0} wants to send you push notifications.',\n    'confirm.nativeTitle': '{0} wants to send you notifications',\n    'confirm.info': 'Notifications can be turned off anytime from browser settings.',\n    'confirm.allow': 'Allow',\n    'confirm.allowChrome': 'Allow',\n    'confirm.allowFirefox': 'Allow Notifications',\n    'confirm.deny': 'Deny',\n    'confirm.selectTopics': 'Which topics are you interested in?',\n    'confirm.doubleText': 'Please click on {0} 2x to continue',\n    'confirm.alreadySubscribed': 'You have already subscribed to all topics.',\n    'confirm.silentPromptInfo': 'Please click on the small bell in the address bar at the top and then on \"Allow\" to continue.',\n    'confirm.more': 'More…',\n    'popup.info': 'Click on {0} to confirm push notifications',\n    'popup.text': 'Get updates and offers from {0} by subscribing to push notifications.',\n    'unsubscribe.title': 'Unsubscribe from notifications',\n    'unsubscribe.confirm': 'Are you sure?',\n    'unsubscribe.yes': 'Yes',\n    'unsubscribe.no': 'No',\n    'unsubscribe.feedback': 'Please choose the unsubscribe reason to complete your unsubscription:',\n    'unsubscribe.enterReason': 'Please enter the reason:',\n    'unsubscribe.submit': 'Submit',\n    'unsubscribe.reasonQuantity': 'Too many messages',\n    'unsubscribe.reasonContent': 'Not interesting messages',\n    'unsubscribe.reasonOther': 'Other reason',\n    'windowclose.confirm': 'The process is not yet complete, are you sure you want to cancel it?',\n    'deny.alertHttps': 'If you change your mind, click the lock to give your browser permission to send you notifications.',\n    'deny.alertHttp': 'If you change your mind, click the info symbol to give your browser permission to send you notifications.',\n    'bell.subscribe': 'Subscribe for notifications',\n    'bell.subscribed': 'You\\'re subscribed for notifications',\n    'bell.unsubscribeSuccess': 'You won\\'t receive notifications again',\n    'bell.hide': 'Do not show again',\n    'panel.notifications': 'Notifications',\n    'panel.editTopics': 'Edit Topics',\n    'panel.settings': 'Settings',\n    'panel.notificationsEmpty': 'No notifications available.',\n    'panel.save': 'Save',\n    'panel.close': 'Close',\n    'panel.successfullySaved': 'Successfully saved!',\n    'unblock.title': 'You have blocked notifications.<br />Please follow these steps to receive notifications',\n    privacy: 'Privacy',\n    'chat.emailAddress': 'Email address',\n    'chat.name': 'Your name',\n    'chat.emailError': 'Please enter a valid email address.',\n    'chat.start': 'Start chat',\n    'chat.enable': 'Enable chat now',\n    'chat.enterMessage': 'Please enter message',\n    'chat.today': 'Today',\n    'chat.yesterday': 'Yesterday',\n    'chat.dayBefore': 'Day before yesterday',\n    'chat.sunday': 'Sunday',\n    'chat.monday': 'Monday',\n    'chat.tuesday': 'Tuesday',\n    'chat.wednesday': 'Wednesday',\n    'chat.thursday': 'Thursday',\n    'chat.friday': 'Friday',\n    'chat.saturday': 'Saturday',\n    'chat.the': 'the',\n    'alert.unsupported': 'Unfortunately, your browser does not support notifications.',\n    'voucherpool.title': 'Your voucher code',\n    'voucherpool.text': 'Click here to copy your code',\n    'voucher.code.copied': 'Voucher code was copied to the clipboard!',\n    'story.overlay.text': 'Open story',\n    'alert.checkboxRequired': 'Please tick at least one box to continue',\n    'alert.unexpected': 'An unexpected error has occurred. Please try again later.',\n    'alert.successEmailSend': 'We send the email with this email. Please check your email',\n    'alert.enterTextAnswer': 'Please enter answer',\n    'widget.topics': 'Topics',\n    'widget.tags': 'Tags',\n    'next.survey': 'Next Survey',\n    'enterTextAnswer.survey': 'Enter your Answer'\n  },\n  de: {\n    'confirm.title': '{0} würde dir gerne Push Nachrichten senden.',\n    'confirm.nativeTitle': '{0} möchte Ihnen Benachrichtigungen senden',\n    'confirm.info': 'Benachrichtigungen können jederzeit in den Browser Einstellungen deaktiviert werden.',\n    'confirm.allow': 'Erlauben',\n    'confirm.allowChrome': 'Zulassen',\n    'confirm.allowFirefox': 'Benachrichtigungen erlauben',\n    'confirm.deny': 'Verbieten',\n    'confirm.selectTopics': 'Welche Themen interessieren Dich?',\n    'confirm.doubleText': 'Bitte bestätige 2x mit {0} um fortzufahren',\n    'confirm.alreadySubscribed': 'Du hast dich bereits für alle Themen angemeldet.',\n    'confirm.silentPromptInfo': 'Bitte klicke auf die kleine Glocke oben in der Adresszeile und dann auf \"Erlauben\" um fortzufahren.',\n    'confirm.more': 'Mehr…',\n    'popup.info': 'Klicke auf {0}, um unsere Push-Benachrichtigungen zu bestätigen',\n    'popup.text': 'Erhalte Updates und Angebote von {0}, indem du Push-Benachrichtigungen abonnierst.',\n    'unsubscribe.title': 'Von Benachrichtigungen abmelden',\n    'unsubscribe.confirm': 'Bist du dir sicher?',\n    'unsubscribe.yes': 'Ja',\n    'unsubscribe.no': 'Nein',\n    'unsubscribe.feedback': 'Bitte wähle den Abmelde-Grund aus um deine Abmeldung zu bestätigen:',\n    'unsubscribe.enterReason': 'Bitte gib den Grund ein:',\n    'unsubscribe.submit': 'Absenden',\n    'unsubscribe.reasonQuantity': 'Zu viele Nachrichten',\n    'unsubscribe.reasonContent': 'Uninteressante Nachrichten',\n    'unsubscribe.reasonOther': 'Anderer Grund',\n    'windowclose.confirm': 'Der Vorgang ist noch nicht abgeschlossen, bist du sicher, dass du ihn abbrechen möchtest?',\n    'deny.alertHttps': 'Wenn du doch Benachrichtigungen empfangen möchtest, kannst du mit einem Klick auf das Schloss die Einstellung \"Benachrichtigungen\" auf \"Erlauben\" setzen.',\n    'deny.alertHttp': 'Wenn du doch Benachrichtigungen empfangen möchtest, kannst du mit einem Klick auf das Info-Symbol die Einstellung \"Benachrichtigungen\" auf \"Erlauben\" setzen.',\n    'bell.subscribe': 'Für Benachrichtigungen anmelden',\n    'bell.subscribed': 'Du bist für Benachrichtigungen angemeldet',\n    'bell.unsubscribeSuccess': 'Du wirst keine Benachrichtigungen mehr erhalten',\n    'bell.hide': 'Nicht mehr anzeigen',\n    'panel.notifications': 'Nachrichten',\n    'panel.editTopics': 'Themenbereiche bearbeiten',\n    'panel.settings': 'Einstellungen',\n    'panel.notificationsEmpty': 'Keine Nachrichten vorhanden.',\n    'panel.save': 'Speichern',\n    'panel.close': 'Schlie&szlig;en',\n    'panel.successfullySaved': 'Erfolgreich gespeichert!',\n    'unblock.title': 'Du hast Benachrichtigungen blockiert.<br />Bitte folge diesen Schritten um Benachrichtigungen zu empfangen',\n    privacy: 'Datenschutz',\n    'chat.emailAddress': 'E-Mail Adresse',\n    'chat.name': 'Dein Name',\n    'chat.button': 'Button',\n    'chat.emailError': 'Bitte gib eine gültige E-Mail Adresse ein.',\n    'chat.start': 'Chat starten',\n    'chat.enable': 'Chat jetzt aktivieren',\n    'chat.enterMessage': 'Bitte Nachricht eingeben',\n    'chat.today': 'Heute',\n    'chat.yesterday': 'Gestern',\n    'chat.dayBefore': 'Vorgestern',\n    'chat.sunday': 'Sonntag',\n    'chat.monday': 'Montag',\n    'chat.tuesday': 'Dienstag',\n    'chat.wednesday': 'Mittwoch',\n    'chat.thursday': 'Donnerstag',\n    'chat.friday': 'Freitag',\n    'chat.saturday': 'Samstag',\n    'chat.the': 'den',\n    'alert.unsupported': 'Dein Browser unterstützt leider keine Benachrichtigungen.',\n    'voucherpool.title': 'Dein Gutscheincode',\n    'voucherpool.text': 'Klicke hier um deinen Code zu kopieren',\n    'voucher.code.copied': 'Gutscheincode wurde in die Zwischenablage kopiert!',\n    'story.overlay.text': 'Story öffnen',\n    'alert.checkboxRequired': 'Bitte wähle mindestens einen Themenbereich aus',\n    'alert.unexpected': 'Ein unerwarteter Fehler ist aufgetreten. Bitte versuchen Sie es später erneut.',\n    'alert.successEmailSend': 'Du erhältst nun eine E-Mail mit einem Link, darüber kannst du deine Einstellungen anpassen.',\n    'alert.enterTextAnswer': 'Bitte geben Sie eine Antwort ein',\n    'widget.topics': 'Themenbereiche',\n    'widget.tags': 'Tags',\n    'next.survey': 'Nächste Umfrage',\n    'enterTextAnswer.survey': 'Gib deine Antwort ein'\n  },\n  'de-formal': {\n    'confirm.title': '{0} würde Ihnen gerne Push Nachrichten senden.',\n    'confirm.nativeTitle': '{0} möchte Ihnen Benachrichtigungen senden',\n    'confirm.info': 'Benachrichtigungen können jederzeit in den Browser Einstellungen deaktiviert werden.',\n    'confirm.allow': 'Erlauben',\n    'confirm.allowChrome': 'Zulassen',\n    'confirm.allowFirefox': 'Benachrichtigungen erlauben',\n    'confirm.deny': 'Verbieten',\n    'confirm.selectTopics': 'Welche Themen interessieren Sie?',\n    'confirm.doubleText': 'Bitte bestätigen Sie 2x mit {0} um fortzufahren',\n    'confirm.alreadySubscribed': 'Sie haben sich bereits für alle Themen angemeldet.',\n    'confirm.silentPromptInfo': 'Bitte klicken Sie auf die kleine Glocke oben in der Adresszeile und dann auf \"Erlauben\" um fortzufahren.',\n    'confirm.more': 'Mehr…',\n    'popup.info': 'Klicken Sie auf {0}, um unsere Push-Benachrichtigungen zu bestätigen',\n    'popup.text': 'Erhalten Sie Updates und Angebote von {0}, indem Sie Push-Benachrichtigungen abonnieren.',\n    'unsubscribe.title': 'Von Benachrichtigungen abmelden',\n    'unsubscribe.confirm': 'Sind Sie sich sicher?',\n    'unsubscribe.yes': 'Ja',\n    'unsubscribe.no': 'Nein',\n    'unsubscribe.feedback': 'Bitte wählen Sie den Abmelde-Grund aus um Ihre Abmeldung zu bestätigen:',\n    'unsubscribe.enterReason': 'Bitte geben Sie den Grund ein:',\n    'unsubscribe.submit': 'Absenden',\n    'unsubscribe.reasonQuantity': 'Zu viele Nachrichten',\n    'unsubscribe.reasonContent': 'Uninteressante Nachrichten',\n    'unsubscribe.reasonOther': 'Anderer Grund',\n    'windowclose.confirm': 'Der Vorgang ist noch nicht abgeschlossen, sind Sie sich sicher, dass Sie ihn abbrechen möchten?',\n    'deny.alertHttps': 'Wenn Sie doch Benachrichtigungen empfangen möchten, können Sie mit einem Klick auf das Schloss die Einstellung \"Benachrichtigungen\" auf \"Erlauben\" setzen.',\n    'deny.alertHttp': 'Wenn Sie doch Benachrichtigungen empfangen möchten, können Sie mit einem Klick auf das Info-Symbol die Einstellung \"Benachrichtigungen\" auf \"Erlauben\" setzen.',\n    'bell.subscribe': 'Für Benachrichtigungen anmelden',\n    'bell.subscribed': 'Sie sind für Benachrichtigungen angemeldet',\n    'bell.unsubscribeSuccess': 'Sie werden keine Benachrichtigungen mehr erhalten',\n    'panel.notifications': 'Benachrichtigungen',\n    'panel.editTopics': 'Themenbereiche bearbeiten',\n    'panel.settings': 'Einstellungen',\n    'panel.notificationsEmpty': 'Keine Benachrichtigungen vorhanden.',\n    'panel.save': 'Speichern',\n    'panel.close': 'Schlie&szlig;en',\n    'panel.successfullySaved': 'Erfolgreich gespeichert!',\n    'unblock.title': 'Sie haben Benachrichtigungen blockiert.<br />Bitte folgen Sie diesen Schritten um Benachrichtigungen zu empfangen',\n    privacy: 'Datenschutz',\n    'chat.emailAddress': 'E-Mail Adresse',\n    'chat.name': 'Ihr Name',\n    'chat.button': 'Button',\n    'chat.emailError': 'Bitte geben Sie eine gültige E-Mail Adresse ein.',\n    'chat.start': 'Chat starten',\n    'chat.enable': 'Chat jetzt aktivieren',\n    'chat.enterMessage': 'Bitte Nachricht eingeben',\n    'chat.today': 'Heute',\n    'chat.yesterday': 'Gestern',\n    'chat.dayBefore': 'Vorgestern',\n    'chat.sunday': 'Sonntag',\n    'chat.monday': 'Montag',\n    'chat.tuesday': 'Dienstag',\n    'chat.wednesday': 'Mittwoch',\n    'chat.thursday': 'Donnerstag',\n    'chat.friday': 'Freitag',\n    'chat.saturday': 'Samstag',\n    'chat.the': 'den',\n    'alert.unsupported': 'Ihr Browser unterstützt leider keine Benachrichtigungen.',\n    'voucherpool.title': 'Dein Gutscheincode',\n    'voucherpool.text': 'Klicken Sie hier um Ihren Code zu kopieren',\n    'voucher.code.copied': 'Gutscheincode wurde in die Zwischenablage kopiert!',\n    'story.overlay.text': 'Story öffnen',\n    'alert.checkboxRequired': 'Bitte wählen Sie mindestens einen Themenbereich aus',\n    'alert.unexpected': 'Ein unerwarteter Fehler ist aufgetreten. Bitte versuchen Sie es später erneut.',\n    'alert.successEmailSend': 'Sie erhalten nun eine E-Mail mit einem Link, darüber können Sie Ihre deine Einstellungen anpassen.',\n    'widget.topics': 'Themenbereiche',\n    'widget.tags': 'Tags',\n    'next.survey': 'Nächste Umfrage',\n  }\n};\n","export default class CleverPushError extends Error {\n  constructor(message, reason) {\n    super(message);\n    this.name = this.constructor.name;\n    this.reason = reason;\n    if (typeof Error.captureStackTrace === 'function') {\n      Error.captureStackTrace(this, this.constructor);\n    } else {\n      this.stack = (new Error(message)).stack;\n    }\n  }\n}\n","export default class Command {\n  static CONNECTED = 'connect';\n\n  static REMOTE_NOTIFICATION_PERMISSION = 'cleverpush.remoteNotificationPermission';\n\n  static REMOTE_OPERATION_COMPLETE = 'cleverpush.operationComplete';\n\n  static REMOTE_RETRIGGER_EVENT = 'cleverpush.remoteRetriggerEvent';\n\n  static MODAL_LOADED = 'cleverpush.modalPrompt.loaded';\n\n  static MODAL_PROMPT_ACCEPTED = 'cleverpush.modalPrompt.accepted';\n\n  static MODAL_PROMPT_REJECTED = 'cleverpush.modalPrompt.canceled';\n\n  static POPUP_LOADED = 'cleverpush.popup.loaded';\n\n  static POPUP_ACCEPTED = 'cleverpush.popup.accepted';\n\n  static POPUP_REJECTED = 'cleverpush.popup.canceled';\n\n  static POPUP_CLOSING = 'cleverpush.popup.closing';\n\n  static REMOTE_NOTIFICATION_PERMISSION_CHANGED = 'cleverpush.remoteNotificationPermissionChanged';\n\n  static IFRAME_POPUP_INITIALIZE = 'cleverpush.iframePopupInitialize';\n\n  static UNSUBSCRIBE_FROM_PUSH = 'cleverpush.unsubscribeFromPush';\n\n  static BEGIN_BROWSING_SESSION = 'cleverpush.beginBrowsingSession';\n\n  static REQUEST_HOST_URL = 'cleverpush.requestHostUrl';\n\n  static SHOW_HTTP_PERMISSION_REQUEST = 'cleverpush.showHttpPermissionRequest';\n\n  static IS_SHOWING_HTTP_PERMISSION_REQUEST = 'cleverpush.isShowingHttpPermissionRequest';\n\n  static WINDOW_TIMEOUT = 'cleverpush.windowTimeout';\n\n  static FINISH_REMOTE_REGISTRATION = 'cleverpush.finishRemoteRegistration';\n\n  static FINISH_REMOTE_REGISTRATION_IN_PROGRESS = 'cleverpush.finishRemoteRegistrationInProgress';\n\n  static POPUP_BEGIN_MESSAGEPORT_COMMS = 'cleverpush.beginMessagePortComms';\n\n  static SERVICEWORKER_COMMAND_REDIRECT = 'cleverpush.command.redirect';\n\n  static HTTP_PERMISSION_REQUEST_RESUBSCRIBE = 'cleverpush.httpPermissionRequestResubscribe';\n\n  static MARK_PROMPT_DISMISSED = 'cleverpush.markPromptDismissed'\n}\n","export default function adsBlocked(callback) {\n  let adBlockEnabled = false;\n  const testAd = document.createElement('div');\n  testAd.innerHTML = '&nbsp;';\n  testAd.className = 'adsbox';\n  document.body.appendChild(testAd);\n  window.setTimeout(() => {\n    if (testAd.offsetHeight === 0) {\n      adBlockEnabled = true;\n    }\n    testAd.remove();\n    callback(adBlockEnabled);\n  }, 100);\n}\n","import * as loglevel from 'loglevel';\nimport { getEnv } from './env';\n\nconst originalLoggerFactory = loglevel.methodFactory;\n\nexport const log = loglevel.getLogger('cleverpush');\nconst env = getEnv().toUpperCase();\nlog.methodFactory = function (methodName, logLevel, loggerName) {\n  const rawMethod = originalLoggerFactory(methodName, logLevel, loggerName);\n  return function () {\n    const args = [];\n    for (let i = 0; i < arguments.length; i++) {\n      let arg = arguments[i];\n      if (i === 0 && typeof arguments[i] === 'string') {\n        arg = `[CleverPush][${env}] ${arg}`;\n      }\n      args.push(arg);\n    }\n    rawMethod.apply(this, args);\n  };\n};\nlog.setLevel(log.getLevel(), false); // apply method factory\n\nexport function getConsoleStyle(style) {\n  if (style === 'code') {\n    return `\n    padding: 0 1px 1px 5px;\n    border: 1px solid #ddd;\n    border-radius: 3px;\n    font-family: Monaco,\"DejaVu Sans Mono\",\"Courier New\",monospace;\n    color: #444;\n    `;\n  } else if (style === 'bold') {\n    return `\n    font-weight: 600;\n    color: rgb(51, 51, 51);\n    `;\n  } else if (style === 'alert') {\n    return `\n    font-weight: 600;\n    color: red;\n    `;\n  }\n  return '';\n}\n\nexport function stringify(obj) {\n  return JSON.stringify(obj, (key, value) => {\n    if (typeof value === 'function') {\n      return '[Function]';\n    }\n\n    return value;\n  }, 4);\n}\n\nexport function logMethodCall(methodName, ...args) {\n  return log.debug(`Called %c${methodName}(${args.map(stringify).join(', ')})`, getConsoleStyle('code'), '.');\n}\n","import { domLoaded } from './dom';\nimport { log } from './debug';\nimport { device, browser } from './env';\n\nexport const detectPrompt = ({\n  subscriptionManager, config, subscribe, showBackdrop, setShowBackdrop, showSilentAlert\n}) => {\n  if (config.browserType === 'safari') {\n    const focusLostFromBlur = false;\n    const safariBlurChecker = (i) => {\n      if (subscriptionManager.getNotificationPermission() !== 'default') {\n        return;\n      }\n\n      // max 30 secs\n      if (document.hasFocus()) {\n        if (i < 300) {\n          setTimeout(() => {\n            safariBlurChecker(i + 1);\n          }, 100);\n        } else {\n          log.debug('safariBlurChecker waited 30 secs without success');\n        }\n      } else if (!focusLostFromBlur) {\n        log.debug('safariBlurChecker success');\n        showBackdrop();\n      }\n    };\n\n    log.debug('starting safariBlurChecker');\n    safariBlurChecker(0);\n\n    if (subscribe) {\n      subscribe();\n    }\n  } else {\n    const showBackdropSubscribe = () => {\n      domLoaded().then(() => {\n        let subscribeInProgress = true;\n        if (config.env === 'PREVIEW') {\n          showBackdrop();\n        } else {\n          let blurCheckerFired = false;\n          let cancelBlurTimeout;\n          // we'll check for the blur event as this is triggered when the native prompt has been shown\n          const checkForBlur = () => {\n            if (blurCheckerFired) {\n              return;\n            }\n            log.debug('Blur checker fired');\n            if (cancelBlurTimeout) {\n              clearTimeout(cancelBlurTimeout);\n            }\n            window.removeEventListener('blur', checkForBlur);\n            blurCheckerFired = true;\n\n            if (subscribeInProgress) {\n              showBackdrop();\n            }\n          };\n          window.addEventListener('blur', checkForBlur);\n\n          // cancel blur event after 2 secs\n          cancelBlurTimeout = setTimeout(() => {\n            log.debug('Blur checker cancelled');\n            window.removeEventListener('blur', checkForBlur);\n\n            if (showSilentAlert && device.type !== 'mobile' && !['Firefox', 'Mozilla'].includes(browser.name) && (browser.name !== 'Edge' || config.showSilentPromptTutorial)) {\n              showSilentAlert();\n            }\n          }, 2 * 1000);\n        }\n\n        if (subscribe) {\n          subscribe(() => {\n            subscribeInProgress = false;\n          });\n        }\n      });\n    };\n\n    if (config.browserType === 'w3c' && 'storage' in navigator && 'estimate' in navigator.storage) {\n      // Chrome 76 incognito detection (not 100% therefore only hide backdrop)\n      navigator.storage.estimate().then(({ quota }) => {\n        if (quota <= (120 * (2 ** 20))) {\n          if (setShowBackdrop) {\n            setShowBackdrop(false);\n          }\n\n          log.debug('We are *probably* in incognito (used chrome 76 detection method). Will not show backdrop + layer.');\n\n          if (subscribe) {\n            domLoaded().then(() => {\n              subscribe();\n            });\n          }\n        } else {\n          showBackdropSubscribe();\n        }\n      });\n    } else {\n      showBackdropSubscribe();\n    }\n  }\n};\n","export function domLoaded() {\n  return new Promise((resolve) => {\n    if (document.readyState === 'complete') {\n      resolve();\n    } else {\n      const onReady = () => {\n        resolve();\n        document.removeEventListener('DOMContentLoaded', onReady, true);\n        window.removeEventListener('load', onReady, true);\n      };\n      document.addEventListener('DOMContentLoaded', onReady, true);\n      window.addEventListener('load', onReady, true);\n    }\n  });\n}\n\nexport function domReady() {\n  return new Promise((resolve) => {\n    if (document.readyState !== 'loading') {\n      resolve();\n    } else if (document.addEventListener) {\n      document.addEventListener('DOMContentLoaded', resolve);\n    } else {\n      document.attachEvent('onreadystatechange', () => {\n        if (document.readyState !== 'loading') {\n          resolve();\n        }\n      });\n    }\n  });\n}\n\nexport function createNode(htmlStr) {\n  const frag = document.createDocumentFragment();\n  const temp = document.createElement('div');\n  temp.innerHTML = htmlStr;\n  while (temp.firstChild) {\n    frag.appendChild(temp.firstChild);\n  }\n  return frag;\n}\n\nexport function fadeIn(el, duration, callback) {\n  el.style.opacity = 0;\n\n  let last = +new Date();\n  const tick = function () {\n    let newOpacity = +el.style.opacity + ((new Date() - last) / duration);\n    if (newOpacity > 1) {\n      newOpacity = 1;\n    }\n    el.style.opacity = newOpacity;\n    last = +new Date();\n\n    if (+el.style.opacity < 1) {\n      (window.requestAnimationFrame && requestAnimationFrame(tick)) || setTimeout(tick, 16);\n    } else if (typeof callback === 'function') {\n      callback();\n    }\n  };\n\n  tick();\n}\n\nexport function fadeOut(el, duration, callback) {\n  el.style.opacity = 1;\n\n  let last = +new Date();\n  const tick = function () {\n    let newOpacity = +el.style.opacity - ((new Date() - last) / duration);\n    if (newOpacity < 0) {\n      newOpacity = 0;\n    }\n    el.style.opacity = newOpacity;\n    last = +new Date();\n\n    if (+el.style.opacity > 0) {\n      (window.requestAnimationFrame && requestAnimationFrame(tick)) || setTimeout(tick, 16);\n    } else if (typeof callback === 'function') {\n      callback();\n    }\n  };\n\n  tick();\n}\n\nexport function isInViewport(elParam) {\n  let top = elParam.offsetTop;\n  let left = elParam.offsetLeft;\n  const width = elParam.offsetWidth;\n  const height = elParam.offsetHeight;\n\n  let el = elParam;\n  while (el.offsetParent) {\n    el = el.offsetParent;\n    top += el.offsetTop;\n    left += el.offsetLeft;\n  }\n\n  return (\n    top < (window.pageYOffset + window.innerHeight)\n    && left < (window.pageXOffset + window.innerWidth)\n    && (top + height) > window.pageYOffset\n    && (left + width) > window.pageXOffset\n  );\n}\n\nexport function getPercentOfView(element) {\n  const viewTop = window.pageYOffset;\n  const rect = element.getBoundingClientRect();\n  const elementTop = rect.top + viewTop;\n  const elementBottom = elementTop + rect.height;\n\n  const result = (window.pageYOffset - elementTop) / (elementBottom - window.innerHeight - elementTop) * 100;\n  if (result < 0) {\n    return 0;\n  }\n  if (result > 100) {\n    return 100;\n  }\n  return result;\n}\n","import UAParser from 'ua-parser-js';\n\nimport CleverPushError from '../error/CleverPushError';\n\nexport const SERVICE_WORKER = 'serviceWorker';\nexport const HOST = 'host';\nexport const POPUP = 'popup';\nexport const POPUP_UNSUBSCRIBE = 'popupUnsubscribe';\nexport const IFRAME = 'iframe';\nexport const CUSTOM_SUBDOMAIN = 'customSubdomain';\n\nconst parser = new UAParser();\nexport const browser = parser.getBrowser();\nexport const os = parser.getOS();\nexport const device = parser.getDevice();\n\nexport const MINIMUM_EDGE_VERSION_REQUIRED_FOR_UNBLOCK = 84;\nexport const MAXIMUM_EDGE_VERSION_REQUIRED_FOR_UNBLOCK = 88;\n\nconst MINIMUM_SAFARI_VERSION_PUSH_API = 16;\nconst MINIMUM_SAFARI_SUB_VERSION_PUSH_API = 1;\n\nconst browserVersionSplit = browser.version ? browser.version.split('.') : ['0'];\nexport const browserVersion = browser.version ? parseInt(browserVersionSplit[0], 10) : 0;\nexport const browserSubVersion = browserVersionSplit.length > 1 ? parseInt(browserVersionSplit[1], 10) : 0;\n\nexport const browserName = browser.name;\n\nexport const BROWSER_TYPES = {\n  CHROME: 'Chrome',\n  FIREFOX: 'Firefox',\n  EDGE: 'Edge',\n  CHROMIUM: 'Chromium',\n  OPERA: 'Opera'\n};\n\nexport const NOTIFICATION_ACCESS_TYPES = {\n  GRANT: 'grant',\n  DENIED: 'denied',\n  SILENT: 'silentPrompt'\n};\n\n/**\n * @return {boolean}\n */\nexport function isChromium() {\n  return browserName === BROWSER_TYPES.CHROMIUM;\n}\n\n/**\n * @return {boolean}\n */\nexport function isFirefox() {\n  return browserName === BROWSER_TYPES.FIREFOX;\n}\n\n/**\n * @return {boolean}\n */\nexport function isEdge() {\n  return browserName === BROWSER_TYPES.EDGE;\n}\n\n/**\n * Checks whether the current version range is between the required age\n * for unblocking notifications to occur.\n *\n * @return {boolean}\n */\nexport function inEdgeUnblockVersionRange() {\n  return browserVersion >= MINIMUM_EDGE_VERSION_REQUIRED_FOR_UNBLOCK\n      && browserVersion <= MAXIMUM_EDGE_VERSION_REQUIRED_FOR_UNBLOCK;\n}\n\n/**\n * Safari 16 and up supports the official W3C Push API\n * @see https://developer.apple.com/documentation/usernotifications/sending_web_push_notifications_in_safari_and_other_browsers?language=objc\n *\n * @return {boolean}\n */\nexport function doesSafariSupportPushApi() {\n  return browserVersion > MINIMUM_SAFARI_VERSION_PUSH_API || (browserVersion === MINIMUM_SAFARI_VERSION_PUSH_API && browserSubVersion >= MINIMUM_SAFARI_SUB_VERSION_PUSH_API);\n}\n\n/**\n * @return {boolean}\n */\nexport function isChrome() {\n  return browserName === BROWSER_TYPES.CHROME || browserName === BROWSER_TYPES.CHROMIUM || browserName === BROWSER_TYPES.OPERA;\n}\n\n/**\n * @return {boolean}\n */\nexport function isChromeOrChromium() {\n  return isChrome() || isChromium();\n}\n\n/**\n * @return {boolean}\n */\nexport function isNewerEdge() {\n  return browserVersion >= MAXIMUM_EDGE_VERSION_REQUIRED_FOR_UNBLOCK;\n}\n\nexport function getBrowserName() {\n  return browserName;\n}\n\nexport function isDev() {\n  if (typeof process.env.NODE_ENV === 'undefined') {\n    return true;\n  }\n  return process.env.NODE_ENV === 'development';\n}\n\nexport function getEnv(configParam) {\n  if (typeof window === 'undefined') {\n    if (typeof WorkerLocation !== 'undefined' && location instanceof WorkerLocation) {\n      return SERVICE_WORKER;\n    }\n  } else {\n    let config = configParam;\n    if (!config) {\n      config = (window.CleverPush || {}).config || {};\n    }\n\n    if (config && config.env === 'HOST') {\n      return HOST;\n    }\n\n    if (window === window.top) {\n      const cleverpushDomain = config.cleverpushDomain;\n\n      if (config.env === 'POPUP' || location.hostname.indexOf('.cleverpush.com') > -1 || isDev()) {\n        if (location.pathname.indexOf('/subscribe') === 0) {\n          return POPUP;\n        }\n      } else if (cleverpushDomain && location.hostname.indexOf(`.${cleverpushDomain}`) > -1) {\n        if (location.pathname.indexOf('/subscribe') === 0) {\n          return POPUP;\n        }\n      }\n      return HOST;\n    }\n\n    if (location.pathname.indexOf('/iframe') === 0 || location.pathname.indexOf('/referrals') === 0) {\n      return IFRAME;\n    }\n\n    try {\n      // accessing top.location might throw a security error\n      if (location.origin === top.location.origin) {\n        return HOST;\n      }\n    } catch (ignored) {}\n\n    return CUSTOM_SUBDOMAIN;\n  }\n  return null;\n}\n\nexport function isServiceWorker() {\n  return getEnv() === SERVICE_WORKER;\n}\n\nexport function isHost(config) {\n  return getEnv(config) === HOST;\n}\n\nexport function isBrowser() {\n  return typeof window !== 'undefined';\n}\n\nexport function isAndroid() {\n  return /Android/.test(navigator.userAgent);\n}\n\nexport function isPopup(config) {\n  return getEnv(config) === POPUP && isBrowser();\n}\n\nexport function isPopupUnsubscribe() {\n  return location.hostname.indexOf('.cleverpush.com') > -1 && location.pathname.indexOf('/unsubscribe') === 0 && isBrowser();\n}\n\nexport function isIframe(config) {\n  return getEnv(config) === IFRAME && isBrowser();\n}\n\nexport function isProduction() {\n  if (typeof ENVIRONMENT === 'undefined') {\n    return false;\n  }\n  return process.env.NODE_ENV === 'production';\n}\n\nexport function getScrollPercentage() {\n  const h = document.documentElement;\n  const b = document.body;\n  const st = 'scrollTop';\n  const sh = 'scrollHeight';\n  return (h[st] || b[st]) / ((h[sh] || b[sh]) - h.clientHeight) * 100;\n}\n\nexport function getScrollPixels() {\n  const h = document.documentElement;\n  const b = document.body;\n  const st = 'scrollTop';\n  return (h[st] || b[st]);\n}\n\nexport function detectPrivateMode() {\n  return new Promise((resolve) => {\n    const on = () => resolve(true); // is in private mode\n    const off = () => resolve(false); // not private mode\n    const testLocalStorage = () => {\n      try {\n        if (localStorage.length) off();\n        else {\n          localStorage.x = 1;\n          localStorage.removeItem('x');\n          off();\n        }\n      } catch (e) {\n        // Safari only enables cookie in private mode\n        // if cookie is disabled then all client side storage is disabled\n        // if all client side storage is disabled, then there is no point\n        // in using private mode\n        navigator.cookieEnabled ? on() : off();\n      }\n    };\n    // Chrome & Opera\n    if (window.webkitRequestFileSystem) {\n      return void window.webkitRequestFileSystem(0, 0, off, on);\n    }\n    // Firefox\n    if ('MozAppearance' in document.documentElement.style) {\n      const db = indexedDB.open('test');\n      db.onerror = on;\n      db.onsuccess = off;\n      return void 0;\n    }\n    // Safari\n    if (/constructor/i.test(window.HTMLElement) || (navigator.vendor && navigator.vendor.indexOf('Apple') > -1\n      && navigator.userAgent\n      && navigator.userAgent.indexOf('CriOS') < 0\n      && navigator.userAgent.indexOf('FxiOS') < 0)) {\n      if (typeof window.openDatabase !== 'undefined') {\n        try {\n          window.openDatabase(null, null, null, null);\n          window.localStorage.setItem('test', 1);\n        } catch (e) {\n          return on();\n        }\n      }\n      return testLocalStorage();\n    }\n    // IE10+ & Edge\n    if (!window.indexedDB && (window.PointerEvent || window.MSPointerEvent)) {\n      return on();\n    }\n    // others\n    return off();\n  });\n}\n\nconst isSafari = () => 'safari' in window && typeof window.safari === 'object';\n\nconst supportsSafariPushNotifications = () => 'pushNotification' in window.safari;\n\n// navigator.serviceWorker is undefined for chrome on http sites\nconst supportsPushApi = () => typeof window.Notification !== 'undefined' && ('serviceWorker' in navigator || location.protocol === 'http:');\n\nexport function supportsPush() {\n  let supported = true;\n  let browserType = null;\n\n  return new Promise((resolve, reject) => {\n    detectPrivateMode()\n      .then((isPrivate) => {\n        if (isPrivate) {\n          supported = false;\n          browserType = null;\n          reject(new CleverPushError('Private browsing mode not supported.', 'private-mode'));\n        } else {\n          // safari\n          if (isSafari()) {\n            if (doesSafariSupportPushApi() && supportsPushApi()) {\n              browserType = 'w3c';\n            } else if (supportsSafariPushNotifications()) {\n              browserType = 'safari';\n            } else {\n              supported = false;\n              browserType = null;\n              reject(new CleverPushError('Browser is not supported.', 'unsupported-browser'));\n            }\n\n          // w3c web push\n          } else if (supportsPushApi()) {\n            browserType = 'w3c';\n          } else {\n            supported = false;\n            browserType = null;\n            reject(new CleverPushError('Browser is not supported.', 'unsupported-browser'));\n          }\n\n          // Real feature detection for the Push API happens here\n          if (supported && browserType !== 'safari' && browserType !== 'ios') {\n            if (location.protocol !== 'http:' && !('showNotification' in ServiceWorkerRegistration.prototype)) {\n              supported = false;\n              reject(new CleverPushError('Notifications aren\\'t supported.', 'unsupported-browser'));\n            } else if (!('PushManager' in window)) {\n              supported = false;\n              reject(new CleverPushError('Push messaging isn\\'t supported.', 'unsupported-browser'));\n            }\n\n            if (!('serviceWorker' in navigator) && location.protocol !== 'http:') {\n              supported = false;\n              reject(new CleverPushError('Service workers are not supported.', 'unsupported-browser'));\n            }\n\n            if (navigator.userAgent.indexOf('Iron') > -1 && navigator.userAgent.indexOf('Chrome') > -1) {\n              supported = false;\n              reject(new CleverPushError('SRWare Iron does not support push', 'unsupported-browser'));\n            }\n          }\n\n          if (supported) {\n            if (window.self === window.top && browserType === 'w3c' && navigator.serviceWorker && typeof navigator.serviceWorker.getRegistrations === 'function') {\n              navigator.serviceWorker.getRegistrations()\n                .then(() => resolve(browserType))\n                .catch(() => reject(new CleverPushError('Service workers are not supported', 'unsupported-browser')));\n            } else {\n              resolve(browserType);\n            }\n          }\n        }\n      });\n  });\n}\n\nexport function isWebView() {\n  if (window.ReactNativeWebView) {\n    // ReactNative WebView (e.g. CleverPush App Builder)\n    return true;\n  }\n\n  // We might support other WebViews later, if requested by customers.\n\n  return false;\n}\n","import {\n  WHITESPACE_REGEX,\n  SPACE_CHARACTER,\n} from '../const/common';\n\nconst TagNames = {\n  IMAGE: 'img',\n  ANKER: 'a',\n  INPUT: 'input',\n  TEXTAREA: 'textarea',\n  META: 'meta',\n};\n\nexport const getFollowUpVariableFromElement = (element, variableName) => {\n  const skipHrefAnkerTag = !variableName?.toLowerCase().includes('url') && element.className.includes('product-name');\n  const tagName = element.tagName.toLowerCase();\n  if (tagName === TagNames.IMAGE && (element.src || (element.dataset && element.dataset.src) || (element.dataset && element.dataset.zoom))) {\n    let imageSource = element.src || (element.dataset && element.dataset.src) || (element.dataset && element.dataset.zoom);\n    if (imageSource?.startsWith('//')) {\n      imageSource = `https:${imageSource}`;\n    }\n    return imageSource;\n  }\n  if (tagName === TagNames.ANKER && element.href && !skipHrefAnkerTag) {\n    return element.href;\n  }\n  if ((tagName === TagNames.INPUT || tagName === TagNames.TEXTAREA) && element.value) {\n    return element.value;\n  }\n  if ((tagName === TagNames.META) && element.content) {\n    return element.content;\n  }\n  const elementText = element.textContent || element.innerText;\n  return elementText.trim().replace(WHITESPACE_REGEX, SPACE_CHARACTER);\n};\n","export const ENVIRONMENTS = {\n  DEVELOPMENT: 'development',\n  PRODUCTION: 'production',\n  STAGE: 'stage',\n};\n\nexport const CLEVERPUSH_API_ENDPOINTS = {\n  DEVELOPMENT: 'http://localhost:4000',\n  PRODUCTION: 'https://api.cleverpush.com',\n  STAGE: 'https://api-stage.cleverpush.com',\n};\n\nexport function getApiEndpoint() {\n  try {\n    if (ENVIRONMENT === ENVIRONMENTS.DEVELOPMENT) {\n      return window.apiEndpoint || CLEVERPUSH_API_ENDPOINTS.DEVELOPMENT;\n    }\n\n    if (ENVIRONMENT === ENVIRONMENTS.STAGE) {\n      return window.apiEndpoint || CLEVERPUSH_API_ENDPOINTS.STAGE;\n    }\n\n    return CLEVERPUSH_API_ENDPOINTS.PRODUCTION;\n  } catch (error) {\n    return CLEVERPUSH_API_ENDPOINTS.PRODUCTION;\n  }\n}\n","import { log } from './debug';\n\nexport const triggerPathAndQuery = (triggerPath) => {\n  try {\n    const triggerPathSplit = triggerPath.indexOf('?!') > -1 ? [triggerPath] : triggerPath.split('?');\n    let triggers = new RegExp(triggerPathSplit[0]).test(location.pathname);\n\n    if (triggers && triggerPathSplit.length > 1) {\n      if (typeof URLSearchParams !== 'undefined' && location.search && location.search.length) {\n        const triggerParams = new URLSearchParams(triggerPathSplit[1]);\n        const currentParams = new URLSearchParams(location.search.slice(1));\n        triggerParams.forEach((value, key) => {\n          const paramValue = currentParams.get(key);\n          if (\n            (paramValue !== value && value && value !== '*')\n            || (!paramValue && value === '*')\n          ) {\n            triggers = false;\n          }\n        });\n      } else if (triggerPathSplit[1].length > 1) {\n        triggers = false;\n      }\n    } else if (location.search && location.search.length && !triggerPath.includes('?') && triggerPath[triggerPath.length - 1] === '$') {\n      triggers = false;\n    }\n\n    return triggers;\n  } catch (err) {\n    return false;\n  }\n};\n\n/**\n  * This function will match include/exclude path, query, domain and trafficPercentage\n  *\n  * @param {Boolean} show\n  * @param {object} banner Web Banner\n  * @returns {Boolean}\n  */\nexport const matchElementPathAndDomain = async (show, element, ignoreTrafficPercentage) => {\n  if (show && element.matchPath) {\n    show = triggerPathAndQuery(element.matchPath);\n  }\n\n  if (show && element.notMatchPath) {\n    show = !(new RegExp(element.notMatchPath).test(window.location.pathname));\n  }\n\n  if (show && element.matchDomain) {\n    const domain = element.matchDomain.replace('https://', '');\n    show = new RegExp(domain).test(window.location.hostname || window.location.host);\n  }\n\n  if (show && element.matchQuery) {\n    Object.keys(element.matchQuery || {}).forEach((query) => {\n      if (element.matchQuery[query]) {\n        show = show && window.location.search && window.location.search.indexOf(`${query}=${element.matchQuery[query]}`) > -1;\n      }\n    });\n  }\n\n  if (show && element.matchFunction) {\n    try {\n      const value = eval(element.matchFunction);\n      if (typeof value === 'object' && value.then) {\n        try {\n          show = !!(await value);\n        } catch (err) {\n          log.debug(err);\n        }\n      } else {\n        show = !!value;\n      }\n    } catch (err) {\n      show = false;\n      log.debug(err);\n    }\n  }\n\n  if (!ignoreTrafficPercentage\n    && show\n    && !isNaN(element.trafficPercentage)\n    && element.trafficPercentage > 0\n    && element.trafficPercentage < 100) {\n    show = (element.trafficPercentage / 100) > Math.random();\n  }\n  return show;\n};\n","const TCF_VERSION = 2;\nconst SYNC_PARAMETERS_TIMEOUT = 10000;\nconst PIANO_ENABLED_WAIT_TIMEOUT = 2000;\n\nconst pianoChangeListeners = [];\nlet pianoEnabled = true;\n\nconst getTCFVendors = () => new Promise((resolve) => {\n  if (window.UC_UI && window.UC_UI.getTCFVendors) {\n    resolve(window.UC_UI.getTCFVendors());\n    return;\n  }\n  __tcfapi('getVendorList', TCF_VERSION, (vendorList, vendorListSuccess) => {\n    if (!vendorListSuccess || !vendorList.vendors) {\n      resolve(null);\n      return;\n    }\n    const vendors = Object.values(vendorList.vendors);\n    resolve(vendors);\n  });\n});\n\n// Check in UserCentrics + TCF2 if Piano is enabled or disabled\n(async () => {\n  if (typeof __tcfapi === 'function' && typeof UC_UI === 'object') {\n    const getPianoService = () => new Promise((resolve) => {\n      getTCFVendors().then((vendors) => {\n        if (!vendors) {\n          resolve(null);\n          return;\n        }\n\n        const pianoVendor = vendors.find((vendor) => (\n          vendor.name && (vendor.name.toLowerCase().indexOf('cxense') > -1 || vendor.name.toLowerCase().indexOf('piano') > -1)\n        ));\n\n        if (!pianoVendor) {\n          resolve(null);\n          return;\n        }\n\n        __tcfapi('addEventListener', TCF_VERSION, (tcData, success) => {\n          __tcfapi('removeEventListener', TCF_VERSION, () => {}, tcData.listenerId);\n\n          if (!success || !tcData.vendor || !tcData.vendor.consents) {\n            resolve(null);\n            return;\n          }\n\n          resolve({\n            ...pianoVendor,\n            consent: { status: tcData.vendor.consents[pianoVendor.id] }\n          });\n        });\n      });\n    });\n\n    pianoEnabled = false;\n    let pianoService = await getPianoService();\n    if (pianoService) {\n      pianoEnabled = pianoService.consent.status;\n    }\n\n    __tcfapi('addEventListener', TCF_VERSION, async (success) => {\n      if (!success) {\n        return;\n      }\n      pianoService = await getPianoService();\n      if (pianoService) {\n        const pianoEnabledNew = pianoService.consent.status;\n        if (pianoEnabledNew !== pianoEnabled) {\n          pianoEnabled = pianoEnabledNew;\n          pianoChangeListeners.forEach((listener) => typeof listener === 'function' && listener(pianoEnabled));\n        }\n      }\n    });\n  }\n})();\n\nexport const getPianoEnabled = () => pianoEnabled;\n\nexport const onPianoEnabledChange = (listener) => pianoChangeListeners.push(listener);\n\nconst waitForPianoEnabled = (timeout) => new Promise((resolve) => {\n  if (pianoEnabled) {\n    return resolve(true);\n  }\n  Promise.race([\n    new Promise((timeoutResolve) => {\n      setTimeout(timeoutResolve, timeout);\n    }),\n    new Promise((enabledChangeResolve) => {\n      onPianoEnabledChange(enabledChangeResolve);\n    })\n  ]).then(resolve);\n});\n\nexport const getPianoUserData = () => new Promise((resolve) => {\n  let resolved = false;\n  const pianoTimeout = setTimeout(() => {\n    resolved = true;\n    resolve({});\n  }, SYNC_PARAMETERS_TIMEOUT);\n\n  waitForPianoEnabled(PIANO_ENABLED_WAIT_TIMEOUT).then(() => {\n    if (pianoEnabled) {\n      // in case piano is enabled in CMP (or not found)\n      const cX = window.cX || {};\n      cX.callQueue = cX.callQueue || [];\n      cX.callQueue.push(['getUserSegmentIds', {\n        persistedQueryId: self.CleverPush.config.pianoPublicPersistedId,\n        callback: (segments) => {\n          if (resolved) {\n            return;\n          }\n\n          clearTimeout(pianoTimeout);\n          resolved = true;\n\n          resolve({\n            segments,\n          });\n        }\n      }]);\n    } else {\n      if (resolved) {\n        return;\n      }\n\n      clearTimeout(pianoTimeout);\n      resolved = true;\n\n      // in case use removed piano from CMP again\n      resolve({\n        segments: [],\n        userId: 'optout'\n      });\n    }\n  });\n});\n\nexport const getPianoSegmentsHash = async () => {\n  const { segments } = await getPianoUserData();\n  const segmentsString = JSON.stringify(segments);\n  const msgUint8 = new TextEncoder().encode(segmentsString);\n  const hashBuffer = await crypto.subtle.digest('SHA-256', msgUint8);\n  const hashArray = Array.from(new Uint8Array(hashBuffer));\n  const hashHex = hashArray.map((b) => b.toString(16).padStart(2, '0')).join('');\n  return hashHex;\n};\n","if (!Array.prototype.find) {\n  Object.defineProperty(Array.prototype, 'find', {\n    value(predicate) {\n      // 1. Let O be ? ToObject(this value).\n      if (this == null) {\n        throw new TypeError('\"this\" is null or not defined');\n      }\n\n      const o = Object(this);\n\n      // 2. Let len be ? ToLength(? Get(O, \"length\")).\n      const len = o.length >>> 0;\n\n      // 3. If IsCallable(predicate) is false, throw a TypeError exception.\n      if (typeof predicate !== 'function') {\n        throw new TypeError('predicate must be a function');\n      }\n\n      // 4. If thisArg was supplied, let T be thisArg; else let T be undefined.\n      const thisArg = arguments[1];\n\n      // 5. Let k be 0.\n      let k = 0;\n\n      // 6. Repeat, while k < len\n      while (k < len) {\n        // a. Let Pk be ! ToString(k).\n        // b. Let kValue be ? Get(O, Pk).\n        // c. Let testResult be ToBoolean(? Call(predicate, T, « kValue, k, O »)).\n        // d. If testResult is true, return kValue.\n        const kValue = o[k];\n        if (predicate.call(thisArg, kValue, k, o)) {\n          return kValue;\n        }\n        // e. Increase k by 1.\n        k++;\n      }\n\n      // 7. Return undefined.\n      return undefined;\n    },\n    configurable: true,\n    writable: true\n  });\n}\n","export const getRandomTestVariant = (doc) => {\n  if (!doc.testsEnabled || !doc.tests?.length) {\n    return doc;\n  }\n  const randomIndex = Math.floor(Math.random() * doc.tests?.length);\n  return {\n    ...doc,\n    ...doc.tests[randomIndex],\n    testId: doc.tests[randomIndex]?.id,\n    id: doc.id || doc._id\n  };\n};\n","import CleverPushError from '../error/CleverPushError';\n\nfunction fetchWithTimeout(url, options, timeout = 10000) {\n  return Promise.race([\n    fetch(url, options),\n    new Promise((_, reject) => setTimeout(() => reject(new Error('request timeout')), timeout))\n  ]);\n}\n\n/**\n * Parses the JSON returned by a network request\n *\n * @param  {object} response A response from a network request\n *\n * @return {object}          The parsed JSON, status from the response\n */\nfunction parseJSON(response) {\n  return new Promise((resolve) => response.json()\n    .then((json) => resolve({\n      status: response.status,\n      ok: response.ok,\n      json\n    })).catch(() => resolve({\n      status: response.status,\n      ok: response.ok,\n      json: null\n    })));\n}\n\n/**\n * Requests a URL, returning a promise\n *\n * @param  {string} url       The URL we want to request\n * @param  {object} [options] The options we want to pass to \"fetch\"\n *\n * @return {Promise}           The request promise\n */\nexport default function request(url, options) {\n  return new Promise((resolve, reject) => {\n    fetchWithTimeout(url, options, options.timeout || 10000)\n      .then(parseJSON)\n      .then((response) => {\n        if (response.ok) {\n          return resolve(response.json);\n        }\n        // extract the error from the server's json\n        return reject(new CleverPushError(response.json ? response.json.error : 'HTTP Error', response.status));\n      })\n      .catch((error) => reject(error));\n  });\n}\n","import { log, logMethodCall } from './debug';\n\nexport const autoAssignTagMatches = (tag, pathname, callback) => {\n  if (tag.autoAssignPath) {\n    let path = tag.autoAssignPath;\n    if (path === '[EMPTY]') {\n      path = '';\n    }\n    if (new RegExp(path).test(pathname)) {\n      if (!tag.autoAssignFunction && !tag.autoAssignSelector) {\n        return callback(true);\n      }\n      // wait for function check\n    } else {\n      return;\n    }\n  }\n\n  if (tag.autoAssignFunction) {\n    try {\n      if (tag.autoAssignCheckInterval && !isNaN(tag.autoAssignCheckInterval)) {\n        const interval = setInterval(() => {\n          try {\n            const matches = eval(tag.autoAssignFunction);\n\n            if (typeof matches === 'object' && matches.then) {\n              try {\n                matches.then(() => {\n                  clearInterval(interval);\n                  callback(true);\n                });\n              } catch (err) {\n              }\n            } else if (matches) {\n              clearInterval(interval);\n              callback(true);\n            }\n          } catch (err) {\n            log.debug(err);\n          }\n        }, tag.autoAssignCheckInterval);\n        return null;\n      }\n\n      const matches = eval(tag.autoAssignFunction);\n      if (typeof matches === 'object' && matches.then) {\n        try {\n          matches.then(() => {\n            callback(true);\n          });\n        } catch (err) {\n        }\n        return;\n      }\n      return callback(!!matches);\n    } catch (err) {\n      log.debug(err);\n    }\n  }\n\n  if (tag.autoAssignSelector) {\n    try {\n      const triggerElems = document.querySelectorAll(tag.autoAssignSelector);\n      for (let triggerElemIndex = 0; triggerElemIndex < triggerElems.length; triggerElemIndex += 1) {\n        const triggerElem = triggerElems[triggerElemIndex];\n        if (triggerElem) {\n          triggerElem.addEventListener('click', () => {\n            callback(true);\n          });\n        }\n      }\n      return null;\n    } catch (err) {\n      log.debug(err);\n    }\n  }\n\n  return callback(false);\n};\n\nexport const checkTags = (tags, storedTags, tagSubscription, waitForSubscription, pathname) => {\n  logMethodCall('checkTags');\n\n  if (tags && tags.length && typeof localStorage !== 'undefined') {\n    tags.forEach((tag) => {\n      try {\n        autoAssignTagMatches(tag, pathname, (matches) => {\n          if (matches) {\n            const visitsNeeded = !isNaN(tag.autoAssignVisits) ? tag.autoAssignVisits : 0;\n            const visitsStorageKey = `cleverpush-tag-autoAssignVisits-${tag._id}`;\n            const visitsStorage = tag.autoAssignSessionVisits ? sessionStorage : localStorage;\n\n            const dateKey = new Date().toISOString().substr(0, 10);\n            let dateAfter;\n            if (tag.autoAssignDays) {\n              dateAfter = new Date();\n              dateAfter.setDate(dateAfter.getDate() - tag.autoAssignDays);\n            }\n\n            const visitsStr = visitsStorage.getItem(visitsStorageKey);\n            let visits = 0;\n            let dailyVisits = {};\n            if (tag.autoAssignDays) {\n              try {\n                dailyVisits = JSON.parse(visitsStr) || {};\n                if (typeof dailyVisits !== 'object') {\n                  dailyVisits = {};\n                }\n                Object.keys(dailyVisits || {}).forEach((curDateKey) => {\n                  const curDate = new Date(curDateKey);\n                  if (curDate >= dateAfter) {\n                    visits += dailyVisits[curDateKey] || 0;\n                  } else {\n                    delete dailyVisits[curDateKey];\n                  }\n                });\n              } catch (ignored) {\n                dailyVisits = {};\n              }\n            } else if (typeof visitsStr === 'string' && !isNaN(visitsStr)) {\n              visits = parseInt(visitsStr, 10);\n            }\n\n            const sessionsNeeded = !isNaN(tag.autoAssignSessions) ? tag.autoAssignSessions : 0;\n            const sessionsStorageKey = `cleverpush-tag-autoAssignSessions-${tag._id}`;\n            const sessionsCountedStorageKey = `cleverpush-tag-autoAssignSessionsCounted-${tag._id}`;\n            const sessionsStr = localStorage.getItem(sessionsStorageKey);\n            let sessions = 0;\n            let dailySessions = {};\n            if (tag.autoAssignDays) {\n              try {\n                dailySessions = JSON.parse(sessionsStr) || {};\n                if (typeof dailySessions !== 'object') {\n                  dailySessions = {};\n                }\n                Object.keys(dailySessions || {}).forEach((curDateKey) => {\n                  const curDate = new Date(curDateKey);\n                  if (curDate >= dateAfter) {\n                    sessions += dailySessions[curDateKey] || 0;\n                  } else {\n                    delete dailySessions[curDateKey];\n                  }\n                });\n              } catch (ignored) {\n                dailySessions = {};\n              }\n            } else if (typeof sessionsStr === 'string' && !isNaN(sessionsStr)) {\n              sessions = parseInt(sessionsStr, 10);\n            }\n\n            if (sessions >= sessionsNeeded) {\n              if (visits >= visitsNeeded) {\n                if (!isNaN(tag.autoAssignSeconds) && tag.autoAssignSeconds) {\n                  setTimeout(() => {\n                    tagSubscription(tag._id);\n                  }, tag.autoAssignSeconds * 1000);\n                } else {\n                  tagSubscription(tag._id);\n                }\n              } else if (tag.autoAssignDays) {\n                if (!dailyVisits[dateKey]) {\n                  dailyVisits[dateKey] = 0;\n                }\n                dailyVisits[dateKey] += 1;\n\n                waitForSubscription().then(() => {\n                  localStorage.setItem(visitsStorageKey, JSON.stringify(dailyVisits));\n                });\n              } else {\n                visits += 1;\n                waitForSubscription().then(() => {\n                  visitsStorage.setItem(visitsStorageKey, visits.toString());\n                });\n              }\n            } else if (tag.autoAssignDays) {\n              if (!dailyVisits[dateKey]) {\n                dailyVisits[dateKey] = 0;\n              }\n              dailyVisits[dateKey] += 1;\n\n              waitForSubscription().then(() => {\n                localStorage.setItem(visitsStorageKey, JSON.stringify(dailyVisits));\n              });\n\n              if (sessionStorage.getItem(sessionsCountedStorageKey) !== 'true') {\n                if (!dailySessions[dateKey]) {\n                  dailySessions[dateKey] = 0;\n                }\n                dailySessions[dateKey] += 1;\n\n                waitForSubscription().then(() => {\n                  sessionStorage.setItem(sessionsCountedStorageKey, 'true');\n                  localStorage.setItem(sessionsStorageKey, JSON.stringify(dailySessions));\n                });\n              }\n            } else {\n              visits += 1;\n              waitForSubscription().then(() => {\n                visitsStorage.setItem(visitsStorageKey, visits.toString());\n              });\n\n              if (sessionStorage.getItem(sessionsCountedStorageKey) !== 'true') {\n                sessions += 1;\n\n                waitForSubscription().then(() => {\n                  sessionStorage.setItem(sessionsCountedStorageKey, 'true');\n                  localStorage.setItem(sessionsStorageKey, sessions.toString());\n                });\n              }\n            }\n          }\n        });\n      } catch (error) {\n        log.debug('checkTags', error?.message);\n      }\n    });\n  }\n};\n","import UAParser from 'ua-parser-js';\n\nimport translations from '../const/translation';\n\nconst DEFAULT_LANG = 'en';\n\nexport const detectLanguage = (config) => {\n  if (config?.enableTranslationLanguageFromHTML && document.documentElement.lang) {\n    return (document.documentElement.lang).substring(0, 2);\n  }\n\n  return config?.locale || (navigator.language || navigator.userLanguage || '').substr(0, 2) || DEFAULT_LANG;\n};\n\nexport function charsetEscape(text) {\n  if (!text) {\n    return text;\n  }\n  let newText = text;\n  const charset = (document.characterSet || '').toLowerCase();\n  if (charset.indexOf('windows-1252') > -1 || charset.indexOf('iso-8859') > -1) {\n    try {\n      let escapedText = escape(text);\n      escapedText = escapedText.replace(new RegExp('%E2%u20AC%u017E', 'g'), '%E2%80%9E');\n      escapedText = escapedText.replace(new RegExp('%E2%u20AC%u0153', 'g'), '%E2%80%9C');\n      newText = decodeURIComponent(escapedText);\n    } catch (error) {\n      newText = new TextDecoder('utf-8').decode(Uint8Array.from(text, (x) => x.charCodeAt(0)));\n    }\n  }\n  return newText;\n}\n\nexport function translate(keyParam, charsetAlreadyEscaped) {\n  let lang = detectLanguage((window.CleverPush || { config: {} }).config);\n  lang = lang !== 'de-formal' ? lang.substr(0, 2).toLowerCase() : lang;\n  if (!translations.hasOwnProperty(lang)) {\n    lang = DEFAULT_LANG;\n  }\n\n  let key = keyParam;\n  if (key === 'confirm.allowBrowser') {\n    key = 'confirm.allow';\n    const parser = new UAParser();\n    if (parser.getBrowser().name === 'Chrome' || parser.getBrowser().name === 'Edge') {\n      key = 'confirm.allowChrome';\n    } else if (parser.getBrowser().name === 'Firefox') {\n      key = 'confirm.allowFirefox';\n    }\n  } else if (key === 'deny.alert') {\n    if (location.protocol === 'https:') {\n      key = 'deny.alertHttps';\n    } else {\n      key = 'deny.alertHttp';\n    }\n  }\n\n  let trans;\n  if (translations[lang].hasOwnProperty(key)) {\n    trans = translations[lang][key];\n  } else if (translations[DEFAULT_LANG].hasOwnProperty(key)) {\n    trans = translations[DEFAULT_LANG][key];\n  }\n\n  if (trans) {\n    if (!charsetAlreadyEscaped) {\n      return charsetEscape(trans);\n    }\n    return trans;\n  }\n\n  return key;\n}\n\nString.prototype.formatCleverPush = function () {\n  let formatted = this;\n  for (const arg in arguments) {\n    if (arguments.hasOwnProperty(arg) && typeof formatted.replace === 'function') {\n      formatted = formatted.replace(`{${arg}}`, arguments[arg]);\n    }\n  }\n  return formatted;\n};\n","import { CSS_SELECTOR_SEPARATOR, FOLLOW_UP_PARENT_ELEMENTS_CHECK } from '../const/common';\nimport { log } from './debug';\nimport { getPercentOfView } from './dom';\nimport { getFollowUpVariableFromElement } from './followUp';\nimport { triggerPathAndQuery } from './matchElementPathAndDomain';\n\nexport const prepareJourneyOrFollowUpTriggers = (doc, triggerFollowUpEvent, triggerJourneyEvent, isFollowUpCampaign = true) => {\n  let triggered = false;\n  const trigger = (triggerElement, extraVariables) => {\n    triggered = true;\n\n    let variables = {};\n    if (doc.triggerAutoVariables && doc.triggerAutoVariables.length) {\n      doc.triggerAutoVariables.forEach((variable) => {\n        const variableName = variable.variable;\n\n        if (variableName === 'scrollPercentage') {\n          variables[variableName] = window.pageYOffset;\n          return;\n        }\n\n        if (variable.selectorType === 'js') {\n          try {\n            variables[variableName] = eval(variable.selector);\n            return;\n          } catch (ignored) { }\n        }\n\n        if (variable.selector && variable.selector.indexOf('javascript:') === 0) {\n          const javascriptCode = variable.selector.substr('javascript:'.length);\n          try {\n            variables[variableName] = eval(javascriptCode);\n            return;\n          } catch (ignored) { }\n        }\n\n        let element;\n        variable.selector.split(CSS_SELECTOR_SEPARATOR).forEach((selector) => {\n          if (element) {\n            return;\n          }\n\n          // go up to 10 parent elements, if no match use document\n          let tryElement = triggerElement;\n          try {\n            for (let i = 0; i < FOLLOW_UP_PARENT_ELEMENTS_CHECK; i += 1) {\n              element = tryElement.querySelector(selector.trim());\n              if (element) {\n                break;\n              }\n              tryElement = tryElement.parentNode;\n              if (!tryElement) {\n                break;\n              }\n            }\n\n            if (!element) {\n              element = document.querySelector(selector.trim());\n            }\n          } catch (error) {\n            log.debug('followUp variable error', error?.message);\n          }\n        });\n\n        if (element) {\n          variables[variableName] = getFollowUpVariableFromElement(element, variableName);\n        }\n      });\n    }\n\n    if (typeof extraVariables === 'object') {\n      variables = Object.assign(variables, extraVariables);\n    }\n\n    const triggerEventName = `trigger${doc.triggerType[0].substr(0, 1).toUpperCase() + doc.triggerType.substr(1)}`;\n\n    if (isFollowUpCampaign) {\n      triggerFollowUpEvent(doc._id, triggerEventName, variables);\n    } else {\n      triggerJourneyEvent(doc._id, triggerEventName, variables, doc.type);\n    }\n  };\n\n  if (doc.triggerType === 'articleBounce' && window.location.hash.indexOf('#cleverPushScroll') !== 0) {\n    const setupBounce = () => {\n      window.addEventListener('unload', () => {\n        const articleElement = document.querySelector(doc.triggerArticleSelector || 'article');\n        if (articleElement) {\n          const scrollPercent = getPercentOfView(articleElement);\n          if (scrollPercent >= (doc.triggerArticleMinScroll || 0) && scrollPercent <= (doc.triggerArticleMaxScroll || 80)) {\n            trigger(document);\n          }\n        }\n      });\n    };\n\n    if (doc.triggerFunction) {\n      let success = false;\n      try {\n        success = !!eval(doc.triggerFunction);\n      } catch (err) {\n        log.debug(err);\n      }\n      if (success) {\n        setupBounce();\n      }\n    } else {\n      setupBounce();\n    }\n  }\n\n  if (doc.triggerType === 'selector' && doc.triggerSelector) {\n    const setupSelector = () => {\n      const triggerElements = document.querySelectorAll(doc.triggerSelector);\n      for (let triggerElementIndex = 0; triggerElementIndex < triggerElements.length; triggerElementIndex += 1) {\n        const triggerElement = triggerElements[triggerElementIndex];\n        if (triggerElement) {\n          triggerElement.addEventListener('click', () => {\n            trigger(triggerElement.parentNode);\n          }, true);\n        }\n      }\n    };\n\n    if (doc.triggerFunction) {\n      let success = false;\n      try {\n        success = !!eval(doc.triggerFunction);\n      } catch (err) {\n        log.debug(err);\n      }\n      if (success) {\n        setupSelector();\n      }\n    } else {\n      setupSelector();\n    }\n  }\n\n  if (doc.triggerType === 'function' && doc.triggerFunction) {\n    let result;\n    try {\n      result = eval(doc.triggerFunction);\n    } catch (err) {\n      log.debug(err);\n    }\n    if (typeof result === 'object' && result?.then) {\n      try {\n        result.then((variables) => {\n          trigger(document, variables);\n        }).catch((err) => {\n          log.debug(err);\n        });\n      } catch (err) {\n        log.debug(err);\n      }\n    } else if (result) {\n      trigger(document);\n    }\n  } else if (doc.triggerType === 'path' && doc.triggerPath && triggerPathAndQuery(doc.triggerPath)) {\n    trigger(document);\n  }\n\n  if (doc.triggerType === 'exitIntent') {\n    import('ouibounce').then(({ default: ouibounce }) => {\n      ouibounce(null, {\n        aggressive: true,\n        callback: () => {\n          if (doc.triggerFunction) {\n            let result;\n            try {\n              result = eval(doc.triggerFunction);\n            } catch (err) {\n              log.debug(err);\n            }\n            if (!result) {\n              return;\n            }\n          }\n\n          if (doc.triggerPath && !triggerPathAndQuery(doc.triggerPath)) {\n            return;\n          }\n\n          trigger(document);\n        }\n      });\n    });\n  }\n\n  if (['productAvailability', 'productPriceReduction'].includes(doc.triggerType) && doc.triggerFunction) {\n    let productId;\n    try {\n      productId = eval(doc.triggerFunction);\n    } catch (err) {\n      log.debug(err);\n    }\n    // allow delayed triggers with promises\n    if (typeof productId === 'object' && productId?.then) {\n      try {\n        productId.then((id) => {\n          if (id && typeof id !== 'object') {\n            trigger(document, { id });\n          }\n        }).catch((err) => {\n          log.debug(err);\n        });\n      } catch (err) {\n        log.debug(err);\n      }\n    } else if (productId) {\n      trigger(document, { id: productId });\n    }\n  }\n\n  if ((doc.cancelType === 'selector' || doc.cancelType === 'function') && doc.cancelSelector) {\n    const triggerElements = document.querySelectorAll(doc.cancelSelector);\n    for (let triggerElementIndex = 0; triggerElementIndex < triggerElements.length; triggerElementIndex += 1) {\n      const triggerElement = triggerElements[triggerElementIndex];\n      if (triggerElement) {\n        // eslint-disable-next-line no-loop-func\n        triggerElement.addEventListener('click', () => {\n          if (isFollowUpCampaign) {\n            triggerFollowUpEvent(doc._id, doc.cancelType === 'function' ? 'cancelFunction' : 'cancelSelector', doc.type);\n          } else {\n            triggerJourneyEvent(doc._id, doc.cancelType === 'function' ? 'cancelFunction' : 'cancelSelector', doc.type);\n          }\n        }, true);\n      }\n    }\n  }\n\n  if (!triggered && doc.cancelType === 'function' && doc.cancelFunction) {\n    let result;\n    try {\n      result = eval(doc.cancelFunction);\n    } catch (err) {\n      log.debug(err);\n    }\n    if (typeof result === 'object' && result?.then) {\n      try {\n        result.then(() => {\n          if (isFollowUpCampaign) {\n            triggerFollowUpEvent(doc._id, 'cancelFunction');\n          } else {\n            triggerJourneyEvent(doc._id, 'cancelFunction', doc.type);\n          }\n        });\n      } catch (err) {\n        log.debug(err);\n      }\n    } else if (result) {\n      if (isFollowUpCampaign) {\n        triggerFollowUpEvent(doc._id, 'cancelFunction');\n      } else {\n        triggerJourneyEvent(doc._id, 'cancelFunction', doc.type);\n      }\n    }\n  } else if (!triggered && doc.cancelType === 'path' && doc.cancelPath && triggerPathAndQuery(doc.cancelPath)) {\n    if (isFollowUpCampaign) {\n      triggerFollowUpEvent(doc._id, 'cancelPath');\n    } else {\n      triggerJourneyEvent(doc._id, 'cancelPath', doc.type);\n    }\n  }\n};\n","/*\n* loglevel - https://github.com/pimterry/loglevel\n*\n* Copyright (c) 2013 Tim Perry\n* Licensed under the MIT license.\n*/\n(function (root, definition) {\n    \"use strict\";\n    if (typeof define === 'function' && define.amd) {\n        define(definition);\n    } else if (typeof module === 'object' && module.exports) {\n        module.exports = definition();\n    } else {\n        root.log = definition();\n    }\n}(this, function () {\n    \"use strict\";\n\n    // Slightly dubious tricks to cut down minimized file size\n    var noop = function() {};\n    var undefinedType = \"undefined\";\n\n    var logMethods = [\n        \"trace\",\n        \"debug\",\n        \"info\",\n        \"warn\",\n        \"error\"\n    ];\n\n    // Cross-browser bind equivalent that works at least back to IE6\n    function bindMethod(obj, methodName) {\n        var method = obj[methodName];\n        if (typeof method.bind === 'function') {\n            return method.bind(obj);\n        } else {\n            try {\n                return Function.prototype.bind.call(method, obj);\n            } catch (e) {\n                // Missing bind shim or IE8 + Modernizr, fallback to wrapping\n                return function() {\n                    return Function.prototype.apply.apply(method, [obj, arguments]);\n                };\n            }\n        }\n    }\n\n    // Build the best logging method possible for this env\n    // Wherever possible we want to bind, not wrap, to preserve stack traces\n    function realMethod(methodName) {\n        if (methodName === 'debug') {\n            methodName = 'log';\n        }\n\n        if (typeof console === undefinedType) {\n            return false; // No method possible, for now - fixed later by enableLoggingWhenConsoleArrives\n        } else if (console[methodName] !== undefined) {\n            return bindMethod(console, methodName);\n        } else if (console.log !== undefined) {\n            return bindMethod(console, 'log');\n        } else {\n            return noop;\n        }\n    }\n\n    // These private functions always need `this` to be set properly\n\n    function replaceLoggingMethods(level, loggerName) {\n        /*jshint validthis:true */\n        for (var i = 0; i < logMethods.length; i++) {\n            var methodName = logMethods[i];\n            this[methodName] = (i < level) ?\n                noop :\n                this.methodFactory(methodName, level, loggerName);\n        }\n\n        // Define log.log as an alias for log.debug\n        this.log = this.debug;\n    }\n\n    // In old IE versions, the console isn't present until you first open it.\n    // We build realMethod() replacements here that regenerate logging methods\n    function enableLoggingWhenConsoleArrives(methodName, level, loggerName) {\n        return function () {\n            if (typeof console !== undefinedType) {\n                replaceLoggingMethods.call(this, level, loggerName);\n                this[methodName].apply(this, arguments);\n            }\n        };\n    }\n\n    // By default, we use closely bound real methods wherever possible, and\n    // otherwise we wait for a console to appear, and then try again.\n    function defaultMethodFactory(methodName, level, loggerName) {\n        /*jshint validthis:true */\n        return realMethod(methodName) ||\n               enableLoggingWhenConsoleArrives.apply(this, arguments);\n    }\n\n    function Logger(name, defaultLevel, factory) {\n      var self = this;\n      var currentLevel;\n      var storageKey = \"loglevel\";\n      if (name) {\n        storageKey += \":\" + name;\n      }\n\n      function persistLevelIfPossible(levelNum) {\n          var levelName = (logMethods[levelNum] || 'silent').toUpperCase();\n\n          if (typeof window === undefinedType) return;\n\n          // Use localStorage if available\n          try {\n              window.localStorage[storageKey] = levelName;\n              return;\n          } catch (ignore) {}\n\n          // Use session cookie as fallback\n          try {\n              window.document.cookie =\n                encodeURIComponent(storageKey) + \"=\" + levelName + \";\";\n          } catch (ignore) {}\n      }\n\n      function getPersistedLevel() {\n          var storedLevel;\n\n          if (typeof window === undefinedType) return;\n\n          try {\n              storedLevel = window.localStorage[storageKey];\n          } catch (ignore) {}\n\n          // Fallback to cookies if local storage gives us nothing\n          if (typeof storedLevel === undefinedType) {\n              try {\n                  var cookie = window.document.cookie;\n                  var location = cookie.indexOf(\n                      encodeURIComponent(storageKey) + \"=\");\n                  if (location !== -1) {\n                      storedLevel = /^([^;]+)/.exec(cookie.slice(location))[1];\n                  }\n              } catch (ignore) {}\n          }\n\n          // If the stored level is not valid, treat it as if nothing was stored.\n          if (self.levels[storedLevel] === undefined) {\n              storedLevel = undefined;\n          }\n\n          return storedLevel;\n      }\n\n      /*\n       *\n       * Public logger API - see https://github.com/pimterry/loglevel for details\n       *\n       */\n\n      self.name = name;\n\n      self.levels = { \"TRACE\": 0, \"DEBUG\": 1, \"INFO\": 2, \"WARN\": 3,\n          \"ERROR\": 4, \"SILENT\": 5};\n\n      self.methodFactory = factory || defaultMethodFactory;\n\n      self.getLevel = function () {\n          return currentLevel;\n      };\n\n      self.setLevel = function (level, persist) {\n          if (typeof level === \"string\" && self.levels[level.toUpperCase()] !== undefined) {\n              level = self.levels[level.toUpperCase()];\n          }\n          if (typeof level === \"number\" && level >= 0 && level <= self.levels.SILENT) {\n              currentLevel = level;\n              if (persist !== false) {  // defaults to true\n                  persistLevelIfPossible(level);\n              }\n              replaceLoggingMethods.call(self, level, name);\n              if (typeof console === undefinedType && level < self.levels.SILENT) {\n                  return \"No console available for logging\";\n              }\n          } else {\n              throw \"log.setLevel() called with invalid level: \" + level;\n          }\n      };\n\n      self.setDefaultLevel = function (level) {\n          if (!getPersistedLevel()) {\n              self.setLevel(level, false);\n          }\n      };\n\n      self.enableAll = function(persist) {\n          self.setLevel(self.levels.TRACE, persist);\n      };\n\n      self.disableAll = function(persist) {\n          self.setLevel(self.levels.SILENT, persist);\n      };\n\n      // Initialize with the right level\n      var initialLevel = getPersistedLevel();\n      if (initialLevel == null) {\n          initialLevel = defaultLevel == null ? \"WARN\" : defaultLevel;\n      }\n      self.setLevel(initialLevel, false);\n    }\n\n    /*\n     *\n     * Top-level API\n     *\n     */\n\n    var defaultLogger = new Logger();\n\n    var _loggersByName = {};\n    defaultLogger.getLogger = function getLogger(name) {\n        if (typeof name !== \"string\" || name === \"\") {\n          throw new TypeError(\"You must supply a name when creating a logger.\");\n        }\n\n        var logger = _loggersByName[name];\n        if (!logger) {\n          logger = _loggersByName[name] = new Logger(\n            name, defaultLogger.getLevel(), defaultLogger.methodFactory);\n        }\n        return logger;\n    };\n\n    // Grab the current global log variable in case of overwrite\n    var _log = (typeof window !== undefinedType) ? window.log : undefined;\n    defaultLogger.noConflict = function() {\n        if (typeof window !== undefinedType &&\n               window.log === defaultLogger) {\n            window.log = _log;\n        }\n\n        return defaultLogger;\n    };\n\n    defaultLogger.getLoggers = function getLoggers() {\n        return _loggersByName;\n    };\n\n    return defaultLogger;\n}));\n","/**\n * @this {Promise}\n */\nfunction finallyConstructor(callback) {\n  var constructor = this.constructor;\n  return this.then(\n    function(value) {\n      // @ts-ignore\n      return constructor.resolve(callback()).then(function() {\n        return value;\n      });\n    },\n    function(reason) {\n      // @ts-ignore\n      return constructor.resolve(callback()).then(function() {\n        // @ts-ignore\n        return constructor.reject(reason);\n      });\n    }\n  );\n}\n\nexport default finallyConstructor;\n","import promiseFinally from './finally';\n\n// Store setTimeout reference so promise-polyfill will be unaffected by\n// other code modifying setTimeout (like sinon.useFakeTimers())\nvar setTimeoutFunc = setTimeout;\n\nfunction isArray(x) {\n  return Boolean(x && typeof x.length !== 'undefined');\n}\n\nfunction noop() {}\n\n// Polyfill for Function.prototype.bind\nfunction bind(fn, thisArg) {\n  return function() {\n    fn.apply(thisArg, arguments);\n  };\n}\n\n/**\n * @constructor\n * @param {Function} fn\n */\nfunction Promise(fn) {\n  if (!(this instanceof Promise))\n    throw new TypeError('Promises must be constructed via new');\n  if (typeof fn !== 'function') throw new TypeError('not a function');\n  /** @type {!number} */\n  this._state = 0;\n  /** @type {!boolean} */\n  this._handled = false;\n  /** @type {Promise|undefined} */\n  this._value = undefined;\n  /** @type {!Array<!Function>} */\n  this._deferreds = [];\n\n  doResolve(fn, this);\n}\n\nfunction handle(self, deferred) {\n  while (self._state === 3) {\n    self = self._value;\n  }\n  if (self._state === 0) {\n    self._deferreds.push(deferred);\n    return;\n  }\n  self._handled = true;\n  Promise._immediateFn(function() {\n    var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n    if (cb === null) {\n      (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n      return;\n    }\n    var ret;\n    try {\n      ret = cb(self._value);\n    } catch (e) {\n      reject(deferred.promise, e);\n      return;\n    }\n    resolve(deferred.promise, ret);\n  });\n}\n\nfunction resolve(self, newValue) {\n  try {\n    // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n    if (newValue === self)\n      throw new TypeError('A promise cannot be resolved with itself.');\n    if (\n      newValue &&\n      (typeof newValue === 'object' || typeof newValue === 'function')\n    ) {\n      var then = newValue.then;\n      if (newValue instanceof Promise) {\n        self._state = 3;\n        self._value = newValue;\n        finale(self);\n        return;\n      } else if (typeof then === 'function') {\n        doResolve(bind(then, newValue), self);\n        return;\n      }\n    }\n    self._state = 1;\n    self._value = newValue;\n    finale(self);\n  } catch (e) {\n    reject(self, e);\n  }\n}\n\nfunction reject(self, newValue) {\n  self._state = 2;\n  self._value = newValue;\n  finale(self);\n}\n\nfunction finale(self) {\n  if (self._state === 2 && self._deferreds.length === 0) {\n    Promise._immediateFn(function() {\n      if (!self._handled) {\n        Promise._unhandledRejectionFn(self._value);\n      }\n    });\n  }\n\n  for (var i = 0, len = self._deferreds.length; i < len; i++) {\n    handle(self, self._deferreds[i]);\n  }\n  self._deferreds = null;\n}\n\n/**\n * @constructor\n */\nfunction Handler(onFulfilled, onRejected, promise) {\n  this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n  this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n  this.promise = promise;\n}\n\n/**\n * Take a potentially misbehaving resolver function and make sure\n * onFulfilled and onRejected are only called once.\n *\n * Makes no guarantees about asynchrony.\n */\nfunction doResolve(fn, self) {\n  var done = false;\n  try {\n    fn(\n      function(value) {\n        if (done) return;\n        done = true;\n        resolve(self, value);\n      },\n      function(reason) {\n        if (done) return;\n        done = true;\n        reject(self, reason);\n      }\n    );\n  } catch (ex) {\n    if (done) return;\n    done = true;\n    reject(self, ex);\n  }\n}\n\nPromise.prototype['catch'] = function(onRejected) {\n  return this.then(null, onRejected);\n};\n\nPromise.prototype.then = function(onFulfilled, onRejected) {\n  // @ts-ignore\n  var prom = new this.constructor(noop);\n\n  handle(this, new Handler(onFulfilled, onRejected, prom));\n  return prom;\n};\n\nPromise.prototype['finally'] = promiseFinally;\n\nPromise.all = function(arr) {\n  return new Promise(function(resolve, reject) {\n    if (!isArray(arr)) {\n      return reject(new TypeError('Promise.all accepts an array'));\n    }\n\n    var args = Array.prototype.slice.call(arr);\n    if (args.length === 0) return resolve([]);\n    var remaining = args.length;\n\n    function res(i, val) {\n      try {\n        if (val && (typeof val === 'object' || typeof val === 'function')) {\n          var then = val.then;\n          if (typeof then === 'function') {\n            then.call(\n              val,\n              function(val) {\n                res(i, val);\n              },\n              reject\n            );\n            return;\n          }\n        }\n        args[i] = val;\n        if (--remaining === 0) {\n          resolve(args);\n        }\n      } catch (ex) {\n        reject(ex);\n      }\n    }\n\n    for (var i = 0; i < args.length; i++) {\n      res(i, args[i]);\n    }\n  });\n};\n\nPromise.resolve = function(value) {\n  if (value && typeof value === 'object' && value.constructor === Promise) {\n    return value;\n  }\n\n  return new Promise(function(resolve) {\n    resolve(value);\n  });\n};\n\nPromise.reject = function(value) {\n  return new Promise(function(resolve, reject) {\n    reject(value);\n  });\n};\n\nPromise.race = function(arr) {\n  return new Promise(function(resolve, reject) {\n    if (!isArray(arr)) {\n      return reject(new TypeError('Promise.race accepts an array'));\n    }\n\n    for (var i = 0, len = arr.length; i < len; i++) {\n      Promise.resolve(arr[i]).then(resolve, reject);\n    }\n  });\n};\n\n// Use polyfill for setImmediate for performance gains\nPromise._immediateFn =\n  // @ts-ignore\n  (typeof setImmediate === 'function' &&\n    function(fn) {\n      // @ts-ignore\n      setImmediate(fn);\n    }) ||\n  function(fn) {\n    setTimeoutFunc(fn, 0);\n  };\n\nPromise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n  if (typeof console !== 'undefined' && console) {\n    console.warn('Possible Unhandled Promise Rejection:', err); // eslint-disable-line no-console\n  }\n};\n\nexport default Promise;\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = GeneratorFunctionPrototype;\n  define(Gp, \"constructor\", GeneratorFunctionPrototype);\n  define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction);\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  });\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  define(Gp, iteratorSymbol, function() {\n    return this;\n  });\n\n  define(Gp, \"toString\", function() {\n    return \"[object Generator]\";\n  });\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, in modern engines\n  // we can explicitly access globalThis. In older engines we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","/////////////////////////////////////////////////////////////////////////////////\n/* UAParser.js v1.0.36\n   Copyright © 2012-2021 Faisal Salman <f@faisalman.com>\n   MIT License *//*\n   Detect Browser, Engine, OS, CPU, and Device type/model from User-Agent data.\n   Supports browser & node.js environment. \n   Demo   : https://faisalman.github.io/ua-parser-js\n   Source : https://github.com/faisalman/ua-parser-js */\n/////////////////////////////////////////////////////////////////////////////////\n\n(function (window, undefined) {\n\n    'use strict';\n\n    //////////////\n    // Constants\n    /////////////\n\n\n    var LIBVERSION  = '1.0.36',\n        EMPTY       = '',\n        UNKNOWN     = '?',\n        FUNC_TYPE   = 'function',\n        UNDEF_TYPE  = 'undefined',\n        OBJ_TYPE    = 'object',\n        STR_TYPE    = 'string',\n        MAJOR       = 'major',\n        MODEL       = 'model',\n        NAME        = 'name',\n        TYPE        = 'type',\n        VENDOR      = 'vendor',\n        VERSION     = 'version',\n        ARCHITECTURE= 'architecture',\n        CONSOLE     = 'console',\n        MOBILE      = 'mobile',\n        TABLET      = 'tablet',\n        SMARTTV     = 'smarttv',\n        WEARABLE    = 'wearable',\n        EMBEDDED    = 'embedded',\n        UA_MAX_LENGTH = 350;\n\n    var AMAZON  = 'Amazon',\n        APPLE   = 'Apple',\n        ASUS    = 'ASUS',\n        BLACKBERRY = 'BlackBerry',\n        BROWSER = 'Browser',\n        CHROME  = 'Chrome',\n        EDGE    = 'Edge',\n        FIREFOX = 'Firefox',\n        GOOGLE  = 'Google',\n        HUAWEI  = 'Huawei',\n        LG      = 'LG',\n        MICROSOFT = 'Microsoft',\n        MOTOROLA  = 'Motorola',\n        OPERA   = 'Opera',\n        SAMSUNG = 'Samsung',\n        SHARP   = 'Sharp',\n        SONY    = 'Sony',\n        VIERA   = 'Viera',\n        XIAOMI  = 'Xiaomi',\n        ZEBRA   = 'Zebra',\n        FACEBOOK    = 'Facebook',\n        CHROMIUM_OS = 'Chromium OS',\n        MAC_OS  = 'Mac OS';\n\n    ///////////\n    // Helper\n    //////////\n\n    var extend = function (regexes, extensions) {\n            var mergedRegexes = {};\n            for (var i in regexes) {\n                if (extensions[i] && extensions[i].length % 2 === 0) {\n                    mergedRegexes[i] = extensions[i].concat(regexes[i]);\n                } else {\n                    mergedRegexes[i] = regexes[i];\n                }\n            }\n            return mergedRegexes;\n        },\n        enumerize = function (arr) {\n            var enums = {};\n            for (var i=0; i<arr.length; i++) {\n                enums[arr[i].toUpperCase()] = arr[i];\n            }\n            return enums;\n        },\n        has = function (str1, str2) {\n            return typeof str1 === STR_TYPE ? lowerize(str2).indexOf(lowerize(str1)) !== -1 : false;\n        },\n        lowerize = function (str) {\n            return str.toLowerCase();\n        },\n        majorize = function (version) {\n            return typeof(version) === STR_TYPE ? version.replace(/[^\\d\\.]/g, EMPTY).split('.')[0] : undefined;\n        },\n        trim = function (str, len) {\n            if (typeof(str) === STR_TYPE) {\n                str = str.replace(/^\\s\\s*/, EMPTY);\n                return typeof(len) === UNDEF_TYPE ? str : str.substring(0, UA_MAX_LENGTH);\n            }\n    };\n\n    ///////////////\n    // Map helper\n    //////////////\n\n    var rgxMapper = function (ua, arrays) {\n\n            var i = 0, j, k, p, q, matches, match;\n\n            // loop through all regexes maps\n            while (i < arrays.length && !matches) {\n\n                var regex = arrays[i],       // even sequence (0,2,4,..)\n                    props = arrays[i + 1];   // odd sequence (1,3,5,..)\n                j = k = 0;\n\n                // try matching uastring with regexes\n                while (j < regex.length && !matches) {\n\n                    if (!regex[j]) { break; }\n                    matches = regex[j++].exec(ua);\n\n                    if (!!matches) {\n                        for (p = 0; p < props.length; p++) {\n                            match = matches[++k];\n                            q = props[p];\n                            // check if given property is actually array\n                            if (typeof q === OBJ_TYPE && q.length > 0) {\n                                if (q.length === 2) {\n                                    if (typeof q[1] == FUNC_TYPE) {\n                                        // assign modified match\n                                        this[q[0]] = q[1].call(this, match);\n                                    } else {\n                                        // assign given value, ignore regex match\n                                        this[q[0]] = q[1];\n                                    }\n                                } else if (q.length === 3) {\n                                    // check whether function or regex\n                                    if (typeof q[1] === FUNC_TYPE && !(q[1].exec && q[1].test)) {\n                                        // call function (usually string mapper)\n                                        this[q[0]] = match ? q[1].call(this, match, q[2]) : undefined;\n                                    } else {\n                                        // sanitize match using given regex\n                                        this[q[0]] = match ? match.replace(q[1], q[2]) : undefined;\n                                    }\n                                } else if (q.length === 4) {\n                                        this[q[0]] = match ? q[3].call(this, match.replace(q[1], q[2])) : undefined;\n                                }\n                            } else {\n                                this[q] = match ? match : undefined;\n                            }\n                        }\n                    }\n                }\n                i += 2;\n            }\n        },\n\n        strMapper = function (str, map) {\n\n            for (var i in map) {\n                // check if current value is array\n                if (typeof map[i] === OBJ_TYPE && map[i].length > 0) {\n                    for (var j = 0; j < map[i].length; j++) {\n                        if (has(map[i][j], str)) {\n                            return (i === UNKNOWN) ? undefined : i;\n                        }\n                    }\n                } else if (has(map[i], str)) {\n                    return (i === UNKNOWN) ? undefined : i;\n                }\n            }\n            return str;\n    };\n\n    ///////////////\n    // String map\n    //////////////\n\n    // Safari < 3.0\n    var oldSafariMap = {\n            '1.0'   : '/8',\n            '1.2'   : '/1',\n            '1.3'   : '/3',\n            '2.0'   : '/412',\n            '2.0.2' : '/416',\n            '2.0.3' : '/417',\n            '2.0.4' : '/419',\n            '?'     : '/'\n        },\n        windowsVersionMap = {\n            'ME'        : '4.90',\n            'NT 3.11'   : 'NT3.51',\n            'NT 4.0'    : 'NT4.0',\n            '2000'      : 'NT 5.0',\n            'XP'        : ['NT 5.1', 'NT 5.2'],\n            'Vista'     : 'NT 6.0',\n            '7'         : 'NT 6.1',\n            '8'         : 'NT 6.2',\n            '8.1'       : 'NT 6.3',\n            '10'        : ['NT 6.4', 'NT 10.0'],\n            'RT'        : 'ARM'\n    };\n\n    //////////////\n    // Regex map\n    /////////////\n\n    var regexes = {\n\n        browser : [[\n\n            /\\b(?:crmo|crios)\\/([\\w\\.]+)/i                                      // Chrome for Android/iOS\n            ], [VERSION, [NAME, 'Chrome']], [\n            /edg(?:e|ios|a)?\\/([\\w\\.]+)/i                                       // Microsoft Edge\n            ], [VERSION, [NAME, 'Edge']], [\n\n            // Presto based\n            /(opera mini)\\/([-\\w\\.]+)/i,                                        // Opera Mini\n            /(opera [mobiletab]{3,6})\\b.+version\\/([-\\w\\.]+)/i,                 // Opera Mobi/Tablet\n            /(opera)(?:.+version\\/|[\\/ ]+)([\\w\\.]+)/i                           // Opera\n            ], [NAME, VERSION], [\n            /opios[\\/ ]+([\\w\\.]+)/i                                             // Opera mini on iphone >= 8.0\n            ], [VERSION, [NAME, OPERA+' Mini']], [\n            /\\bopr\\/([\\w\\.]+)/i                                                 // Opera Webkit\n            ], [VERSION, [NAME, OPERA]], [\n\n            // Mixed\n            /(kindle)\\/([\\w\\.]+)/i,                                             // Kindle\n            /(lunascape|maxthon|netfront|jasmine|blazer)[\\/ ]?([\\w\\.]*)/i,      // Lunascape/Maxthon/Netfront/Jasmine/Blazer\n            // Trident based\n            /(avant |iemobile|slim)(?:browser)?[\\/ ]?([\\w\\.]*)/i,               // Avant/IEMobile/SlimBrowser\n            /(ba?idubrowser)[\\/ ]?([\\w\\.]+)/i,                                  // Baidu Browser\n            /(?:ms|\\()(ie) ([\\w\\.]+)/i,                                         // Internet Explorer\n\n            // Webkit/KHTML based                                               // Flock/RockMelt/Midori/Epiphany/Silk/Skyfire/Bolt/Iron/Iridium/PhantomJS/Bowser/QupZilla/Falkon\n            /(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\\/([-\\w\\.]+)/i,\n                                                                                // Rekonq/Puffin/Brave/Whale/QQBrowserLite/QQ, aka ShouQ\n            /(heytap|ovi)browser\\/([\\d\\.]+)/i,                                  // Heytap/Ovi\n            /(weibo)__([\\d\\.]+)/i                                               // Weibo\n            ], [NAME, VERSION], [\n            /(?:\\buc? ?browser|(?:juc.+)ucweb)[\\/ ]?([\\w\\.]+)/i                 // UCBrowser\n            ], [VERSION, [NAME, 'UC'+BROWSER]], [\n            /microm.+\\bqbcore\\/([\\w\\.]+)/i,                                     // WeChat Desktop for Windows Built-in Browser\n            /\\bqbcore\\/([\\w\\.]+).+microm/i\n            ], [VERSION, [NAME, 'WeChat(Win) Desktop']], [\n            /micromessenger\\/([\\w\\.]+)/i                                        // WeChat\n            ], [VERSION, [NAME, 'WeChat']], [\n            /konqueror\\/([\\w\\.]+)/i                                             // Konqueror\n            ], [VERSION, [NAME, 'Konqueror']], [\n            /trident.+rv[: ]([\\w\\.]{1,9})\\b.+like gecko/i                       // IE11\n            ], [VERSION, [NAME, 'IE']], [\n            /ya(?:search)?browser\\/([\\w\\.]+)/i                                  // Yandex\n            ], [VERSION, [NAME, 'Yandex']], [\n            /(avast|avg)\\/([\\w\\.]+)/i                                           // Avast/AVG Secure Browser\n            ], [[NAME, /(.+)/, '$1 Secure '+BROWSER], VERSION], [\n            /\\bfocus\\/([\\w\\.]+)/i                                               // Firefox Focus\n            ], [VERSION, [NAME, FIREFOX+' Focus']], [\n            /\\bopt\\/([\\w\\.]+)/i                                                 // Opera Touch\n            ], [VERSION, [NAME, OPERA+' Touch']], [\n            /coc_coc\\w+\\/([\\w\\.]+)/i                                            // Coc Coc Browser\n            ], [VERSION, [NAME, 'Coc Coc']], [\n            /dolfin\\/([\\w\\.]+)/i                                                // Dolphin\n            ], [VERSION, [NAME, 'Dolphin']], [\n            /coast\\/([\\w\\.]+)/i                                                 // Opera Coast\n            ], [VERSION, [NAME, OPERA+' Coast']], [\n            /miuibrowser\\/([\\w\\.]+)/i                                           // MIUI Browser\n            ], [VERSION, [NAME, 'MIUI '+BROWSER]], [\n            /fxios\\/([-\\w\\.]+)/i                                                // Firefox for iOS\n            ], [VERSION, [NAME, FIREFOX]], [\n            /\\bqihu|(qi?ho?o?|360)browser/i                                     // 360\n            ], [[NAME, '360 '+BROWSER]], [\n            /(oculus|samsung|sailfish|huawei)browser\\/([\\w\\.]+)/i\n            ], [[NAME, /(.+)/, '$1 '+BROWSER], VERSION], [                      // Oculus/Samsung/Sailfish/Huawei Browser\n            /(comodo_dragon)\\/([\\w\\.]+)/i                                       // Comodo Dragon\n            ], [[NAME, /_/g, ' '], VERSION], [\n            /(electron)\\/([\\w\\.]+) safari/i,                                    // Electron-based App\n            /(tesla)(?: qtcarbrowser|\\/(20\\d\\d\\.[-\\w\\.]+))/i,                   // Tesla\n            /m?(qqbrowser|baiduboxapp|2345Explorer)[\\/ ]?([\\w\\.]+)/i            // QQBrowser/Baidu App/2345 Browser\n            ], [NAME, VERSION], [\n            /(metasr)[\\/ ]?([\\w\\.]+)/i,                                         // SouGouBrowser\n            /(lbbrowser)/i,                                                     // LieBao Browser\n            /\\[(linkedin)app\\]/i                                                // LinkedIn App for iOS & Android\n            ], [NAME], [\n\n            // WebView\n            /((?:fban\\/fbios|fb_iab\\/fb4a)(?!.+fbav)|;fbav\\/([\\w\\.]+);)/i       // Facebook App for iOS & Android\n            ], [[NAME, FACEBOOK], VERSION], [\n            /(kakao(?:talk|story))[\\/ ]([\\w\\.]+)/i,                             // Kakao App\n            /(naver)\\(.*?(\\d+\\.[\\w\\.]+).*\\)/i,                                  // Naver InApp\n            /safari (line)\\/([\\w\\.]+)/i,                                        // Line App for iOS\n            /\\b(line)\\/([\\w\\.]+)\\/iab/i,                                        // Line App for Android\n            /(chromium|instagram|snapchat)[\\/ ]([-\\w\\.]+)/i                     // Chromium/Instagram/Snapchat\n            ], [NAME, VERSION], [\n            /\\bgsa\\/([\\w\\.]+) .*safari\\//i                                      // Google Search Appliance on iOS\n            ], [VERSION, [NAME, 'GSA']], [\n            /musical_ly(?:.+app_?version\\/|_)([\\w\\.]+)/i                        // TikTok\n            ], [VERSION, [NAME, 'TikTok']], [\n\n            /headlesschrome(?:\\/([\\w\\.]+)| )/i                                  // Chrome Headless\n            ], [VERSION, [NAME, CHROME+' Headless']], [\n\n            / wv\\).+(chrome)\\/([\\w\\.]+)/i                                       // Chrome WebView\n            ], [[NAME, CHROME+' WebView'], VERSION], [\n\n            /droid.+ version\\/([\\w\\.]+)\\b.+(?:mobile safari|safari)/i           // Android Browser\n            ], [VERSION, [NAME, 'Android '+BROWSER]], [\n\n            /(chrome|omniweb|arora|[tizenoka]{5} ?browser)\\/v?([\\w\\.]+)/i       // Chrome/OmniWeb/Arora/Tizen/Nokia\n            ], [NAME, VERSION], [\n\n            /version\\/([\\w\\.\\,]+) .*mobile\\/\\w+ (safari)/i                      // Mobile Safari\n            ], [VERSION, [NAME, 'Mobile Safari']], [\n            /version\\/([\\w(\\.|\\,)]+) .*(mobile ?safari|safari)/i                // Safari & Safari Mobile\n            ], [VERSION, NAME], [\n            /webkit.+?(mobile ?safari|safari)(\\/[\\w\\.]+)/i                      // Safari < 3.0\n            ], [NAME, [VERSION, strMapper, oldSafariMap]], [\n\n            /(webkit|khtml)\\/([\\w\\.]+)/i\n            ], [NAME, VERSION], [\n\n            // Gecko based\n            /(navigator|netscape\\d?)\\/([-\\w\\.]+)/i                              // Netscape\n            ], [[NAME, 'Netscape'], VERSION], [\n            /mobile vr; rv:([\\w\\.]+)\\).+firefox/i                               // Firefox Reality\n            ], [VERSION, [NAME, FIREFOX+' Reality']], [\n            /ekiohf.+(flow)\\/([\\w\\.]+)/i,                                       // Flow\n            /(swiftfox)/i,                                                      // Swiftfox\n            /(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\\/ ]?([\\w\\.\\+]+)/i,\n                                                                                // IceDragon/Iceweasel/Camino/Chimera/Fennec/Maemo/Minimo/Conkeror/Klar\n            /(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\\/([-\\w\\.]+)$/i,\n                                                                                // Firefox/SeaMonkey/K-Meleon/IceCat/IceApe/Firebird/Phoenix\n            /(firefox)\\/([\\w\\.]+)/i,                                            // Other Firefox-based\n            /(mozilla)\\/([\\w\\.]+) .+rv\\:.+gecko\\/\\d+/i,                         // Mozilla\n\n            // Other\n            /(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\\. ]?browser)[-\\/ ]?v?([\\w\\.]+)/i,\n                                                                                // Polaris/Lynx/Dillo/iCab/Doris/Amaya/w3m/NetSurf/Sleipnir/Obigo/Mosaic/Go/ICE/UP.Browser\n            /(links) \\(([\\w\\.]+)/i,                                             // Links\n            /panasonic;(viera)/i                                                // Panasonic Viera\n            ], [NAME, VERSION], [\n            \n            /(cobalt)\\/([\\w\\.]+)/i                                              // Cobalt\n            ], [NAME, [VERSION, /master.|lts./, \"\"]]\n        ],\n\n        cpu : [[\n\n            /(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\\)]/i                     // AMD64 (x64)\n            ], [[ARCHITECTURE, 'amd64']], [\n\n            /(ia32(?=;))/i                                                      // IA32 (quicktime)\n            ], [[ARCHITECTURE, lowerize]], [\n\n            /((?:i[346]|x)86)[;\\)]/i                                            // IA32 (x86)\n            ], [[ARCHITECTURE, 'ia32']], [\n\n            /\\b(aarch64|arm(v?8e?l?|_?64))\\b/i                                 // ARM64\n            ], [[ARCHITECTURE, 'arm64']], [\n\n            /\\b(arm(?:v[67])?ht?n?[fl]p?)\\b/i                                   // ARMHF\n            ], [[ARCHITECTURE, 'armhf']], [\n\n            // PocketPC mistakenly identified as PowerPC\n            /windows (ce|mobile); ppc;/i\n            ], [[ARCHITECTURE, 'arm']], [\n\n            /((?:ppc|powerpc)(?:64)?)(?: mac|;|\\))/i                            // PowerPC\n            ], [[ARCHITECTURE, /ower/, EMPTY, lowerize]], [\n\n            /(sun4\\w)[;\\)]/i                                                    // SPARC\n            ], [[ARCHITECTURE, 'sparc']], [\n\n            /((?:avr32|ia64(?=;))|68k(?=\\))|\\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\\b|pa-risc)/i\n                                                                                // IA64, 68K, ARM/64, AVR/32, IRIX/64, MIPS/64, SPARC/64, PA-RISC\n            ], [[ARCHITECTURE, lowerize]]\n        ],\n\n        device : [[\n\n            //////////////////////////\n            // MOBILES & TABLETS\n            /////////////////////////\n\n            // Samsung\n            /\\b(sch-i[89]0\\d|shw-m380s|sm-[ptx]\\w{2,4}|gt-[pn]\\d{2,4}|sgh-t8[56]9|nexus 10)/i\n            ], [MODEL, [VENDOR, SAMSUNG], [TYPE, TABLET]], [\n            /\\b((?:s[cgp]h|gt|sm)-\\w+|sc[g-]?[\\d]+a?|galaxy nexus)/i,\n            /samsung[- ]([-\\w]+)/i,\n            /sec-(sgh\\w+)/i\n            ], [MODEL, [VENDOR, SAMSUNG], [TYPE, MOBILE]], [\n\n            // Apple\n            /(?:\\/|\\()(ip(?:hone|od)[\\w, ]*)(?:\\/|;)/i                          // iPod/iPhone\n            ], [MODEL, [VENDOR, APPLE], [TYPE, MOBILE]], [\n            /\\((ipad);[-\\w\\),; ]+apple/i,                                       // iPad\n            /applecoremedia\\/[\\w\\.]+ \\((ipad)/i,\n            /\\b(ipad)\\d\\d?,\\d\\d?[;\\]].+ios/i\n            ], [MODEL, [VENDOR, APPLE], [TYPE, TABLET]], [\n            /(macintosh);/i\n            ], [MODEL, [VENDOR, APPLE]], [\n\n            // Sharp\n            /\\b(sh-?[altvz]?\\d\\d[a-ekm]?)/i\n            ], [MODEL, [VENDOR, SHARP], [TYPE, MOBILE]], [\n\n            // Huawei\n            /\\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\\d{2})\\b(?!.+d\\/s)/i\n            ], [MODEL, [VENDOR, HUAWEI], [TYPE, TABLET]], [\n            /(?:huawei|honor)([-\\w ]+)[;\\)]/i,\n            /\\b(nexus 6p|\\w{2,4}e?-[atu]?[ln][\\dx][012359c][adn]?)\\b(?!.+d\\/s)/i\n            ], [MODEL, [VENDOR, HUAWEI], [TYPE, MOBILE]], [\n\n            // Xiaomi\n            /\\b(poco[\\w ]+|m2\\d{3}j\\d\\d[a-z]{2})(?: bui|\\))/i,                  // Xiaomi POCO\n            /\\b; (\\w+) build\\/hm\\1/i,                                           // Xiaomi Hongmi 'numeric' models\n            /\\b(hm[-_ ]?note?[_ ]?(?:\\d\\w)?) bui/i,                             // Xiaomi Hongmi\n            /\\b(redmi[\\-_ ]?(?:note|k)?[\\w_ ]+)(?: bui|\\))/i,                   // Xiaomi Redmi\n            /\\b(mi[-_ ]?(?:a\\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\\d?\\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\\))/i // Xiaomi Mi\n            ], [[MODEL, /_/g, ' '], [VENDOR, XIAOMI], [TYPE, MOBILE]], [\n            /\\b(mi[-_ ]?(?:pad)(?:[\\w_ ]+))(?: bui|\\))/i                        // Mi Pad tablets\n            ],[[MODEL, /_/g, ' '], [VENDOR, XIAOMI], [TYPE, TABLET]], [\n\n            // OPPO\n            /; (\\w+) bui.+ oppo/i,\n            /\\b(cph[12]\\d{3}|p(?:af|c[al]|d\\w|e[ar])[mt]\\d0|x9007|a101op)\\b/i\n            ], [MODEL, [VENDOR, 'OPPO'], [TYPE, MOBILE]], [\n\n            // Vivo\n            /vivo (\\w+)(?: bui|\\))/i,\n            /\\b(v[12]\\d{3}\\w?[at])(?: bui|;)/i\n            ], [MODEL, [VENDOR, 'Vivo'], [TYPE, MOBILE]], [\n\n            // Realme\n            /\\b(rmx[12]\\d{3})(?: bui|;|\\))/i\n            ], [MODEL, [VENDOR, 'Realme'], [TYPE, MOBILE]], [\n\n            // Motorola\n            /\\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\\b[\\w ]+build\\//i,\n            /\\bmot(?:orola)?[- ](\\w*)/i,\n            /((?:moto[\\w\\(\\) ]+|xt\\d{3,4}|nexus 6)(?= bui|\\)))/i\n            ], [MODEL, [VENDOR, MOTOROLA], [TYPE, MOBILE]], [\n            /\\b(mz60\\d|xoom[2 ]{0,2}) build\\//i\n            ], [MODEL, [VENDOR, MOTOROLA], [TYPE, TABLET]], [\n\n            // LG\n            /((?=lg)?[vl]k\\-?\\d{3}) bui| 3\\.[-\\w; ]{10}lg?-([06cv9]{3,4})/i\n            ], [MODEL, [VENDOR, LG], [TYPE, TABLET]], [\n            /(lm(?:-?f100[nv]?|-[\\w\\.]+)(?= bui|\\))|nexus [45])/i,\n            /\\blg[-e;\\/ ]+((?!browser|netcast|android tv)\\w+)/i,\n            /\\blg-?([\\d\\w]+) bui/i\n            ], [MODEL, [VENDOR, LG], [TYPE, MOBILE]], [\n\n            // Lenovo\n            /(ideatab[-\\w ]+)/i,\n            /lenovo ?(s[56]000[-\\w]+|tab(?:[\\w ]+)|yt[-\\d\\w]{6}|tb[-\\d\\w]{6})/i\n            ], [MODEL, [VENDOR, 'Lenovo'], [TYPE, TABLET]], [\n\n            // Nokia\n            /(?:maemo|nokia).*(n900|lumia \\d+)/i,\n            /nokia[-_ ]?([-\\w\\.]*)/i\n            ], [[MODEL, /_/g, ' '], [VENDOR, 'Nokia'], [TYPE, MOBILE]], [\n\n            // Google\n            /(pixel c)\\b/i                                                      // Google Pixel C\n            ], [MODEL, [VENDOR, GOOGLE], [TYPE, TABLET]], [\n            /droid.+; (pixel[\\daxl ]{0,6})(?: bui|\\))/i                         // Google Pixel\n            ], [MODEL, [VENDOR, GOOGLE], [TYPE, MOBILE]], [\n\n            // Sony\n            /droid.+ (a?\\d[0-2]{2}so|[c-g]\\d{4}|so[-gl]\\w+|xq-a\\w[4-7][12])(?= bui|\\).+chrome\\/(?![1-6]{0,1}\\d\\.))/i\n            ], [MODEL, [VENDOR, SONY], [TYPE, MOBILE]], [\n            /sony tablet [ps]/i,\n            /\\b(?:sony)?sgp\\w+(?: bui|\\))/i\n            ], [[MODEL, 'Xperia Tablet'], [VENDOR, SONY], [TYPE, TABLET]], [\n\n            // OnePlus\n            / (kb2005|in20[12]5|be20[12][59])\\b/i,\n            /(?:one)?(?:plus)? (a\\d0\\d\\d)(?: b|\\))/i\n            ], [MODEL, [VENDOR, 'OnePlus'], [TYPE, MOBILE]], [\n\n            // Amazon\n            /(alexa)webm/i,\n            /(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\\))/i,                             // Kindle Fire without Silk / Echo Show\n            /(kf[a-z]+)( bui|\\)).+silk\\//i                                      // Kindle Fire HD\n            ], [MODEL, [VENDOR, AMAZON], [TYPE, TABLET]], [\n            /((?:sd|kf)[0349hijorstuw]+)( bui|\\)).+silk\\//i                     // Fire Phone\n            ], [[MODEL, /(.+)/g, 'Fire Phone $1'], [VENDOR, AMAZON], [TYPE, MOBILE]], [\n\n            // BlackBerry\n            /(playbook);[-\\w\\),; ]+(rim)/i                                      // BlackBerry PlayBook\n            ], [MODEL, VENDOR, [TYPE, TABLET]], [\n            /\\b((?:bb[a-f]|st[hv])100-\\d)/i,\n            /\\(bb10; (\\w+)/i                                                    // BlackBerry 10\n            ], [MODEL, [VENDOR, BLACKBERRY], [TYPE, MOBILE]], [\n\n            // Asus\n            /(?:\\b|asus_)(transfo[prime ]{4,10} \\w+|eeepc|slider \\w+|nexus 7|padfone|p00[cj])/i\n            ], [MODEL, [VENDOR, ASUS], [TYPE, TABLET]], [\n            / (z[bes]6[027][012][km][ls]|zenfone \\d\\w?)\\b/i\n            ], [MODEL, [VENDOR, ASUS], [TYPE, MOBILE]], [\n\n            // HTC\n            /(nexus 9)/i                                                        // HTC Nexus 9\n            ], [MODEL, [VENDOR, 'HTC'], [TYPE, TABLET]], [\n            /(htc)[-;_ ]{1,2}([\\w ]+(?=\\)| bui)|\\w+)/i,                         // HTC\n\n            // ZTE\n            /(zte)[- ]([\\w ]+?)(?: bui|\\/|\\))/i,\n            /(alcatel|geeksphone|nexian|panasonic(?!(?:;|\\.))|sony(?!-bra))[-_ ]?([-\\w]*)/i         // Alcatel/GeeksPhone/Nexian/Panasonic/Sony\n            ], [VENDOR, [MODEL, /_/g, ' '], [TYPE, MOBILE]], [\n\n            // Acer\n            /droid.+; ([ab][1-7]-?[0178a]\\d\\d?)/i\n            ], [MODEL, [VENDOR, 'Acer'], [TYPE, TABLET]], [\n\n            // Meizu\n            /droid.+; (m[1-5] note) bui/i,\n            /\\bmz-([-\\w]{2,})/i\n            ], [MODEL, [VENDOR, 'Meizu'], [TYPE, MOBILE]], [\n\n            // MIXED\n            /(blackberry|benq|palm(?=\\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\\w]*)/i,\n                                                                                // BlackBerry/BenQ/Palm/Sony-Ericsson/Acer/Asus/Dell/Meizu/Motorola/Polytron\n            /(hp) ([\\w ]+\\w)/i,                                                 // HP iPAQ\n            /(asus)-?(\\w+)/i,                                                   // Asus\n            /(microsoft); (lumia[\\w ]+)/i,                                      // Microsoft Lumia\n            /(lenovo)[-_ ]?([-\\w]+)/i,                                          // Lenovo\n            /(jolla)/i,                                                         // Jolla\n            /(oppo) ?([\\w ]+) bui/i                                             // OPPO\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n\n            /(kobo)\\s(ereader|touch)/i,                                         // Kobo\n            /(archos) (gamepad2?)/i,                                            // Archos\n            /(hp).+(touchpad(?!.+tablet)|tablet)/i,                             // HP TouchPad\n            /(kindle)\\/([\\w\\.]+)/i,                                             // Kindle\n            /(nook)[\\w ]+build\\/(\\w+)/i,                                        // Nook\n            /(dell) (strea[kpr\\d ]*[\\dko])/i,                                   // Dell Streak\n            /(le[- ]+pan)[- ]+(\\w{1,9}) bui/i,                                  // Le Pan Tablets\n            /(trinity)[- ]*(t\\d{3}) bui/i,                                      // Trinity Tablets\n            /(gigaset)[- ]+(q\\w{1,9}) bui/i,                                    // Gigaset Tablets\n            /(vodafone) ([\\w ]+)(?:\\)| bui)/i                                   // Vodafone\n            ], [VENDOR, MODEL, [TYPE, TABLET]], [\n\n            /(surface duo)/i                                                    // Surface Duo\n            ], [MODEL, [VENDOR, MICROSOFT], [TYPE, TABLET]], [\n            /droid [\\d\\.]+; (fp\\du?)(?: b|\\))/i                                 // Fairphone\n            ], [MODEL, [VENDOR, 'Fairphone'], [TYPE, MOBILE]], [\n            /(u304aa)/i                                                         // AT&T\n            ], [MODEL, [VENDOR, 'AT&T'], [TYPE, MOBILE]], [\n            /\\bsie-(\\w*)/i                                                      // Siemens\n            ], [MODEL, [VENDOR, 'Siemens'], [TYPE, MOBILE]], [\n            /\\b(rct\\w+) b/i                                                     // RCA Tablets\n            ], [MODEL, [VENDOR, 'RCA'], [TYPE, TABLET]], [\n            /\\b(venue[\\d ]{2,7}) b/i                                            // Dell Venue Tablets\n            ], [MODEL, [VENDOR, 'Dell'], [TYPE, TABLET]], [\n            /\\b(q(?:mv|ta)\\w+) b/i                                              // Verizon Tablet\n            ], [MODEL, [VENDOR, 'Verizon'], [TYPE, TABLET]], [\n            /\\b(?:barnes[& ]+noble |bn[rt])([\\w\\+ ]*) b/i                       // Barnes & Noble Tablet\n            ], [MODEL, [VENDOR, 'Barnes & Noble'], [TYPE, TABLET]], [\n            /\\b(tm\\d{3}\\w+) b/i\n            ], [MODEL, [VENDOR, 'NuVision'], [TYPE, TABLET]], [\n            /\\b(k88) b/i                                                        // ZTE K Series Tablet\n            ], [MODEL, [VENDOR, 'ZTE'], [TYPE, TABLET]], [\n            /\\b(nx\\d{3}j) b/i                                                   // ZTE Nubia\n            ], [MODEL, [VENDOR, 'ZTE'], [TYPE, MOBILE]], [\n            /\\b(gen\\d{3}) b.+49h/i                                              // Swiss GEN Mobile\n            ], [MODEL, [VENDOR, 'Swiss'], [TYPE, MOBILE]], [\n            /\\b(zur\\d{3}) b/i                                                   // Swiss ZUR Tablet\n            ], [MODEL, [VENDOR, 'Swiss'], [TYPE, TABLET]], [\n            /\\b((zeki)?tb.*\\b) b/i                                              // Zeki Tablets\n            ], [MODEL, [VENDOR, 'Zeki'], [TYPE, TABLET]], [\n            /\\b([yr]\\d{2}) b/i,\n            /\\b(dragon[- ]+touch |dt)(\\w{5}) b/i                                // Dragon Touch Tablet\n            ], [[VENDOR, 'Dragon Touch'], MODEL, [TYPE, TABLET]], [\n            /\\b(ns-?\\w{0,9}) b/i                                                // Insignia Tablets\n            ], [MODEL, [VENDOR, 'Insignia'], [TYPE, TABLET]], [\n            /\\b((nxa|next)-?\\w{0,9}) b/i                                        // NextBook Tablets\n            ], [MODEL, [VENDOR, 'NextBook'], [TYPE, TABLET]], [\n            /\\b(xtreme\\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i                  // Voice Xtreme Phones\n            ], [[VENDOR, 'Voice'], MODEL, [TYPE, MOBILE]], [\n            /\\b(lvtel\\-)?(v1[12]) b/i                                           // LvTel Phones\n            ], [[VENDOR, 'LvTel'], MODEL, [TYPE, MOBILE]], [\n            /\\b(ph-1) /i                                                        // Essential PH-1\n            ], [MODEL, [VENDOR, 'Essential'], [TYPE, MOBILE]], [\n            /\\b(v(100md|700na|7011|917g).*\\b) b/i                               // Envizen Tablets\n            ], [MODEL, [VENDOR, 'Envizen'], [TYPE, TABLET]], [\n            /\\b(trio[-\\w\\. ]+) b/i                                              // MachSpeed Tablets\n            ], [MODEL, [VENDOR, 'MachSpeed'], [TYPE, TABLET]], [\n            /\\btu_(1491) b/i                                                    // Rotor Tablets\n            ], [MODEL, [VENDOR, 'Rotor'], [TYPE, TABLET]], [\n            /(shield[\\w ]+) b/i                                                 // Nvidia Shield Tablets\n            ], [MODEL, [VENDOR, 'Nvidia'], [TYPE, TABLET]], [\n            /(sprint) (\\w+)/i                                                   // Sprint Phones\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n            /(kin\\.[onetw]{3})/i                                                // Microsoft Kin\n            ], [[MODEL, /\\./g, ' '], [VENDOR, MICROSOFT], [TYPE, MOBILE]], [\n            /droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\\)/i             // Zebra\n            ], [MODEL, [VENDOR, ZEBRA], [TYPE, TABLET]], [\n            /droid.+; (ec30|ps20|tc[2-8]\\d[kx])\\)/i\n            ], [MODEL, [VENDOR, ZEBRA], [TYPE, MOBILE]], [\n\n            ///////////////////\n            // SMARTTVS\n            ///////////////////\n\n            /smart-tv.+(samsung)/i                                              // Samsung\n            ], [VENDOR, [TYPE, SMARTTV]], [\n            /hbbtv.+maple;(\\d+)/i\n            ], [[MODEL, /^/, 'SmartTV'], [VENDOR, SAMSUNG], [TYPE, SMARTTV]], [\n            /(nux; netcast.+smarttv|lg (netcast\\.tv-201\\d|android tv))/i        // LG SmartTV\n            ], [[VENDOR, LG], [TYPE, SMARTTV]], [\n            /(apple) ?tv/i                                                      // Apple TV\n            ], [VENDOR, [MODEL, APPLE+' TV'], [TYPE, SMARTTV]], [\n            /crkey/i                                                            // Google Chromecast\n            ], [[MODEL, CHROME+'cast'], [VENDOR, GOOGLE], [TYPE, SMARTTV]], [\n            /droid.+aft(\\w+)( bui|\\))/i                                         // Fire TV\n            ], [MODEL, [VENDOR, AMAZON], [TYPE, SMARTTV]], [\n            /\\(dtv[\\);].+(aquos)/i,\n            /(aquos-tv[\\w ]+)\\)/i                                               // Sharp\n            ], [MODEL, [VENDOR, SHARP], [TYPE, SMARTTV]],[\n            /(bravia[\\w ]+)( bui|\\))/i                                              // Sony\n            ], [MODEL, [VENDOR, SONY], [TYPE, SMARTTV]], [\n            /(mitv-\\w{5}) bui/i                                                 // Xiaomi\n            ], [MODEL, [VENDOR, XIAOMI], [TYPE, SMARTTV]], [\n            /Hbbtv.*(technisat) (.*);/i                                         // TechniSAT\n            ], [VENDOR, MODEL, [TYPE, SMARTTV]], [\n            /\\b(roku)[\\dx]*[\\)\\/]((?:dvp-)?[\\d\\.]*)/i,                          // Roku\n            /hbbtv\\/\\d+\\.\\d+\\.\\d+ +\\([\\w\\+ ]*; *([\\w\\d][^;]*);([^;]*)/i         // HbbTV devices\n            ], [[VENDOR, trim], [MODEL, trim], [TYPE, SMARTTV]], [\n            /\\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\\b/i                   // SmartTV from Unidentified Vendors\n            ], [[TYPE, SMARTTV]], [\n\n            ///////////////////\n            // CONSOLES\n            ///////////////////\n\n            /(ouya)/i,                                                          // Ouya\n            /(nintendo) ([wids3utch]+)/i                                        // Nintendo\n            ], [VENDOR, MODEL, [TYPE, CONSOLE]], [\n            /droid.+; (shield) bui/i                                            // Nvidia\n            ], [MODEL, [VENDOR, 'Nvidia'], [TYPE, CONSOLE]], [\n            /(playstation [345portablevi]+)/i                                   // Playstation\n            ], [MODEL, [VENDOR, SONY], [TYPE, CONSOLE]], [\n            /\\b(xbox(?: one)?(?!; xbox))[\\); ]/i                                // Microsoft Xbox\n            ], [MODEL, [VENDOR, MICROSOFT], [TYPE, CONSOLE]], [\n\n            ///////////////////\n            // WEARABLES\n            ///////////////////\n\n            /((pebble))app/i                                                    // Pebble\n            ], [VENDOR, MODEL, [TYPE, WEARABLE]], [\n            /(watch)(?: ?os[,\\/]|\\d,\\d\\/)[\\d\\.]+/i                              // Apple Watch\n            ], [MODEL, [VENDOR, APPLE], [TYPE, WEARABLE]], [\n            /droid.+; (glass) \\d/i                                              // Google Glass\n            ], [MODEL, [VENDOR, GOOGLE], [TYPE, WEARABLE]], [\n            /droid.+; (wt63?0{2,3})\\)/i\n            ], [MODEL, [VENDOR, ZEBRA], [TYPE, WEARABLE]], [\n            /(quest( 2| pro)?)/i                                                // Oculus Quest\n            ], [MODEL, [VENDOR, FACEBOOK], [TYPE, WEARABLE]], [\n\n            ///////////////////\n            // EMBEDDED\n            ///////////////////\n\n            /(tesla)(?: qtcarbrowser|\\/[-\\w\\.]+)/i                              // Tesla\n            ], [VENDOR, [TYPE, EMBEDDED]], [\n            /(aeobc)\\b/i                                                        // Echo Dot\n            ], [MODEL, [VENDOR, AMAZON], [TYPE, EMBEDDED]], [\n\n            ////////////////////\n            // MIXED (GENERIC)\n            ///////////////////\n\n            /droid .+?; ([^;]+?)(?: bui|\\) applew).+? mobile safari/i           // Android Phones from Unidentified Vendors\n            ], [MODEL, [TYPE, MOBILE]], [\n            /droid .+?; ([^;]+?)(?: bui|\\) applew).+?(?! mobile) safari/i       // Android Tablets from Unidentified Vendors\n            ], [MODEL, [TYPE, TABLET]], [\n            /\\b((tablet|tab)[;\\/]|focus\\/\\d(?!.+mobile))/i                      // Unidentifiable Tablet\n            ], [[TYPE, TABLET]], [\n            /(phone|mobile(?:[;\\/]| [ \\w\\/\\.]*safari)|pda(?=.+windows ce))/i    // Unidentifiable Mobile\n            ], [[TYPE, MOBILE]], [\n            /(android[-\\w\\. ]{0,9});.+buil/i                                    // Generic Android Device\n            ], [MODEL, [VENDOR, 'Generic']]\n        ],\n\n        engine : [[\n\n            /windows.+ edge\\/([\\w\\.]+)/i                                       // EdgeHTML\n            ], [VERSION, [NAME, EDGE+'HTML']], [\n\n            /webkit\\/537\\.36.+chrome\\/(?!27)([\\w\\.]+)/i                         // Blink\n            ], [VERSION, [NAME, 'Blink']], [\n\n            /(presto)\\/([\\w\\.]+)/i,                                             // Presto\n            /(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\\/([\\w\\.]+)/i, // WebKit/Trident/NetFront/NetSurf/Amaya/Lynx/w3m/Goanna\n            /ekioh(flow)\\/([\\w\\.]+)/i,                                          // Flow\n            /(khtml|tasman|links)[\\/ ]\\(?([\\w\\.]+)/i,                           // KHTML/Tasman/Links\n            /(icab)[\\/ ]([23]\\.[\\d\\.]+)/i,                                      // iCab\n            /\\b(libweb)/i\n            ], [NAME, VERSION], [\n\n            /rv\\:([\\w\\.]{1,9})\\b.+(gecko)/i                                     // Gecko\n            ], [VERSION, NAME]\n        ],\n\n        os : [[\n\n            // Windows\n            /microsoft (windows) (vista|xp)/i                                   // Windows (iTunes)\n            ], [NAME, VERSION], [\n            /(windows) nt 6\\.2; (arm)/i,                                        // Windows RT\n            /(windows (?:phone(?: os)?|mobile))[\\/ ]?([\\d\\.\\w ]*)/i,            // Windows Phone\n            /(windows)[\\/ ]?([ntce\\d\\. ]+\\w)(?!.+xbox)/i\n            ], [NAME, [VERSION, strMapper, windowsVersionMap]], [\n            /(win(?=3|9|n)|win 9x )([nt\\d\\.]+)/i\n            ], [[NAME, 'Windows'], [VERSION, strMapper, windowsVersionMap]], [\n\n            // iOS/macOS\n            /ip[honead]{2,4}\\b(?:.*os ([\\w]+) like mac|; opera)/i,              // iOS\n            /(?:ios;fbsv\\/|iphone.+ios[\\/ ])([\\d\\.]+)/i,\n            /cfnetwork\\/.+darwin/i\n            ], [[VERSION, /_/g, '.'], [NAME, 'iOS']], [\n            /(mac os x) ?([\\w\\. ]*)/i,\n            /(macintosh|mac_powerpc\\b)(?!.+haiku)/i                             // Mac OS\n            ], [[NAME, MAC_OS], [VERSION, /_/g, '.']], [\n\n            // Mobile OSes\n            /droid ([\\w\\.]+)\\b.+(android[- ]x86|harmonyos)/i                    // Android-x86/HarmonyOS\n            ], [VERSION, NAME], [                                               // Android/WebOS/QNX/Bada/RIM/Maemo/MeeGo/Sailfish OS\n            /(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\\/ ]?([\\w\\.]*)/i,\n            /(blackberry)\\w*\\/([\\w\\.]*)/i,                                      // Blackberry\n            /(tizen|kaios)[\\/ ]([\\w\\.]+)/i,                                     // Tizen/KaiOS\n            /\\((series40);/i                                                    // Series 40\n            ], [NAME, VERSION], [\n            /\\(bb(10);/i                                                        // BlackBerry 10\n            ], [VERSION, [NAME, BLACKBERRY]], [\n            /(?:symbian ?os|symbos|s60(?=;)|series60)[-\\/ ]?([\\w\\.]*)/i         // Symbian\n            ], [VERSION, [NAME, 'Symbian']], [\n            /mozilla\\/[\\d\\.]+ \\((?:mobile|tablet|tv|mobile; [\\w ]+); rv:.+ gecko\\/([\\w\\.]+)/i // Firefox OS\n            ], [VERSION, [NAME, FIREFOX+' OS']], [\n            /web0s;.+rt(tv)/i,\n            /\\b(?:hp)?wos(?:browser)?\\/([\\w\\.]+)/i                              // WebOS\n            ], [VERSION, [NAME, 'webOS']], [\n            /watch(?: ?os[,\\/]|\\d,\\d\\/)([\\d\\.]+)/i                              // watchOS\n            ], [VERSION, [NAME, 'watchOS']], [\n\n            // Google Chromecast\n            /crkey\\/([\\d\\.]+)/i                                                 // Google Chromecast\n            ], [VERSION, [NAME, CHROME+'cast']], [\n            /(cros) [\\w]+(?:\\)| ([\\w\\.]+)\\b)/i                                  // Chromium OS\n            ], [[NAME, CHROMIUM_OS], VERSION],[\n\n            // Smart TVs\n            /panasonic;(viera)/i,                                               // Panasonic Viera\n            /(netrange)mmh/i,                                                   // Netrange\n            /(nettv)\\/(\\d+\\.[\\w\\.]+)/i,                                         // NetTV\n\n            // Console\n            /(nintendo|playstation) ([wids345portablevuch]+)/i,                 // Nintendo/Playstation\n            /(xbox); +xbox ([^\\);]+)/i,                                         // Microsoft Xbox (360, One, X, S, Series X, Series S)\n\n            // Other\n            /\\b(joli|palm)\\b ?(?:os)?\\/?([\\w\\.]*)/i,                            // Joli/Palm\n            /(mint)[\\/\\(\\) ]?(\\w*)/i,                                           // Mint\n            /(mageia|vectorlinux)[; ]/i,                                        // Mageia/VectorLinux\n            /([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\\/ ]?(?!chrom|package)([-\\w\\.]*)/i,\n                                                                                // Ubuntu/Debian/SUSE/Gentoo/Arch/Slackware/Fedora/Mandriva/CentOS/PCLinuxOS/RedHat/Zenwalk/Linpus/Raspbian/Plan9/Minix/RISCOS/Contiki/Deepin/Manjaro/elementary/Sabayon/Linspire\n            /(hurd|linux) ?([\\w\\.]*)/i,                                         // Hurd/Linux\n            /(gnu) ?([\\w\\.]*)/i,                                                // GNU\n            /\\b([-frentopcghs]{0,5}bsd|dragonfly)[\\/ ]?(?!amd|[ix346]{1,2}86)([\\w\\.]*)/i, // FreeBSD/NetBSD/OpenBSD/PC-BSD/GhostBSD/DragonFly\n            /(haiku) (\\w+)/i                                                    // Haiku\n            ], [NAME, VERSION], [\n            /(sunos) ?([\\w\\.\\d]*)/i                                             // Solaris\n            ], [[NAME, 'Solaris'], VERSION], [\n            /((?:open)?solaris)[-\\/ ]?([\\w\\.]*)/i,                              // Solaris\n            /(aix) ((\\d)(?=\\.|\\)| )[\\w\\.])*/i,                                  // AIX\n            /\\b(beos|os\\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i, // BeOS/OS2/AmigaOS/MorphOS/OpenVMS/Fuchsia/HP-UX/SerenityOS\n            /(unix) ?([\\w\\.]*)/i                                                // UNIX\n            ], [NAME, VERSION]\n        ]\n    };\n\n    /////////////////\n    // Constructor\n    ////////////////\n\n    var UAParser = function (ua, extensions) {\n\n        if (typeof ua === OBJ_TYPE) {\n            extensions = ua;\n            ua = undefined;\n        }\n\n        if (!(this instanceof UAParser)) {\n            return new UAParser(ua, extensions).getResult();\n        }\n\n        var _navigator = (typeof window !== UNDEF_TYPE && window.navigator) ? window.navigator : undefined;\n        var _ua = ua || ((_navigator && _navigator.userAgent) ? _navigator.userAgent : EMPTY);\n        var _uach = (_navigator && _navigator.userAgentData) ? _navigator.userAgentData : undefined;\n        var _rgxmap = extensions ? extend(regexes, extensions) : regexes;\n        var _isSelfNav = _navigator && _navigator.userAgent == _ua;\n\n        this.getBrowser = function () {\n            var _browser = {};\n            _browser[NAME] = undefined;\n            _browser[VERSION] = undefined;\n            rgxMapper.call(_browser, _ua, _rgxmap.browser);\n            _browser[MAJOR] = majorize(_browser[VERSION]);\n            // Brave-specific detection\n            if (_isSelfNav && _navigator && _navigator.brave && typeof _navigator.brave.isBrave == FUNC_TYPE) {\n                _browser[NAME] = 'Brave';\n            }\n            return _browser;\n        };\n        this.getCPU = function () {\n            var _cpu = {};\n            _cpu[ARCHITECTURE] = undefined;\n            rgxMapper.call(_cpu, _ua, _rgxmap.cpu);\n            return _cpu;\n        };\n        this.getDevice = function () {\n            var _device = {};\n            _device[VENDOR] = undefined;\n            _device[MODEL] = undefined;\n            _device[TYPE] = undefined;\n            rgxMapper.call(_device, _ua, _rgxmap.device);\n            if (_isSelfNav && !_device[TYPE] && _uach && _uach.mobile) {\n                _device[TYPE] = MOBILE;\n            }\n            // iPadOS-specific detection: identified as Mac, but has some iOS-only properties\n            if (_isSelfNav && _device[MODEL] == 'Macintosh' && _navigator && typeof _navigator.standalone !== UNDEF_TYPE && _navigator.maxTouchPoints && _navigator.maxTouchPoints > 2) {\n                _device[MODEL] = 'iPad';\n                _device[TYPE] = TABLET;\n            }\n            return _device;\n        };\n        this.getEngine = function () {\n            var _engine = {};\n            _engine[NAME] = undefined;\n            _engine[VERSION] = undefined;\n            rgxMapper.call(_engine, _ua, _rgxmap.engine);\n            return _engine;\n        };\n        this.getOS = function () {\n            var _os = {};\n            _os[NAME] = undefined;\n            _os[VERSION] = undefined;\n            rgxMapper.call(_os, _ua, _rgxmap.os);\n            if (_isSelfNav && !_os[NAME] && _uach && _uach.platform != 'Unknown') {\n                _os[NAME] = _uach.platform  \n                                    .replace(/chrome os/i, CHROMIUM_OS)\n                                    .replace(/macos/i, MAC_OS);           // backward compatibility\n            }\n            return _os;\n        };\n        this.getResult = function () {\n            return {\n                ua      : this.getUA(),\n                browser : this.getBrowser(),\n                engine  : this.getEngine(),\n                os      : this.getOS(),\n                device  : this.getDevice(),\n                cpu     : this.getCPU()\n            };\n        };\n        this.getUA = function () {\n            return _ua;\n        };\n        this.setUA = function (ua) {\n            _ua = (typeof ua === STR_TYPE && ua.length > UA_MAX_LENGTH) ? trim(ua, UA_MAX_LENGTH) : ua;\n            return this;\n        };\n        this.setUA(_ua);\n        return this;\n    };\n\n    UAParser.VERSION = LIBVERSION;\n    UAParser.BROWSER =  enumerize([NAME, VERSION, MAJOR]);\n    UAParser.CPU = enumerize([ARCHITECTURE]);\n    UAParser.DEVICE = enumerize([MODEL, VENDOR, TYPE, CONSOLE, MOBILE, SMARTTV, TABLET, WEARABLE, EMBEDDED]);\n    UAParser.ENGINE = UAParser.OS = enumerize([NAME, VERSION]);\n\n    ///////////\n    // Export\n    //////////\n\n    // check js environment\n    if (typeof(exports) !== UNDEF_TYPE) {\n        // nodejs env\n        if (typeof module !== UNDEF_TYPE && module.exports) {\n            exports = module.exports = UAParser;\n        }\n        exports.UAParser = UAParser;\n    } else {\n        // requirejs env (optional)\n        if (typeof(define) === FUNC_TYPE && define.amd) {\n            define(function () {\n                return UAParser;\n            });\n        } else if (typeof window !== UNDEF_TYPE) {\n            // browser env\n            window.UAParser = UAParser;\n        }\n    }\n\n    // jQuery/Zepto specific (optional)\n    // Note:\n    //   In AMD env the global scope should be kept clean, but jQuery is an exception.\n    //   jQuery always exports to global scope, unless jQuery.noConflict(true) is used,\n    //   and we should catch that.\n    var $ = typeof window !== UNDEF_TYPE && (window.jQuery || window.Zepto);\n    if ($ && !$.ua) {\n        var parser = new UAParser();\n        $.ua = parser.getResult();\n        $.ua.get = function () {\n            return parser.getUA();\n        };\n        $.ua.set = function (ua) {\n            parser.setUA(ua);\n            var result = parser.getResult();\n            for (var prop in result) {\n                $.ua[prop] = result[prop];\n            }\n        };\n    }\n\n})(typeof window === 'object' ? window : this);\n","/*!\n * EventEmitter v5.2.4 - git.io/ee\n * Unlicense - http://unlicense.org/\n * Oliver Caldwell - http://oli.me.uk/\n * @preserve\n */\n\n;(function (exports) {\n    'use strict';\n\n    /**\n     * Class for managing events.\n     * Can be extended to provide event functionality in other classes.\n     *\n     * @class EventEmitter Manages event registering and emitting.\n     */\n    function EventEmitter() {}\n\n    // Shortcuts to improve speed and size\n    var proto = EventEmitter.prototype;\n    var originalGlobalValue = exports.EventEmitter;\n\n    /**\n     * Finds the index of the listener for the event in its storage array.\n     *\n     * @param {Function[]} listeners Array of listeners to search through.\n     * @param {Function} listener Method to look for.\n     * @return {Number} Index of the specified listener, -1 if not found\n     * @api private\n     */\n    function indexOfListener(listeners, listener) {\n        var i = listeners.length;\n        while (i--) {\n            if (listeners[i].listener === listener) {\n                return i;\n            }\n        }\n\n        return -1;\n    }\n\n    /**\n     * Alias a method while keeping the context correct, to allow for overwriting of target method.\n     *\n     * @param {String} name The name of the target method.\n     * @return {Function} The aliased method\n     * @api private\n     */\n    function alias(name) {\n        return function aliasClosure() {\n            return this[name].apply(this, arguments);\n        };\n    }\n\n    /**\n     * Returns the listener array for the specified event.\n     * Will initialise the event object and listener arrays if required.\n     * Will return an object if you use a regex search. The object contains keys for each matched event. So /ba[rz]/ might return an object containing bar and baz. But only if you have either defined them with defineEvent or added some listeners to them.\n     * Each property in the object response is an array of listener functions.\n     *\n     * @param {String|RegExp} evt Name of the event to return the listeners from.\n     * @return {Function[]|Object} All listener functions for the event.\n     */\n    proto.getListeners = function getListeners(evt) {\n        var events = this._getEvents();\n        var response;\n        var key;\n\n        // Return a concatenated array of all matching events if\n        // the selector is a regular expression.\n        if (evt instanceof RegExp) {\n            response = {};\n            for (key in events) {\n                if (events.hasOwnProperty(key) && evt.test(key)) {\n                    response[key] = events[key];\n                }\n            }\n        }\n        else {\n            response = events[evt] || (events[evt] = []);\n        }\n\n        return response;\n    };\n\n    /**\n     * Takes a list of listener objects and flattens it into a list of listener functions.\n     *\n     * @param {Object[]} listeners Raw listener objects.\n     * @return {Function[]} Just the listener functions.\n     */\n    proto.flattenListeners = function flattenListeners(listeners) {\n        var flatListeners = [];\n        var i;\n\n        for (i = 0; i < listeners.length; i += 1) {\n            flatListeners.push(listeners[i].listener);\n        }\n\n        return flatListeners;\n    };\n\n    /**\n     * Fetches the requested listeners via getListeners but will always return the results inside an object. This is mainly for internal use but others may find it useful.\n     *\n     * @param {String|RegExp} evt Name of the event to return the listeners from.\n     * @return {Object} All listener functions for an event in an object.\n     */\n    proto.getListenersAsObject = function getListenersAsObject(evt) {\n        var listeners = this.getListeners(evt);\n        var response;\n\n        if (listeners instanceof Array) {\n            response = {};\n            response[evt] = listeners;\n        }\n\n        return response || listeners;\n    };\n\n    function isValidListener (listener) {\n        if (typeof listener === 'function' || listener instanceof RegExp) {\n            return true\n        } else if (listener && typeof listener === 'object') {\n            return isValidListener(listener.listener)\n        } else {\n            return false\n        }\n    }\n\n    /**\n     * Adds a listener function to the specified event.\n     * The listener will not be added if it is a duplicate.\n     * If the listener returns true then it will be removed after it is called.\n     * If you pass a regular expression as the event name then the listener will be added to all events that match it.\n     *\n     * @param {String|RegExp} evt Name of the event to attach the listener to.\n     * @param {Function} listener Method to be called when the event is emitted. If the function returns true then it will be removed after calling.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.addListener = function addListener(evt, listener) {\n        if (!isValidListener(listener)) {\n            throw new TypeError('listener must be a function');\n        }\n\n        var listeners = this.getListenersAsObject(evt);\n        var listenerIsWrapped = typeof listener === 'object';\n        var key;\n\n        for (key in listeners) {\n            if (listeners.hasOwnProperty(key) && indexOfListener(listeners[key], listener) === -1) {\n                listeners[key].push(listenerIsWrapped ? listener : {\n                    listener: listener,\n                    once: false\n                });\n            }\n        }\n\n        return this;\n    };\n\n    /**\n     * Alias of addListener\n     */\n    proto.on = alias('addListener');\n\n    /**\n     * Semi-alias of addListener. It will add a listener that will be\n     * automatically removed after its first execution.\n     *\n     * @param {String|RegExp} evt Name of the event to attach the listener to.\n     * @param {Function} listener Method to be called when the event is emitted. If the function returns true then it will be removed after calling.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.addOnceListener = function addOnceListener(evt, listener) {\n        return this.addListener(evt, {\n            listener: listener,\n            once: true\n        });\n    };\n\n    /**\n     * Alias of addOnceListener.\n     */\n    proto.once = alias('addOnceListener');\n\n    /**\n     * Defines an event name. This is required if you want to use a regex to add a listener to multiple events at once. If you don't do this then how do you expect it to know what event to add to? Should it just add to every possible match for a regex? No. That is scary and bad.\n     * You need to tell it what event names should be matched by a regex.\n     *\n     * @param {String} evt Name of the event to create.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.defineEvent = function defineEvent(evt) {\n        this.getListeners(evt);\n        return this;\n    };\n\n    /**\n     * Uses defineEvent to define multiple events.\n     *\n     * @param {String[]} evts An array of event names to define.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.defineEvents = function defineEvents(evts) {\n        for (var i = 0; i < evts.length; i += 1) {\n            this.defineEvent(evts[i]);\n        }\n        return this;\n    };\n\n    /**\n     * Removes a listener function from the specified event.\n     * When passed a regular expression as the event name, it will remove the listener from all events that match it.\n     *\n     * @param {String|RegExp} evt Name of the event to remove the listener from.\n     * @param {Function} listener Method to remove from the event.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.removeListener = function removeListener(evt, listener) {\n        var listeners = this.getListenersAsObject(evt);\n        var index;\n        var key;\n\n        for (key in listeners) {\n            if (listeners.hasOwnProperty(key)) {\n                index = indexOfListener(listeners[key], listener);\n\n                if (index !== -1) {\n                    listeners[key].splice(index, 1);\n                }\n            }\n        }\n\n        return this;\n    };\n\n    /**\n     * Alias of removeListener\n     */\n    proto.off = alias('removeListener');\n\n    /**\n     * Adds listeners in bulk using the manipulateListeners method.\n     * If you pass an object as the first argument you can add to multiple events at once. The object should contain key value pairs of events and listeners or listener arrays. You can also pass it an event name and an array of listeners to be added.\n     * You can also pass it a regular expression to add the array of listeners to all events that match it.\n     * Yeah, this function does quite a bit. That's probably a bad thing.\n     *\n     * @param {String|Object|RegExp} evt An event name if you will pass an array of listeners next. An object if you wish to add to multiple events at once.\n     * @param {Function[]} [listeners] An optional array of listener functions to add.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.addListeners = function addListeners(evt, listeners) {\n        // Pass through to manipulateListeners\n        return this.manipulateListeners(false, evt, listeners);\n    };\n\n    /**\n     * Removes listeners in bulk using the manipulateListeners method.\n     * If you pass an object as the first argument you can remove from multiple events at once. The object should contain key value pairs of events and listeners or listener arrays.\n     * You can also pass it an event name and an array of listeners to be removed.\n     * You can also pass it a regular expression to remove the listeners from all events that match it.\n     *\n     * @param {String|Object|RegExp} evt An event name if you will pass an array of listeners next. An object if you wish to remove from multiple events at once.\n     * @param {Function[]} [listeners] An optional array of listener functions to remove.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.removeListeners = function removeListeners(evt, listeners) {\n        // Pass through to manipulateListeners\n        return this.manipulateListeners(true, evt, listeners);\n    };\n\n    /**\n     * Edits listeners in bulk. The addListeners and removeListeners methods both use this to do their job. You should really use those instead, this is a little lower level.\n     * The first argument will determine if the listeners are removed (true) or added (false).\n     * If you pass an object as the second argument you can add/remove from multiple events at once. The object should contain key value pairs of events and listeners or listener arrays.\n     * You can also pass it an event name and an array of listeners to be added/removed.\n     * You can also pass it a regular expression to manipulate the listeners of all events that match it.\n     *\n     * @param {Boolean} remove True if you want to remove listeners, false if you want to add.\n     * @param {String|Object|RegExp} evt An event name if you will pass an array of listeners next. An object if you wish to add/remove from multiple events at once.\n     * @param {Function[]} [listeners] An optional array of listener functions to add/remove.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.manipulateListeners = function manipulateListeners(remove, evt, listeners) {\n        var i;\n        var value;\n        var single = remove ? this.removeListener : this.addListener;\n        var multiple = remove ? this.removeListeners : this.addListeners;\n\n        // If evt is an object then pass each of its properties to this method\n        if (typeof evt === 'object' && !(evt instanceof RegExp)) {\n            for (i in evt) {\n                if (evt.hasOwnProperty(i) && (value = evt[i])) {\n                    // Pass the single listener straight through to the singular method\n                    if (typeof value === 'function') {\n                        single.call(this, i, value);\n                    }\n                    else {\n                        // Otherwise pass back to the multiple function\n                        multiple.call(this, i, value);\n                    }\n                }\n            }\n        }\n        else {\n            // So evt must be a string\n            // And listeners must be an array of listeners\n            // Loop over it and pass each one to the multiple method\n            i = listeners.length;\n            while (i--) {\n                single.call(this, evt, listeners[i]);\n            }\n        }\n\n        return this;\n    };\n\n    /**\n     * Removes all listeners from a specified event.\n     * If you do not specify an event then all listeners will be removed.\n     * That means every event will be emptied.\n     * You can also pass a regex to remove all events that match it.\n     *\n     * @param {String|RegExp} [evt] Optional name of the event to remove all listeners for. Will remove from every event if not passed.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.removeEvent = function removeEvent(evt) {\n        var type = typeof evt;\n        var events = this._getEvents();\n        var key;\n\n        // Remove different things depending on the state of evt\n        if (type === 'string') {\n            // Remove all listeners for the specified event\n            delete events[evt];\n        }\n        else if (evt instanceof RegExp) {\n            // Remove all events matching the regex.\n            for (key in events) {\n                if (events.hasOwnProperty(key) && evt.test(key)) {\n                    delete events[key];\n                }\n            }\n        }\n        else {\n            // Remove all listeners in all events\n            delete this._events;\n        }\n\n        return this;\n    };\n\n    /**\n     * Alias of removeEvent.\n     *\n     * Added to mirror the node API.\n     */\n    proto.removeAllListeners = alias('removeEvent');\n\n    /**\n     * Emits an event of your choice.\n     * When emitted, every listener attached to that event will be executed.\n     * If you pass the optional argument array then those arguments will be passed to every listener upon execution.\n     * Because it uses `apply`, your array of arguments will be passed as if you wrote them out separately.\n     * So they will not arrive within the array on the other side, they will be separate.\n     * You can also pass a regular expression to emit to all events that match it.\n     *\n     * @param {String|RegExp} evt Name of the event to emit and execute listeners for.\n     * @param {Array} [args] Optional array of arguments to be passed to each listener.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.emitEvent = function emitEvent(evt, args) {\n        var listenersMap = this.getListenersAsObject(evt);\n        var listeners;\n        var listener;\n        var i;\n        var key;\n        var response;\n\n        for (key in listenersMap) {\n            if (listenersMap.hasOwnProperty(key)) {\n                listeners = listenersMap[key].slice(0);\n\n                for (i = 0; i < listeners.length; i++) {\n                    // If the listener returns true then it shall be removed from the event\n                    // The function is executed either with a basic call or an apply if there is an args array\n                    listener = listeners[i];\n\n                    if (listener.once === true) {\n                        this.removeListener(evt, listener.listener);\n                    }\n\n                    response = listener.listener.apply(this, args || []);\n\n                    if (response === this._getOnceReturnValue()) {\n                        this.removeListener(evt, listener.listener);\n                    }\n                }\n            }\n        }\n\n        return this;\n    };\n\n    /**\n     * Alias of emitEvent\n     */\n    proto.trigger = alias('emitEvent');\n\n    /**\n     * Subtly different from emitEvent in that it will pass its arguments on to the listeners, as opposed to taking a single array of arguments to pass on.\n     * As with emitEvent, you can pass a regex in place of the event name to emit to all events that match it.\n     *\n     * @param {String|RegExp} evt Name of the event to emit and execute listeners for.\n     * @param {...*} Optional additional arguments to be passed to each listener.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.emit = function emit(evt) {\n        var args = Array.prototype.slice.call(arguments, 1);\n        return this.emitEvent(evt, args);\n    };\n\n    /**\n     * Sets the current value to check against when executing listeners. If a\n     * listeners return value matches the one set here then it will be removed\n     * after execution. This value defaults to true.\n     *\n     * @param {*} value The new value to check for when executing listeners.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.setOnceReturnValue = function setOnceReturnValue(value) {\n        this._onceReturnValue = value;\n        return this;\n    };\n\n    /**\n     * Fetches the current value to check against when executing listeners. If\n     * the listeners return value matches this one then it should be removed\n     * automatically. It will return true by default.\n     *\n     * @return {*|Boolean} The current value to check for or the default, true.\n     * @api private\n     */\n    proto._getOnceReturnValue = function _getOnceReturnValue() {\n        if (this.hasOwnProperty('_onceReturnValue')) {\n            return this._onceReturnValue;\n        }\n        else {\n            return true;\n        }\n    };\n\n    /**\n     * Fetches the events object and creates one if required.\n     *\n     * @return {Object} The events storage object.\n     * @api private\n     */\n    proto._getEvents = function _getEvents() {\n        return this._events || (this._events = {});\n    };\n\n    /**\n     * Reverts the global {@link EventEmitter} to its previous value and returns a reference to this version.\n     *\n     * @return {Function} Non conflicting EventEmitter class.\n     */\n    EventEmitter.noConflict = function noConflict() {\n        exports.EventEmitter = originalGlobalValue;\n        return EventEmitter;\n    };\n\n    // Expose the class either via AMD, CommonJS or the global object\n    if (typeof define === 'function' && define.amd) {\n        define(function () {\n            return EventEmitter;\n        });\n    }\n    else if (typeof module === 'object' && module.exports){\n        module.exports = EventEmitter;\n    }\n    else {\n        exports.EventEmitter = EventEmitter;\n    }\n}(this || {}));\n","var map = {\n\t\"./facebookManager\": [\n\t\t6866,\n\t\t5,\n\t\t866\n\t],\n\t\"./facebookManager.js\": [\n\t\t6866,\n\t\t5,\n\t\t866\n\t],\n\t\"./httpHostManager\": [\n\t\t335,\n\t\t5,\n\t\t251,\n\t\t335\n\t],\n\t\"./httpHostManager.js\": [\n\t\t335,\n\t\t5,\n\t\t251,\n\t\t335\n\t],\n\t\"./httpIframeManager\": [\n\t\t2818,\n\t\t5,\n\t\t251,\n\t\t818\n\t],\n\t\"./httpIframeManager.js\": [\n\t\t2818,\n\t\t5,\n\t\t251,\n\t\t818\n\t],\n\t\"./httpPopupManager\": [\n\t\t8240,\n\t\t5,\n\t\t251,\n\t\t240\n\t],\n\t\"./httpPopupManager.js\": [\n\t\t8240,\n\t\t5,\n\t\t251,\n\t\t240\n\t],\n\t\"./httpsManager\": [\n\t\t8115,\n\t\t5,\n\t\t251,\n\t\t115\n\t],\n\t\"./httpsManager.js\": [\n\t\t8115,\n\t\t5,\n\t\t251,\n\t\t115\n\t],\n\t\"./manager\": [\n\t\t4005,\n\t\t5\n\t],\n\t\"./manager.js\": [\n\t\t4005,\n\t\t5\n\t],\n\t\"./safariManager\": [\n\t\t6315,\n\t\t5,\n\t\t315\n\t],\n\t\"./safariManager.js\": [\n\t\t6315,\n\t\t5,\n\t\t315\n\t],\n\t\"./urlSessionManager\": [\n\t\t7809,\n\t\t5,\n\t\t809\n\t],\n\t\"./urlSessionManager.js\": [\n\t\t7809,\n\t\t5,\n\t\t809\n\t],\n\t\"./walletManager\": [\n\t\t2217,\n\t\t5,\n\t\t217\n\t],\n\t\"./walletManager.js\": [\n\t\t2217,\n\t\t5,\n\t\t217\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn Promise.all(ids.slice(1).map(__webpack_require__.e)).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function() { return Object.keys(map); };\nwebpackAsyncContext.id = 3564;\nmodule.exports = webpackAsyncContext;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var getProto = Object.getPrototypeOf ? function(obj) { return Object.getPrototypeOf(obj); } : function(obj) { return obj.__proto__; };\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach(function(key) { def[key] = function() { return value[key]; }; });\n\t}\n\tdef['default'] = function() { return value; };\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","var inProgress = {};\nvar dataWebpackPrefix = \"@cleverpush/cleverpush-js-sdk:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = function(url, done, key, chunkId) {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = function(prev, event) {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach(function(fn) { return fn(event); });\n\t\tif(prev) return prev(event);\n\t}\n\t;\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","__webpack_require__.amdO = {};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = function(chunkId) {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce(function(promises, key) {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = function(chunkId) {\n\t// return url for filenames based on template\n\treturn \"chunk/\" + chunkId + \".\" + {\"5\":\"7bf12eb14858c1f4fd98\",\"8\":\"7d0faceafb24a4287019\",\"34\":\"0119b66e709d8115e100\",\"103\":\"ca34caf4a7c7f94a245a\",\"115\":\"45e07019e1b45bb84052\",\"217\":\"543c812d7b7b9d0427f2\",\"240\":\"8665aea2929e55fe3a8c\",\"251\":\"ff5b3c0c290e9961835b\",\"315\":\"095b3ee2a4676ea1eb5e\",\"335\":\"c237fdc12a6318904159\",\"376\":\"8cab31ffc2b64b495b06\",\"407\":\"997a9a798853a61f7e13\",\"411\":\"c62da7dbdb6b237a02b5\",\"436\":\"175ba0648d6d3193496a\",\"451\":\"f2b1a8034b7caf543277\",\"453\":\"a9b1c8eb8bf00aa708da\",\"467\":\"7b8122cdb1e2a2df2b71\",\"491\":\"5f326eabd1c4824d8e01\",\"498\":\"893d701f72b877057a9e\",\"499\":\"9985a935289708bf13c2\",\"537\":\"4f471d421e763248096e\",\"597\":\"48ddfac9eb02d11eed66\",\"600\":\"fb8a9206d4ca6d97fa1d\",\"699\":\"d323240290f0409c28d9\",\"720\":\"da266ba8d9bc4aa9c01f\",\"728\":\"9c96faf765f9eb32cc45\",\"737\":\"1c9280a231d4e50c4246\",\"754\":\"8f59ede6bb19cc471de6\",\"809\":\"f24974bae15c54a0385a\",\"818\":\"499454a46963d5f16bce\",\"862\":\"9b77f74e899e8083f8b8\",\"866\":\"b2f0a9d3a8b1ebde3ee7\",\"971\":\"c4307cdb8aea256f997f\"}[chunkId] + \".js\";\n};","// This function allow to reference all chunks\n__webpack_require__.miniCssF = function(chunkId) {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"https://static.cleverpush.com/sdk/\";","__webpack_require__.b = document.baseURI || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t370: 0\n};\n\n__webpack_require__.f.j = function(chunkId, promises) {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise(function(resolve, reject) { installedChunkData = installedChunks[chunkId] = [resolve, reject]; });\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = function(event) {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t} else installedChunks[chunkId] = 0;\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tfor(moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) var result = runtime(__webpack_require__);\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkIds[i]] = 0;\n\t}\n\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunk_cleverpush_cleverpush_js_sdk\"] = self[\"webpackChunk_cleverpush_cleverpush_js_sdk\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","import CleverPush from './cleverpush';\nimport { log } from './utils/debug';\n\nwindow.__cleverPushSdkLoadCount = (window.__cleverPushSdkLoadCount || 0) + 1;\nif (window.__cleverPushSdkLoadCount > 1) {\n  log.warn('The SDK is included more than once. Please only load the CleverPush SDK once in your code.');\n} else {\n  let predefinedFunctionCalls;\n  if (typeof window.CleverPush === 'object' && Array.isArray(window.CleverPush)) {\n    predefinedFunctionCalls = [...window.CleverPush];\n  }\n\n  if (typeof window.CleverPush === 'undefined' || (typeof window.CleverPush === 'object' && Array.isArray(window.CleverPush))) {\n    window.CleverPush = new CleverPush();\n    // require(\"expose-loader?CleverPush!./cleverpush.js\");\n  }\n\n  if (predefinedFunctionCalls) {\n    for (let i = 0; i < predefinedFunctionCalls.length; i += 1) {\n      window.CleverPush.executeFunction(predefinedFunctionCalls[i]);\n    }\n  }\n}\n\n// prototype 1.7 compatibility fix\n// https://github.com/zloirock/core-js/issues/289\nif (typeof Symbol !== 'undefined') {\n  Object.defineProperty(Array.prototype, Symbol.toStringTag, { value: 'Array' });\n}\n"],"sourceRoot":""}